<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"19981115.xyz","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac night"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Golang标准库os模块-文件目录相关os标准库实现了平台（操作系统）无关的编程接口。 https:&#x2F;&#x2F;pkg.go.dev&#x2F;std">
<meta property="og:type" content="article">
<meta property="og:title" content="Golang学习笔记五-标准库">
<meta property="og:url" content="https://19981115.xyz/posts/65019/index.html">
<meta property="og:site_name" content="MY-Notes">
<meta property="og:description" content="Golang标准库os模块-文件目录相关os标准库实现了平台（操作系统）无关的编程接口。 https:&#x2F;&#x2F;pkg.go.dev&#x2F;std">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-01-18T16:12:14.000Z">
<meta property="article:modified_time" content="2022-01-18T16:34:39.631Z">
<meta property="article:author" content="小白">
<meta property="article:tag" content="Golang">
<meta property="article:tag" content="标准库">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://19981115.xyz/posts/65019/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Golang学习笔记五-标准库 | MY-Notes</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="MY-Notes" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">MY-Notes</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">MY Quick Notes</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://19981115.xyz/posts/65019/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="小白">
      <meta itemprop="description" content="随言笔记，胡乱编写">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MY-Notes">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Golang学习笔记五-标准库
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-01-19 00:12:14 / 修改时间：00:34:39" itemprop="dateCreated datePublished" datetime="2022-01-19T00:12:14+08:00">2022-01-19</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Golang标准库os模块-文件目录相关"><a href="#Golang标准库os模块-文件目录相关" class="headerlink" title="Golang标准库os模块-文件目录相关"></a>Golang标准库os模块-文件目录相关</h1><p>os标准库实现了平台（操作系统）无关的编程接口。</p>
<p><a target="_blank" rel="noopener" href="https://pkg.go.dev/std">https://pkg.go.dev/std</a></p>
<span id="more"></span>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建文件</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">createFile</span><span class="params">()</span></span> &#123;</span><br><span class="line">	f, err := os.Create(<span class="string">&quot;test.txt&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;err: %v\n&quot;</span>, err)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;f: %v\n&quot;</span>, f)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建目录</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">createDir</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 创建单个目录</span></span><br><span class="line">	<span class="comment">/* err := os.Mkdir(&quot;test&quot;, os.ModePerm)</span></span><br><span class="line"><span class="comment">	if err != nil &#123;</span></span><br><span class="line"><span class="comment">		fmt.Printf(&quot;err: %v\n&quot;, err)</span></span><br><span class="line"><span class="comment">	&#125; */</span></span><br><span class="line">	err := os.MkdirAll(<span class="string">&quot;test/a/b&quot;</span>, os.ModePerm)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;err: %v\n&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除目录</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">removeDir</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">/* err := os.Remove(&quot;test.txt&quot;)</span></span><br><span class="line"><span class="comment">	if err != nil &#123;</span></span><br><span class="line"><span class="comment">		fmt.Printf(&quot;err: %v\n&quot;, err)</span></span><br><span class="line"><span class="comment">	&#125; */</span></span><br><span class="line"></span><br><span class="line">	err := os.RemoveAll(<span class="string">&quot;test&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;err: %v\n&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获得工作目录</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getWd</span><span class="params">()</span></span> &#123;</span><br><span class="line">	dir, err := os.Getwd()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;err: %v\n&quot;</span>, err)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;dir: %v\n&quot;</span>, dir)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改工作目录</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">chWd</span><span class="params">()</span></span> &#123;</span><br><span class="line">	err := os.Chdir(<span class="string">&quot;d:/&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;err: %v\n&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(os.Getwd())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获得临时目录</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getTemp</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := os.TempDir()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;s: %v\n&quot;</span>, s)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重命名文件</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">renameFile</span><span class="params">()</span></span> &#123;</span><br><span class="line">	err := os.Rename(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;test2.txt&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;err: %v\n&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读文件</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">readFile</span><span class="params">()</span></span> &#123;</span><br><span class="line">	b, err := os.ReadFile(<span class="string">&quot;test2.txt&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;err: %v\n&quot;</span>, err)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;b: %v\n&quot;</span>, <span class="keyword">string</span>(b[:]))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写文件</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">writeFile</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := <span class="string">&quot;hello world&quot;</span></span><br><span class="line">	os.WriteFile(<span class="string">&quot;test2.txt&quot;</span>, []<span class="keyword">byte</span>(s), os.ModePerm)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// createFile()</span></span><br><span class="line">	<span class="comment">// createDir()</span></span><br><span class="line">	<span class="comment">// removeDir()</span></span><br><span class="line">	<span class="comment">// removeDir()</span></span><br><span class="line">	<span class="comment">// getWd()</span></span><br><span class="line">	<span class="comment">// chWd()</span></span><br><span class="line">	<span class="comment">// renameFile()</span></span><br><span class="line">	<span class="comment">// readFile()</span></span><br><span class="line">	<span class="comment">// writeFile()</span></span><br><span class="line">	<span class="comment">// getTemp()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="Golang标准库os模块-File文件读操作"><a href="#Golang标准库os模块-File文件读操作" class="headerlink" title="Golang标准库os模块-File文件读操作"></a>Golang标准库os模块-File文件读操作</h1><p>这里结束和 <code>File</code>结构体相关的文件读操作</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打开关闭文件</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">openCloseFile</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 只能读</span></span><br><span class="line">	f, _ := os.Open(<span class="string">&quot;a.txt&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f.Name(): %v\n&quot;</span>, f.Name())</span><br><span class="line">	<span class="comment">// 根据第二个参数 可以读写或者创建</span></span><br><span class="line">	f2, _ := os.OpenFile(<span class="string">&quot;a1.txt&quot;</span>, os.O_RDWR|os.O_CREATE, <span class="number">0755</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f2.Name(): %v\n&quot;</span>, f2.Name())</span><br><span class="line"></span><br><span class="line">	err := f.Close()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;err: %v\n&quot;</span>, err)</span><br><span class="line">	err2 := f2.Close()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;err2: %v\n&quot;</span>, err2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建文件</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">createFile</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 等价于：OpenFile(name, O_RDWR|O_CREATE|O_TRUNC, 0666)</span></span><br><span class="line">	f, _ := os.Create(<span class="string">&quot;a2.txt&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f.Name(): %v\n&quot;</span>, f.Name())</span><br><span class="line">	<span class="comment">// 第一个参数 目录默认：Temp 第二个参数 文件名前缀</span></span><br><span class="line">	f2, _ := os.CreateTemp(<span class="string">&quot;&quot;</span>, <span class="string">&quot;temp&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f2.Name(): %v\n&quot;</span>, f2.Name())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读操作</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">readOps</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 循环读取</span></span><br><span class="line">	<span class="comment">/* 	f, _ := os.Open(&quot;a.txt&quot;)</span></span><br><span class="line"><span class="comment">	   	for &#123;</span></span><br><span class="line"><span class="comment">	   		buf := make([]byte, 6)</span></span><br><span class="line"><span class="comment">	   		n, err := f.Read(buf)</span></span><br><span class="line"><span class="comment">	   		fmt.Println(string(buf))</span></span><br><span class="line"><span class="comment">	   		fmt.Printf(&quot;n: %v\n&quot;, n)</span></span><br><span class="line"><span class="comment">	   		if err == io.EOF &#123;</span></span><br><span class="line"><span class="comment">	   			break</span></span><br><span class="line"><span class="comment">	   		&#125;</span></span><br><span class="line"><span class="comment">	   	&#125;</span></span><br><span class="line"><span class="comment">	   	f.Close()</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="comment">/* buf := make([]byte, 10)</span></span><br><span class="line"><span class="comment">	f2, _ := os.Open(&quot;a.txt&quot;)</span></span><br><span class="line"><span class="comment">	// 从5开始读10个字节</span></span><br><span class="line"><span class="comment">	n, _ := f2.ReadAt(buf, 5)</span></span><br><span class="line"><span class="comment">	fmt.Printf(&quot;n: %v\n&quot;, n)</span></span><br><span class="line"><span class="comment">	fmt.Printf(&quot;string(buf): %v\n&quot;, string(buf))</span></span><br><span class="line"><span class="comment">	f2.Close() */</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 测试 a目录下面有b和c目录</span></span><br><span class="line">	<span class="comment">/* f, _ := os.Open(&quot;a&quot;)</span></span><br><span class="line"><span class="comment">	de, _ := f.ReadDir(-1)</span></span><br><span class="line"><span class="comment">	for _, v := range de &#123;</span></span><br><span class="line"><span class="comment">		fmt.Printf(&quot;v.IsDir(): %v\n&quot;, v.IsDir())</span></span><br><span class="line"><span class="comment">		fmt.Printf(&quot;v.Name(): %v\n&quot;, v.Name())</span></span><br><span class="line"><span class="comment">	&#125; */</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 定位</span></span><br><span class="line">	f, _ := os.Open(<span class="string">&quot;a.txt&quot;</span>)</span><br><span class="line">	f.Seek(<span class="number">3</span>, <span class="number">0</span>)</span><br><span class="line">	buf := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">10</span>)</span><br><span class="line">	n, _ := f.Read(buf)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;n: %v\n&quot;</span>, n)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;string(buf): %v\n&quot;</span>, <span class="keyword">string</span>(buf))</span><br><span class="line">	f.Close()</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// openCloseFile()</span></span><br><span class="line">	<span class="comment">// createFile()</span></span><br><span class="line">	readOps()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="Golang标准库os模块-File文件写操作"><a href="#Golang标准库os模块-File文件写操作" class="headerlink" title="Golang标准库os模块-File文件写操作"></a>Golang标准库os模块-File文件写操作</h1><p>这里结束和 <code>File</code>结构体相关的文件写操作</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打开关闭文件</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">openCloseFile</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 只能读</span></span><br><span class="line">	f, _ := os.Open(<span class="string">&quot;a.txt&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f.Name(): %v\n&quot;</span>, f.Name())</span><br><span class="line">	<span class="comment">// 根据第二个参数 可以读写或者创建</span></span><br><span class="line">	f2, _ := os.OpenFile(<span class="string">&quot;a1.txt&quot;</span>, os.O_RDWR|os.O_CREATE, <span class="number">0755</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f2.Name(): %v\n&quot;</span>, f2.Name())</span><br><span class="line"></span><br><span class="line">	err := f.Close()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;err: %v\n&quot;</span>, err)</span><br><span class="line">	err2 := f2.Close()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;err2: %v\n&quot;</span>, err2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建文件</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">createFile</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 等价于：OpenFile(name, O_RDWR|O_CREATE|O_TRUNC, 0666)</span></span><br><span class="line">	f, _ := os.Create(<span class="string">&quot;a2.txt&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f.Name(): %v\n&quot;</span>, f.Name())</span><br><span class="line">	<span class="comment">// 第一个参数 目录默认：Temp 第二个参数 文件名前缀</span></span><br><span class="line">	f2, _ := os.CreateTemp(<span class="string">&quot;&quot;</span>, <span class="string">&quot;temp&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f2.Name(): %v\n&quot;</span>, f2.Name())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读操作</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">readOps</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 循环读取</span></span><br><span class="line">	<span class="comment">/* 	f, _ := os.Open(&quot;a.txt&quot;)</span></span><br><span class="line"><span class="comment">	   	for &#123;</span></span><br><span class="line"><span class="comment">	   		buf := make([]byte, 6)</span></span><br><span class="line"><span class="comment">	   		n, err := f.Read(buf)</span></span><br><span class="line"><span class="comment">	   		fmt.Println(string(buf))</span></span><br><span class="line"><span class="comment">	   		fmt.Printf(&quot;n: %v\n&quot;, n)</span></span><br><span class="line"><span class="comment">	   		if err == io.EOF &#123;</span></span><br><span class="line"><span class="comment">	   			break</span></span><br><span class="line"><span class="comment">	   		&#125;</span></span><br><span class="line"><span class="comment">	   	&#125;</span></span><br><span class="line"><span class="comment">	   	f.Close()</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="comment">/* buf := make([]byte, 10)</span></span><br><span class="line"><span class="comment">	f2, _ := os.Open(&quot;a.txt&quot;)</span></span><br><span class="line"><span class="comment">	// 从5开始读10个字节</span></span><br><span class="line"><span class="comment">	n, _ := f2.ReadAt(buf, 5)</span></span><br><span class="line"><span class="comment">	fmt.Printf(&quot;n: %v\n&quot;, n)</span></span><br><span class="line"><span class="comment">	fmt.Printf(&quot;string(buf): %v\n&quot;, string(buf))</span></span><br><span class="line"><span class="comment">	f2.Close() */</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 测试 a目录下面有b和c目录</span></span><br><span class="line">	<span class="comment">/* f, _ := os.Open(&quot;a&quot;)</span></span><br><span class="line"><span class="comment">	de, _ := f.ReadDir(-1)</span></span><br><span class="line"><span class="comment">	for _, v := range de &#123;</span></span><br><span class="line"><span class="comment">		fmt.Printf(&quot;v.IsDir(): %v\n&quot;, v.IsDir())</span></span><br><span class="line"><span class="comment">		fmt.Printf(&quot;v.Name(): %v\n&quot;, v.Name())</span></span><br><span class="line"><span class="comment">	&#125; */</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// 定位</span></span><br><span class="line">	f, _ := os.Open(<span class="string">&quot;a.txt&quot;</span>)</span><br><span class="line">	f.Seek(<span class="number">3</span>, <span class="number">0</span>)</span><br><span class="line">	buf := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">10</span>)</span><br><span class="line">	n, _ := f.Read(buf)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;n: %v\n&quot;</span>, n)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;string(buf): %v\n&quot;</span>, <span class="keyword">string</span>(buf))</span><br><span class="line">	f.Close()</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// openCloseFile()</span></span><br><span class="line">	<span class="comment">// createFile()</span></span><br><span class="line">	readOps()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="Golang标准库os包进程相关操作"><a href="#Golang标准库os包进程相关操作" class="headerlink" title="Golang标准库os包进程相关操作"></a>Golang标准库os包进程相关操作</h1><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 获得当前正在运行的进程id</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;os.Getpid(): %v\n&quot;</span>, os.Getpid())</span><br><span class="line">	<span class="comment">// 父id</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;os.Getppid(): %v\n&quot;</span>, os.Getppid())</span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置新进程的属性</span></span><br><span class="line">	attr := &amp;os.ProcAttr&#123;</span><br><span class="line">		<span class="comment">//files指定新进程继承的活动文件对象</span></span><br><span class="line">		<span class="comment">//前三个分别为，标准输入、标准输出、标准错误输出</span></span><br><span class="line">		Files: []*os.File&#123;os.Stdin, os.Stdout, os.Stderr&#125;,</span><br><span class="line">		<span class="comment">//新进程的环境变量</span></span><br><span class="line">		Env: os.Environ(),</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//开始一个新进程</span></span><br><span class="line">	p, err := os.StartProcess(<span class="string">&quot;C:\\Windows\\System32\\notepad.exe&quot;</span>, []<span class="keyword">string</span>&#123;<span class="string">&quot;C:\\Windows\\System32\\notepad.exe&quot;</span>, <span class="string">&quot;D:\\a.txt&quot;</span>&#125;, attr)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(p)</span><br><span class="line">	fmt.Println(<span class="string">&quot;进程ID：&quot;</span>, p.Pid)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//通过进程ID查找进程</span></span><br><span class="line">	p2, _ := os.FindProcess(p.Pid)</span><br><span class="line">	fmt.Println(p2)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//等待10秒，执行函数</span></span><br><span class="line">	time.AfterFunc(time.Second*<span class="number">10</span>, <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		<span class="comment">//向p进程发送退出信号</span></span><br><span class="line">		p.Signal(os.Kill)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//等待进程p的退出，返回进程状态</span></span><br><span class="line">	ps, _ := p.Wait()</span><br><span class="line">	fmt.Println(ps.String())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="Golang标准库os包和环境相关的方法"><a href="#Golang标准库os包和环境相关的方法" class="headerlink" title="Golang标准库os包和环境相关的方法"></a>Golang标准库os包和环境相关的方法</h1><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 获得所有环境变量</span></span><br><span class="line">	s := os.Environ()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;s: %v\n&quot;</span>, s)</span><br><span class="line">	<span class="comment">// 获得某个环境变量</span></span><br><span class="line">	s2 := os.Getenv(<span class="string">&quot;GOPATH&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;s2: %v\n&quot;</span>, s2)</span><br><span class="line">	<span class="comment">// 设置环境变量</span></span><br><span class="line">	os.Setenv(<span class="string">&quot;env1&quot;</span>, <span class="string">&quot;env1&quot;</span>)</span><br><span class="line">	s2 = os.Getenv(<span class="string">&quot;aaa&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;s2: %v\n&quot;</span>, s2)</span><br><span class="line">	fmt.Println(<span class="string">&quot;-----------&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 查找</span></span><br><span class="line">	s3, b := os.LookupEnv(<span class="string">&quot;env1&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;b: %v\n&quot;</span>, b)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;s3: %v\n&quot;</span>, s3)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 替换</span></span><br><span class="line">	os.Setenv(<span class="string">&quot;NAME&quot;</span>, <span class="string">&quot;gopher&quot;</span>)</span><br><span class="line">	os.Setenv(<span class="string">&quot;BURROW&quot;</span>, <span class="string">&quot;/usr/gopher&quot;</span>)</span><br><span class="line"></span><br><span class="line">	fmt.Println(os.ExpandEnv(<span class="string">&quot;$NAME lives in $&#123;BURROW&#125;.&quot;</span>))</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 清空环境变量</span></span><br><span class="line">	<span class="comment">// os.Clearenv()</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="Golang标准库io包"><a href="#Golang标准库io包" class="headerlink" title="Golang标准库io包"></a>Golang标准库io包</h1><p>Go 语言中，为了方便开发者使用，将 IO 操作封装在了如下几个包中：</p>
<ul>
<li>io 为 IO 原语（I/O primitives）提供基本的接口 os File Reader Writer</li>
<li>io/ioutil 封装一些实用的 I/O 函数</li>
<li>fmt 实现格式化 I/O，类似 C 语言中的 printf 和 scanf format fmt</li>
<li>bufio 实现带缓冲I/O</li>
</ul>
<h2 id="io-—-基本的-IO-接口"><a href="#io-—-基本的-IO-接口" class="headerlink" title="io — 基本的 IO 接口"></a>io — 基本的 IO 接口</h2><p>在 io 包中最重要的是两个接口：Reader 和 Writer 接口。本章所提到的各种 IO 包，都跟这两个接口有关，也就是说，只要实现了这两个接口，它就有了 IO 的功能</p>
<h3 id="Reader-接口"><a href="#Reader-接口" class="headerlink" title="Reader 接口"></a>Reader 接口</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Reader <span class="keyword">interface</span> &#123;</span><br><span class="line">    Read(p []<span class="keyword">byte</span>) (n <span class="keyword">int</span>, err error)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Writer-接口"><a href="#Writer-接口" class="headerlink" title="Writer 接口"></a>Writer 接口</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Writer <span class="keyword">interface</span> &#123;</span><br><span class="line">    Write(p []<span class="keyword">byte</span>) (n <span class="keyword">int</span>, err error)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="那些类型实现了Reader和Writer接口"><a href="#那些类型实现了Reader和Writer接口" class="headerlink" title="那些类型实现了Reader和Writer接口"></a>那些类型实现了Reader和Writer接口</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">os.File 同时实现了 io.Reader 和 io.Writer</span><br><span class="line">strings.Reader 实现了 io.Reader</span><br><span class="line">bufio.Reader/Writer 分别实现了 io.Reader 和 io.Writer</span><br><span class="line">bytes.Buffer 同时实现了 io.Reader 和 io.Writer</span><br><span class="line">bytes.Reader 实现了 io.Reader</span><br><span class="line">compress/gzip.Reader/Writer 分别实现了 io.Reader 和 io.Writer</span><br><span class="line">crypto/cipher.StreamReader/StreamWriter 分别实现了 io.Reader 和 io.Writer</span><br><span class="line">crypto/tls.Conn 同时实现了 io.Reader 和 io.Writer</span><br><span class="line">encoding/csv.Reader/Writer 分别实现了 io.Reader 和 io.Writer</span><br></pre></td></tr></table></figure>


<h1 id="Golang标准库ioutil包"><a href="#Golang标准库ioutil包" class="headerlink" title="Golang标准库ioutil包"></a>Golang标准库ioutil包</h1><p>封装一些实用的 I/O 函数</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>ReadAll</td>
<td>读取数据，返回读到的字节 slice</td>
</tr>
<tr>
<td>ReadDir</td>
<td>读取一个目录，返回目录入口数组 []os.FileInfo</td>
</tr>
<tr>
<td>ReadFile</td>
<td>读一个文件，返回文件内容（字节slice）</td>
</tr>
<tr>
<td>WriteFile</td>
<td>根据文件路径，写入字节slice</td>
</tr>
<tr>
<td>TempDir</td>
<td>在一个目录中创建指定前缀名的临时目录，返回新临时目录的路径</td>
</tr>
<tr>
<td>TempFile</td>
<td>在一个目录中创建指定前缀名的临时文件，返回 os.File</td>
</tr>
</tbody></table>
<h1 id="Golang标准库fmt包"><a href="#Golang标准库fmt包" class="headerlink" title="Golang标准库fmt包"></a>Golang标准库fmt包</h1><p>fmt包实现了格式化的I/O函数，这点类似Ｃ语言中的printf和scanf，但是更加简单． format</p>
<h3 id="Scanning"><a href="#Scanning" class="headerlink" title="Scanning"></a>Scanning</h3><p>一组类似的函数通过扫描已格式化的文本来产生值。</p>
<ol>
<li>Scan、Scanf 和 Scanln 从os.Stdin 中读取；</li>
<li>Fscan、Fscanf 和 Fscanln 从指定的 io.Reader 中读取；</li>
<li>Sscan、Sscanf 和 Sscanln 从实参字符串中读取。</li>
<li>Scanln、Fscanln 和 Sscanln在换行符处停止扫描，且需要条目紧随换行符之后；</li>
<li>Scanf、Fscanf 和 Sscanf需要输入换行符来匹配格式中的换行符；其它函数则将换行符视为空格。</li>
<li>Scanf、Fscanf 和 Sscanf 根据格式字符串解析实参，类似于 Printf。例如，%x会将一个整数扫描为十六进制数，而 %v 则会扫描该值的默认表现格式。</li>
</ol>
<p><strong>实例</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// scan</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test1</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> age <span class="keyword">int</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;请输入年龄：&quot;</span>)</span><br><span class="line">	fmt.Scan(&amp;age)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;age: %v\n&quot;</span>, age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Scanf</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test2</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> name <span class="keyword">string</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;请输入姓名：&quot;</span>)</span><br><span class="line">	fmt.Scanf(<span class="string">&quot;%s&quot;</span>, &amp;name)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;name: %v\n&quot;</span>, name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Scanln</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test3</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> age <span class="keyword">int</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;请输入年龄：&quot;</span>)</span><br><span class="line">	fmt.Scanln(&amp;age)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;age: %v\n&quot;</span>, age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// test2()</span></span><br><span class="line">	test3()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>其他实例参考官网</p>
</blockquote>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Errorf</span><span class="params">(format <span class="keyword">string</span>, a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="title">error</span></span></span><br></pre></td></tr></table></figure>

<p><code>Errorf</code> 根据于格式说明符进行格式化，并将字符串作为满足 error 的值返回，其返回类型是error．</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Fprint</span><span class="params">(w io.Writer, a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span>　</span><br></pre></td></tr></table></figure>

<p><code>Fprint</code> 使用其操作数的默认格式进行格式化并写入到 w。当两个连续的操作数均不为字符串时，它们之间就会添加空格。它返回写入的字节数以及任何遇到的错误。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Fprintf</span><span class="params">(w io.Writer, format <span class="keyword">string</span>, a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span> //</span></span><br></pre></td></tr></table></figure>

<p><code>Fprintf</code> 根据于格式说明符进行格式化并写入到 w。它返回写入的字节数以及任何遇到的写入错误。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Fprintln</span><span class="params">(w io.Writer, a ...<span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span> </span><br></pre></td></tr></table></figure>

<p><code>Fprintln</code> 使用其操作数的默认格式进行格式化并写入到 w。其操作数之间总是添加空格，且总在最后追加一个换行符。它返回写入的字节数以及任何遇到的错误。</p>
<p><strong>实例</strong></p>
<p>参考官网文档</p>
<h1 id="Golang标准库bufio"><a href="#Golang标准库bufio" class="headerlink" title="Golang标准库bufio"></a>Golang标准库bufio</h1><h3 id="bufio"><a href="#bufio" class="headerlink" title="bufio"></a>bufio</h3><blockquote>
<p>bufio包实现了有缓冲的I/O。它包装一个io.Reader或io.Writer接口对象，创建另一个也实现了该接口，且同时还提供了缓冲和一些文本I/O的帮助函数的对象。</p>
</blockquote>
<h4 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    defaultBufSize = <span class="number">4096</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    ErrInvalidUnreadByte = errors.New(<span class="string">&quot;bufio: invalid use of UnreadByte&quot;</span>)</span><br><span class="line">    ErrInvalidUnreadRune = errors.New(<span class="string">&quot;bufio: invalid use of UnreadRune&quot;</span>)</span><br><span class="line">    ErrBufferFull        = errors.New(<span class="string">&quot;bufio: buffer full&quot;</span>)</span><br><span class="line">    ErrNegativeCount     = errors.New(<span class="string">&quot;bufio: negative count&quot;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    ErrTooLong         = errors.New(<span class="string">&quot;bufio.Scanner: token too long&quot;</span>)</span><br><span class="line">    ErrNegativeAdvance = errors.New(<span class="string">&quot;bufio.Scanner: SplitFunc returns negative advance count&quot;</span>)</span><br><span class="line">    ErrAdvanceTooFar   = errors.New(<span class="string">&quot;bufio.Scanner: SplitFunc returns advance count beyond input&quot;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>会被Scanner类型返回的错误。</p>
</blockquote>
<h4 id="type-Reader"><a href="#type-Reader" class="headerlink" title="type Reader"></a>type Reader</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Reader <span class="keyword">struct</span> &#123;</span><br><span class="line">    buf          []<span class="keyword">byte</span></span><br><span class="line">    rd           io.Reader <span class="comment">// reader provided by the client</span></span><br><span class="line">    r, w         <span class="keyword">int</span>       <span class="comment">// buf read and write positions</span></span><br><span class="line">    err          error</span><br><span class="line">    lastByte     <span class="keyword">int</span> <span class="comment">// last byte read for UnreadByte; -1 means invalid</span></span><br><span class="line">    lastRuneSize <span class="keyword">int</span> <span class="comment">// size of last rune read for UnreadRune; -1 means invalid</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Reader实现了给一个io.Reader接口对象附加缓冲。</p>
</blockquote>
<h4 id="func-NewReader"><a href="#func-NewReader" class="headerlink" title="func NewReader"></a>func NewReader</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewReader</span><span class="params">(rd io.Reader)</span> *<span class="title">Reader</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>NewReader创建一个具有默认大小缓冲、从r读取的*Reader。NewReader 相当于 NewReaderSize(rd, 4096)</p>
</blockquote>
<h4 id="func-NewReaderSize"><a href="#func-NewReaderSize" class="headerlink" title="func NewReaderSize"></a>func NewReaderSize</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewReaderSize</span><span class="params">(rd io.Reader, size <span class="keyword">int</span>)</span> *<span class="title">Reader</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>NewReaderSize创建一个具有最少有size尺寸的缓冲、从r读取的<em>Reader。如果参数r已经是一个具有足够大缓冲的</em> Reader类型值，会返回r。</p>
</blockquote>
<h4 id="func-Reader-Reset-r-io-Reader"><a href="#func-Reader-Reset-r-io-Reader" class="headerlink" title="func (*Reader)Reset(r io.Reader)"></a>func (*Reader)Reset(r io.Reader)</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Reader)</span> <span class="title">Reset</span><span class="params">(r io.Reader)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Reset丢弃缓冲中的数据，清除任何错误，将b重设为其下层从r读取数据。</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s := strings.NewReader(<span class="string">&quot;ABCEFG&quot;</span>)</span><br><span class="line">   str := strings.NewReader(<span class="string">&quot;123455&quot;</span>)</span><br><span class="line">   br := bufio.NewReader(s)</span><br><span class="line">   b, _ := br.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">   fmt.Println(b)  </span><br><span class="line">   br.Reset(str)</span><br><span class="line">   b, _ = br.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">   fmt.Println(b)   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="func-Reader-Read"><a href="#func-Reader-Read" class="headerlink" title="func (*Reader)Read"></a>func (*Reader)Read</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Reader)</span> <span class="title">Read</span><span class="params">(p []<span class="keyword">byte</span>)</span> <span class="params">(n <span class="keyword">int</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Read读取数据写入p。本方法返回写入p的字节数。本方法一次调用最多会调用下层Reader接口一次Read方法，因此返回值n可能小于len(p)。读取到达结尾时，返回值n将为0而err将为io.EOF。</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := strings.NewReader(<span class="string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890&quot;</span>)</span><br><span class="line">	br := bufio.NewReader(s)</span><br><span class="line">	p := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		n, err := br.Read(p)</span><br><span class="line">		<span class="keyword">if</span> err == io.EOF &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;string(p): %v\n&quot;</span>, <span class="keyword">string</span>(p[<span class="number">0</span>:n]))</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="func-Reader-ReadByte"><a href="#func-Reader-ReadByte" class="headerlink" title="func (*Reader)ReadByte"></a>func (*Reader)ReadByte</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Reader)</span> <span class="title">ReadByte</span><span class="params">()</span> <span class="params">(c <span class="keyword">byte</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ReadByte读取并返回一个字节。如果没有可用的数据，会返回错误。</p>
</blockquote>
<h4 id="func-Reader-UnreadByte"><a href="#func-Reader-UnreadByte" class="headerlink" title="func (*Reader)UnreadByte"></a>func (*Reader)UnreadByte</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Reader)</span> <span class="title">UnreadByte</span><span class="params">()</span> <span class="title">error</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>UnreadByte吐出最近一次读取操作读取的最后一个字节。（只能吐出最后一个，多次调用会出问题）</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s := strings.NewReader(<span class="string">&quot;ABCDEFG&quot;</span>)</span><br><span class="line">   br := bufio.NewReader(s)</span><br><span class="line"></span><br><span class="line">   c, _ := br.ReadByte()</span><br><span class="line">   fmt.Printf(<span class="string">&quot;%c\n&quot;</span>, c)</span><br><span class="line"></span><br><span class="line">   c, _ = br.ReadByte()</span><br><span class="line">   fmt.Printf(<span class="string">&quot;%c\n&quot;</span>, c)</span><br><span class="line"></span><br><span class="line">   br.UnreadByte()</span><br><span class="line">   c, _ = br.ReadByte()</span><br><span class="line">   fmt.Printf(<span class="string">&quot;%c\n&quot;</span>, c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="func-Reader-ReadRune"><a href="#func-Reader-ReadRune" class="headerlink" title="func (*Reader)ReadRune"></a>func (*Reader)ReadRune</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Reader)</span> <span class="title">ReadRune</span><span class="params">()</span> <span class="params">(r <span class="keyword">rune</span>, size <span class="keyword">int</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ReadRune读取一个utf-8编码的unicode码值，返回该码值、其编码长度和可能的错误。如果utf-8编码非法，读取位置只移动1字节，返回U+FFFD，返回值size为1而err为nil。如果没有可用的数据，会返回错误。</p>
</blockquote>
<h4 id="func-Reader-UnreadRune"><a href="#func-Reader-UnreadRune" class="headerlink" title="func (*Reader)UnreadRune"></a>func (*Reader)UnreadRune</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Reader)</span> <span class="title">UnreadRune</span><span class="params">()</span> <span class="title">error</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>UnreadRune吐出最近一次ReadRune调用读取的unicode码值。如果最近一次读取不是调用的ReadRune，会返回错误。（从这点看，UnreadRune比UnreadByte严格很多）</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">func <span class="selector-tag">main</span>() &#123;</span><br><span class="line">   s := strings.<span class="built_in">NewReader</span>(<span class="string">&quot;你好，世界！&quot;</span>)</span><br><span class="line">   br := bufio.<span class="built_in">NewReader</span>(s)</span><br><span class="line"></span><br><span class="line">   c, size, _ := br.<span class="built_in">ReadRune</span>()</span><br><span class="line">   fmt.<span class="built_in">Printf</span>(<span class="string">&quot;%c %v\n&quot;</span>, c, size)</span><br><span class="line"></span><br><span class="line">   c, size, _ = br.<span class="built_in">ReadRune</span>()</span><br><span class="line">   fmt.<span class="built_in">Printf</span>(<span class="string">&quot;%c %v\n&quot;</span>, c, size)</span><br><span class="line"></span><br><span class="line">   br.<span class="built_in">UnreadRune</span>()</span><br><span class="line">   c, size, _ = br.<span class="built_in">ReadRune</span>()</span><br><span class="line">   fmt.<span class="built_in">Printf</span>(<span class="string">&quot;%c %v\n&quot;</span>, c, size)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="func-Reader-ReadLine"><a href="#func-Reader-ReadLine" class="headerlink" title="func (*Reader)ReadLine"></a>func (*Reader)ReadLine</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Reader)</span> <span class="title">ReadLine</span><span class="params">()</span> <span class="params">(line []<span class="keyword">byte</span>, isPrefix <span class="keyword">bool</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ReadLine是一个低水平的行数据读取原语。大多数调用者应使用ReadBytes(‘\n’)或ReadString(‘\n’)代替，或者使用Scanner。</p>
<p>ReadLine尝试返回一行数据，不包括行尾标志的字节。如果行太长超过了缓冲，返回值isPrefix会被设为true，并返回行的前面一部分。该行剩下的部分将在之后的调用中返回。返回值isPrefix会在返回该行最后一个片段时才设为false。返回切片是缓冲的子切片，只在下一次读取操作之前有效。ReadLine要么返回一个非nil的line，要么返回一个非nil的err，两个返回值至少一个非nil。</p>
<p>返回的文本不包含行尾的标志字节（”\r\n”或”\n”）。如果输入流结束时没有行尾标志字节，方法不会出错，也不会指出这一情况。在调用ReadLine之后调用UnreadByte会总是吐出最后一个读取的字节（很可能是该行的行尾标志字节），即使该字节不是ReadLine返回值的一部分。</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">func <span class="selector-tag">main</span>() &#123;</span><br><span class="line">   s := strings.<span class="built_in">NewReader</span>(<span class="string">&quot;ABC\nDEF\r\nGHI\r\nGHI&quot;</span>)</span><br><span class="line">   br := bufio.<span class="built_in">NewReader</span>(s)</span><br><span class="line"></span><br><span class="line">   w, isPrefix, _ := br.<span class="built_in">ReadLine</span>()</span><br><span class="line">   fmt.<span class="built_in">Printf</span>(<span class="string">&quot;%q %v\n&quot;</span>, w, isPrefix)</span><br><span class="line"></span><br><span class="line">   w, isPrefix, _ = br.<span class="built_in">ReadLine</span>()</span><br><span class="line">   fmt.<span class="built_in">Printf</span>(<span class="string">&quot;%q %v\n&quot;</span>, w, isPrefix)</span><br><span class="line"></span><br><span class="line">   w, isPrefix, _ = br.<span class="built_in">ReadLine</span>()</span><br><span class="line">   fmt.<span class="built_in">Printf</span>(<span class="string">&quot;%q %v\n&quot;</span>, w, isPrefix)</span><br><span class="line"></span><br><span class="line">   w, isPrefix, _ = br.<span class="built_in">ReadLine</span>()</span><br><span class="line">   fmt.<span class="built_in">Printf</span>(<span class="string">&quot;%q %v\n&quot;</span>, w, isPrefix)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="func-Reader-ReadSlice"><a href="#func-Reader-ReadSlice" class="headerlink" title="func (*Reader)ReadSlice"></a>func (*Reader)ReadSlice</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Reader)</span> <span class="title">ReadSlice</span><span class="params">(delim <span class="keyword">byte</span>)</span> <span class="params">(line []<span class="keyword">byte</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ReadSlice读取直到第一次遇到delim字节，返回缓冲里的包含已读取的数据和delim字节的切片。该返回值只在下一次读取操作之前合法。如果ReadSlice放在在读取到delim之前遇到了错误，它会返回在错误之前读取的数据在缓冲中的切片以及该错误（一般是io.EOF）。如果在读取到delim之前缓冲就被写满了，ReadSlice失败并返回ErrBufferFull。因为ReadSlice的返回值会被下一次I/O操作重写，调用者应尽量使用ReadBytes或ReadString替代本法功法。当且仅当ReadBytes方法返回的切片不以delim结尾时，会返回一个非nil的错误。</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">func <span class="selector-tag">main</span>() &#123;</span><br><span class="line">   s := strings.<span class="built_in">NewReader</span>(<span class="string">&quot;ABC,DEF,GHI,JKL&quot;</span>)</span><br><span class="line">   br := bufio.<span class="built_in">NewReader</span>(s)</span><br><span class="line"></span><br><span class="line">   w, _ := br.<span class="built_in">ReadSlice</span>(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">   fmt.<span class="built_in">Printf</span>(<span class="string">&quot;%q\n&quot;</span>, w)</span><br><span class="line"></span><br><span class="line">   w, _ = br.<span class="built_in">ReadSlice</span>(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">   fmt.<span class="built_in">Printf</span>(<span class="string">&quot;%q\n&quot;</span>, w)</span><br><span class="line"></span><br><span class="line">   w, _ = br.<span class="built_in">ReadSlice</span>(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">   fmt.<span class="built_in">Printf</span>(<span class="string">&quot;%q\n&quot;</span>, w)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="func-Reader-ReadBytes"><a href="#func-Reader-ReadBytes" class="headerlink" title="func (*Reader)ReadBytes"></a>func (*Reader)ReadBytes</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Reader)</span> <span class="title">ReadBytes</span><span class="params">(delim <span class="keyword">byte</span>)</span> <span class="params">(line []<span class="keyword">byte</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ReadBytes读取直到第一次遇到delim字节，返回一个包含已读取的数据和delim字节的切片。如果ReadBytes方法在读取到delim之前遇到了错误，它会返回在错误之前读取的数据以及该错误（一般是io.EOF）。当且仅当ReadBytes方法返回的切片不以delim结尾时，会返回一个非nil的错误。</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s := strings.NewReader(<span class="string">&quot;ABC DEF GHI JKL&quot;</span>)</span><br><span class="line">   br := bufio.NewReader(s)</span><br><span class="line"></span><br><span class="line">   w, _ := br.ReadBytes(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">   fmt.Printf(<span class="string">&quot;%q\n&quot;</span>, w)</span><br><span class="line"></span><br><span class="line">   w, _ = br.ReadBytes(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">   fmt.Printf(<span class="string">&quot;%q\n&quot;</span>, w)</span><br><span class="line"></span><br><span class="line">   w, _ = br.ReadBytes(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">   fmt.Printf(<span class="string">&quot;%q\n&quot;</span>, w)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="func-Reader-ReadString"><a href="#func-Reader-ReadString" class="headerlink" title="func (*Reader)ReadString"></a>func (*Reader)ReadString</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Reader)</span> <span class="title">ReadString</span><span class="params">(delim <span class="keyword">byte</span>)</span> <span class="params">(line <span class="keyword">string</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ReadString读取直到第一次遇到delim字节，返回一个包含已读取的数据和delim字节的字符串。如果ReadString方法在读取到delim之前遇到了错误，它会返回在错误之前读取的数据以及该错误（一般是io.EOF）。当且仅当ReadString方法返回的切片不以delim结尾时，会返回一个非nil的错误。</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s := strings.NewReader(<span class="string">&quot;ABC DEF GHI JKL&quot;</span>)</span><br><span class="line">   br := bufio.NewReader(s)</span><br><span class="line"></span><br><span class="line">   w, _ := br.ReadString(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">   fmt.Printf(<span class="string">&quot;%q\n&quot;</span>, w)</span><br><span class="line"></span><br><span class="line">   w, _ = br.ReadString(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">   fmt.Printf(<span class="string">&quot;%q\n&quot;</span>, w)</span><br><span class="line"></span><br><span class="line">   w, _ = br.ReadString(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">   fmt.Printf(<span class="string">&quot;%q\n&quot;</span>, w)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="func-Reader-WriteTo"><a href="#func-Reader-WriteTo" class="headerlink" title="func (*Reader)WriteTo"></a>func (*Reader)WriteTo</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Reader)</span> <span class="title">WriteTo</span><span class="params">(w io.Writer)</span> <span class="params">(n <span class="keyword">int64</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>WriteTo方法实现了io.WriterTo接口。</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s := strings.NewReader(<span class="string">&quot;ABCEFGHIJKLMN&quot;</span>)</span><br><span class="line">   br := bufio.NewReader(s)</span><br><span class="line">   b := bytes.NewBuffer(<span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">   br.WriteTo(b)</span><br><span class="line">   fmt.Printf(<span class="string">&quot;%s\n&quot;</span>, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="type-Writer"><a href="#type-Writer" class="headerlink" title="type Writer"></a>type Writer</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Writer <span class="keyword">struct</span> &#123;</span><br><span class="line">    err error</span><br><span class="line">    buf []<span class="keyword">byte</span></span><br><span class="line">    n   <span class="keyword">int</span></span><br><span class="line">    wr  io.Writer</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Writer实现了为io.Writer接口对象提供缓冲。如果在向一个Writer类型值写入时遇到了错误，该对象将不再接受任何数据，且所有写操作都会返回该错误。在说有数据都写入后，调用者有义务调用Flush方法以保证所有的数据都交给了下层的io.Writer。</p>
</blockquote>
<h4 id="func-NewWriter"><a href="#func-NewWriter" class="headerlink" title="func NewWriter"></a>func NewWriter</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewWriter</span><span class="params">(w io.Writer)</span> *<span class="title">Writer</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>NewWriter创建一个具有默认大小缓冲、写入w的*Writer。NewWriter 相当于 NewWriterSize(wr, 4096)</p>
</blockquote>
<h4 id="func-NewWriterSize"><a href="#func-NewWriterSize" class="headerlink" title="func NewWriterSize"></a>func NewWriterSize</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewWriterSize</span><span class="params">(w io.Writer, size <span class="keyword">int</span>)</span> *<span class="title">Writer</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>NewWriterSize创建一个具有最少有size尺寸的缓冲、写入w的<em>Writer。如果参数w已经是一个具有足够大缓冲的</em> Writer类型值，会返回w。</p>
</blockquote>
<h4 id="func-Writer-Reset"><a href="#func-Writer-Reset" class="headerlink" title="func (*Writer)Reset"></a>func (*Writer)Reset</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Writer)</span> <span class="title">Reset</span><span class="params">(w io.Writer)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Reset丢弃缓冲中的数据，清除任何错误，将b重设为将其输出写入w。</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   b := bytes.NewBuffer(<span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">0</span>))</span><br><span class="line">   bw := bufio.NewWriter(b)</span><br><span class="line">   bw.WriteString(<span class="string">&quot;123456789&quot;</span>)</span><br><span class="line">   c := bytes.NewBuffer(<span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">0</span>))</span><br><span class="line">   bw.Reset(c)</span><br><span class="line">   bw.WriteString(<span class="string">&quot;456&quot;</span>)</span><br><span class="line">   bw.Flush()</span><br><span class="line">   fmt.Println(b)     </span><br><span class="line">   fmt.Println(c) </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="func-Writer-Bufferd"><a href="#func-Writer-Bufferd" class="headerlink" title="func (*Writer)Bufferd"></a>func (*Writer)Bufferd</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Writer)</span> <span class="title">Buffered</span><span class="params">()</span> <span class="title">int</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Buffered返回缓冲中已使用的字节数。</p>
</blockquote>
<h4 id="func-Writer-Available"><a href="#func-Writer-Available" class="headerlink" title="func (*Writer)Available"></a>func (*Writer)Available</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Writer)</span> <span class="title">Available</span><span class="params">()</span> <span class="title">int</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Available返回缓冲中还有多少字节未使用。</p>
</blockquote>
<h4 id="func-Writer-Write"><a href="#func-Writer-Write" class="headerlink" title="func (*Writer) Write"></a>func (*Writer) Write</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Writer)</span> <span class="title">Write</span><span class="params">(p []<span class="keyword">byte</span>)</span> <span class="params">(nn <span class="keyword">int</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Write将p的内容写入缓冲。返回写入的字节数。如果返回值nn &lt; len(p)，还会返回一个错误说明原因。</p>
</blockquote>
<h4 id="func-Writer-WriteString"><a href="#func-Writer-WriteString" class="headerlink" title="func (*Writer) WriteString"></a>func (*Writer) WriteString</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Writer)</span> <span class="title">WriteString</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="params">(<span class="keyword">int</span>, error)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>WriteString写入一个字符串。返回写入的字节数。如果返回值nn &lt; len(s)，还会返回一个错误说明原因。</p>
</blockquote>
<h4 id="func-Writer-WriteByte"><a href="#func-Writer-WriteByte" class="headerlink" title="func (*Writer) WriteByte"></a>func (*Writer) WriteByte</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Writer)</span> <span class="title">WriteByte</span><span class="params">(c <span class="keyword">byte</span>)</span> <span class="title">error</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>WriteByte写入单个字节。</p>
</blockquote>
<h4 id="func-Writer-WriteRune"><a href="#func-Writer-WriteRune" class="headerlink" title="func (*Writer) WriteRune"></a>func (*Writer) WriteRune</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Writer)</span> <span class="title">WriteRune</span><span class="params">(r <span class="keyword">rune</span>)</span> <span class="params">(size <span class="keyword">int</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>WriteRune写入一个unicode码值（的utf-8编码），返回写入的字节数和可能的错误。</p>
</blockquote>
<h4 id="func-Writer-Flush"><a href="#func-Writer-Flush" class="headerlink" title="func (*Writer) Flush"></a>func (*Writer) Flush</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Writer)</span> <span class="title">Flush</span><span class="params">()</span> <span class="title">error</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Flush方法将缓冲中的数据写入下层的io.Writer接口。</p>
</blockquote>
<h4 id="func-Writer-ReadFrom"><a href="#func-Writer-ReadFrom" class="headerlink" title="func (*Writer) ReadFrom"></a>func (*Writer) ReadFrom</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Writer)</span> <span class="title">ReadFrom</span><span class="params">(r io.Reader)</span> <span class="params">(n <span class="keyword">int64</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ReadFrom实现了io.ReaderFrom接口。</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   b := bytes.NewBuffer(<span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">0</span>))</span><br><span class="line">   bw := bufio.NewWriter(b)</span><br><span class="line">   fmt.Println(bw.Available()) <span class="comment">// 4096</span></span><br><span class="line">   fmt.Println(bw.Buffered())  <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line">   bw.WriteString(<span class="string">&quot;ABCDEFGHIJKLMN&quot;</span>)</span><br><span class="line">   fmt.Println(bw.Available()) </span><br><span class="line">   fmt.Println(bw.Buffered())  </span><br><span class="line">   fmt.Printf(<span class="string">&quot;%q\n&quot;</span>, b)    </span><br><span class="line"></span><br><span class="line">   bw.Flush()</span><br><span class="line">   fmt.Println(bw.Available())</span><br><span class="line">   fmt.Println(bw.Buffered())  </span><br><span class="line">   fmt.Printf(<span class="string">&quot;%q\n&quot;</span>, b)   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   b := bytes.NewBuffer(<span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">0</span>))</span><br><span class="line">   bw := bufio.NewWriter(b)</span><br><span class="line">   <span class="comment">// 写入缓存</span></span><br><span class="line">   <span class="comment">// byte等同于 int8</span></span><br><span class="line">   bw.WriteByte(<span class="string">&#x27;H&#x27;</span>)</span><br><span class="line">   bw.WriteByte(<span class="string">&#x27;e&#x27;</span>)</span><br><span class="line">   bw.WriteByte(<span class="string">&#x27;l&#x27;</span>)</span><br><span class="line">   bw.WriteByte(<span class="string">&#x27;l&#x27;</span>)</span><br><span class="line">   bw.WriteByte(<span class="string">&#x27;o&#x27;</span>)</span><br><span class="line">   bw.WriteByte(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">   <span class="comment">// rune等同于int32</span></span><br><span class="line">   bw.WriteRune(<span class="string">&#x27;世&#x27;</span>)</span><br><span class="line">   bw.WriteRune(<span class="string">&#x27;界&#x27;</span>)</span><br><span class="line">   bw.WriteRune(<span class="string">&#x27;！&#x27;</span>)</span><br><span class="line">   <span class="comment">// 写入b</span></span><br><span class="line">   bw.Flush()</span><br><span class="line">   fmt.Println(b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   b := bytes.NewBuffer(<span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">0</span>))</span><br><span class="line">   s := strings.NewReader(<span class="string">&quot;Hello 世界！&quot;</span>)</span><br><span class="line">   bw := bufio.NewWriter(b)</span><br><span class="line">   bw.ReadFrom(s)</span><br><span class="line">   <span class="comment">//bw.Flush()            //ReadFrom无需使用Flush，其自己已经写入．</span></span><br><span class="line">   fmt.Println(b) <span class="comment">// Hello 世界！</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="type-ReadWriter"><a href="#type-ReadWriter" class="headerlink" title="type ReadWriter"></a>type ReadWriter</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">type</span> <span class="title">ReadWriter</span></span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    *Reader</span><br><span class="line">    *Writer</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ReadWriter类型保管了指向Reader和Writer类型的指针，（因此）实现了io.ReadWriter接口。</p>
</blockquote>
<h4 id="func-NewReadWriter"><a href="#func-NewReadWriter" class="headerlink" title="func NewReadWriter"></a>func NewReadWriter</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewReadWriter</span><span class="params">(r *Reader, w *Writer)</span> *<span class="title">ReadWriter</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>NewReadWriter申请创建一个新的、将读写操作分派给r和w 的ReadWriter。</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   b := bytes.NewBuffer(<span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">0</span>))</span><br><span class="line">   bw := bufio.NewWriter(b)</span><br><span class="line">   s := strings.NewReader(<span class="string">&quot;123&quot;</span>)</span><br><span class="line">   br := bufio.NewReader(s)</span><br><span class="line">   rw := bufio.NewReadWriter(br, bw)</span><br><span class="line">   p, _ := rw.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">   fmt.Println(<span class="keyword">string</span>(p))              <span class="comment">//123</span></span><br><span class="line">   rw.WriteString(<span class="string">&quot;asdf&quot;</span>)</span><br><span class="line">   rw.Flush()</span><br><span class="line">   fmt.Println(b)                          <span class="comment">//asdf</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="type-SplitFunc"><a href="#type-SplitFunc" class="headerlink" title="type SplitFunc"></a>type SplitFunc</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> SplitFunc <span class="function"><span class="keyword">func</span><span class="params">(data []<span class="keyword">byte</span>, atEOF <span class="keyword">bool</span>)</span> <span class="params">(advance <span class="keyword">int</span>, token []<span class="keyword">byte</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>SplitFunc类型代表用于对输出作词法分析的分割函数。</p>
<p>参数data是尚未处理的数据的一个开始部分的切片，参数atEOF表示是否Reader接口不能提供更多的数据。返回值是解析位置前进的字节数，将要返回给调用者的token切片，以及可能遇到的错误。如果数据不足以（保证）生成一个完整的token，例如需要一整行数据但data里没有换行符，SplitFunc可以返回(0, nil, nil)来告诉Scanner读取更多的数据写入切片然后用从同一位置起始、长度更长的切片再试一次（调用SplitFunc类型函数）。</p>
<p>如果返回值err非nil，扫描将终止并将该错误返回给Scanner的调用者。</p>
<p>除非atEOF为真，永远不会使用空切片data调用SplitFunc类型函数。然而，如果atEOF为真，data却可能是非空的、且包含着未处理的文本。</p>
<p>SplitFunc 的作用很简单，从 data 中找出你感兴趣的数据，然后返回并告诉调用者，data 中有多少数据你已经处理过了</p>
</blockquote>
<h3 id="func-ScanBytes"><a href="#func-ScanBytes" class="headerlink" title="func ScanBytes"></a>func ScanBytes</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ScanBytes</span><span class="params">(data []<span class="keyword">byte</span>, atEOF <span class="keyword">bool</span>)</span> <span class="params">(advance <span class="keyword">int</span>, token []<span class="keyword">byte</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ScanBytes是用于Scanner类型的分割函数（符合SplitFunc），本函数会将每个字节作为一个token返回。</p>
</blockquote>
<h3 id="func-ScanRunes"><a href="#func-ScanRunes" class="headerlink" title="func ScanRunes"></a>func ScanRunes</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ScanRunes</span><span class="params">(data []<span class="keyword">byte</span>, atEOF <span class="keyword">bool</span>)</span> <span class="params">(advance <span class="keyword">int</span>, token []<span class="keyword">byte</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ScanRunes是用于Scanner类型的分割函数（符合SplitFunc），本函数会将每个utf-8编码的unicode码值作为一个token返回。本函数返回的rune序列和range一个字符串的输出rune序列相同。错误的utf-8编码会翻译为U+FFFD = “\xef\xbf\xbd”，但只会消耗一个字节。调用者无法区分正确编码的rune和错误编码的rune。</p>
</blockquote>
<h3 id="func-ScanWords"><a href="#func-ScanWords" class="headerlink" title="func ScanWords"></a>func ScanWords</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ScanWords</span><span class="params">(data []<span class="keyword">byte</span>, atEOF <span class="keyword">bool</span>)</span> <span class="params">(advance <span class="keyword">int</span>, token []<span class="keyword">byte</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ScanRunes是用于Scanner类型的分割函数（符合SplitFunc），本函数会将空白（参见unicode.IsSpace）分隔的片段（去掉前后空白后）作为一个token返回。本函数永远不会返回空字符串。用来找出 data 中的单行数据并返回（包括空行）</p>
</blockquote>
<h3 id="func-ScanLines"><a href="#func-ScanLines" class="headerlink" title="func ScanLines"></a>func ScanLines</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ScanLines</span><span class="params">(data []<span class="keyword">byte</span>, atEOF <span class="keyword">bool</span>)</span> <span class="params">(advance <span class="keyword">int</span>, token []<span class="keyword">byte</span>, err error)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ScanLines是用于Scanner类型的分割函数（符合SplitFunc），本函数会将每一行文本去掉末尾的换行标记作为一个token返回。返回的行可以是空字符串。换行标记为一个可选的回车后跟一个必选的换行符。最后一行即使没有换行符也会作为一个token返回。</p>
</blockquote>
<h3 id="type-Scanner"><a href="#type-Scanner" class="headerlink" title="type Scanner"></a>type Scanner</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Scanner <span class="keyword">struct</span> &#123;</span><br><span class="line">    r            io.Reader <span class="comment">// The reader provided by the client.</span></span><br><span class="line">    split        SplitFunc <span class="comment">// The function to split the tokens.</span></span><br><span class="line">    maxTokenSize <span class="keyword">int</span>       <span class="comment">// Maximum size of a token; modified by tests.</span></span><br><span class="line">    token        []<span class="keyword">byte</span>    <span class="comment">// Last token returned by split.</span></span><br><span class="line">    buf          []<span class="keyword">byte</span>    <span class="comment">// Buffer used as argument to split.</span></span><br><span class="line">    start        <span class="keyword">int</span>       <span class="comment">// First non-processed byte in buf.</span></span><br><span class="line">    end          <span class="keyword">int</span>       <span class="comment">// End of data in buf.</span></span><br><span class="line">    err          error     <span class="comment">// Sticky error.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Scanner类型提供了方便的读取数据的接口，如从换行符分隔的文本里读取每一行。成功调用的Scan方法会逐步提供文件的token，跳过token之间的字节。token由SplitFunc类型的分割函数指定；默认的分割函数会将输入分割为多个行，并去掉行尾的换行标志。本包预定义的分割函数可以将文件分割为行、字节、unicode码值、空白分隔的word。调用者可以定制自己的分割函数。扫描会在抵达输入流结尾、遇到的第一个I/O错误、token过大不能保存进缓冲时，不可恢复的停止。当扫描停止后，当前读取位置可能会远在最后一个获得的token后面。需要更多对错误管理的控制或token很大，或必须从reader连续扫描的程序，应使用bufio.Reader代替。</p>
</blockquote>
<h4 id="func-NewScanner"><a href="#func-NewScanner" class="headerlink" title="func NewScanner"></a>func NewScanner</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewScanner</span><span class="params">(r io.Reader)</span> *<span class="title">Scanner</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>NewScanner创建并返回一个从r读取数据的Scanner，默认的分割函数是ScanLines。</p>
</blockquote>
<h4 id="func-Scanner-Split"><a href="#func-Scanner-Split" class="headerlink" title="func (*Scanner) Split"></a>func (*Scanner) Split</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Scanner)</span> <span class="title">Split</span><span class="params">(split SplitFunc)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Split设置该Scanner的分割函数。本方法必须在Scan之前调用。</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s := strings.NewReader(<span class="string">&quot;ABC DEF GHI JKL&quot;</span>)</span><br><span class="line">   bs := bufio.NewScanner(s)</span><br><span class="line">   bs.Split(bufio.ScanWords)</span><br><span class="line">   <span class="keyword">for</span> bs.Scan() &#123;</span><br><span class="line">      fmt.Println(bs.Text())</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="func-Scanner-Scan"><a href="#func-Scanner-Scan" class="headerlink" title="func (*Scanner) Scan"></a>func (*Scanner) Scan</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Scanner)</span> <span class="title">Scan</span><span class="params">()</span> <span class="title">bool</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Scan方法获取当前位置的token（该token可以通过Bytes或Text方法获得），并让Scanner的扫描位置移动到下一个token。当扫描因为抵达输入流结尾或者遇到错误而停止时，本方法会返回false。在Scan方法返回false后，Err方法将返回扫描时遇到的任何错误；除非是io.EOF，此时Err会返回nil。</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    s := strings.NewReader(<span class="string">&quot;Hello 世界！&quot;</span>)</span><br><span class="line">    bs := bufio.NewScanner(s)</span><br><span class="line">    bs.Split(bufio.ScanBytes)</span><br><span class="line">    <span class="keyword">for</span> bs.Scan() &#123;</span><br><span class="line">        fmt.Printf(<span class="string">&quot;%s &quot;</span>, bs.Text())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="func-Scanner-Bytes"><a href="#func-Scanner-Bytes" class="headerlink" title="func (*Scanner) Bytes"></a>func (*Scanner) Bytes</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Scanner)</span> <span class="title">Bytes</span><span class="params">()</span> []<span class="title">byte</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Bytes方法返回最近一次Scan调用生成的token。底层数组指向的数据可能会被下一次Scan的调用重写。</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   s := strings.NewReader(<span class="string">&quot;Hello 世界！&quot;</span>)</span><br><span class="line">   bs := bufio.NewScanner(s)</span><br><span class="line">   bs.Split(bufio.ScanRunes)</span><br><span class="line">   <span class="keyword">for</span> bs.Scan() &#123;</span><br><span class="line">      fmt.Printf(<span class="string">&quot;%s &quot;</span>, bs.Text())</span><br><span class="line">   &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="func-Scanner-Text"><a href="#func-Scanner-Text" class="headerlink" title="func (*Scanner) Text"></a>func (*Scanner) Text</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Scanner)</span> <span class="title">Text</span><span class="params">()</span> <span class="title">string</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Bytes方法返回最近一次Scan调用生成的token，会申请创建一个字符串保存token并返回该字符串。</p>
</blockquote>
<h4 id="func-Scanner-Err"><a href="#func-Scanner-Err" class="headerlink" title="func (*Scanner) Err"></a>func (*Scanner) Err</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *Scanner)</span> <span class="title">Err</span><span class="params">()</span> <span class="title">error</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Err返回Scanner遇到的第一个非EOF的错误。</p>
</blockquote>
<h1 id="Golang标准库log"><a href="#Golang标准库log" class="headerlink" title="Golang标准库log"></a>Golang标准库log</h1><h2 id="log简介"><a href="#log简介" class="headerlink" title="log简介"></a>log简介</h2><p>Golang内置了 <code>log</code>包，实现简单的日志服务。通过调用 <code>log</code>包的函数，可以实现简单的日志打印功能。</p>
<h2 id="log使用"><a href="#log使用" class="headerlink" title="log使用"></a>log使用</h2><p><code>log</code>包中有3个系列的日志打印函数，分别 <code>print</code>系列、<code>panic</code>系列、<code>fatal</code>系列。</p>
<table>
<thead>
<tr>
<th align="left">函数系列</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">print</td>
<td align="left">单纯打印日志</td>
</tr>
<tr>
<td align="left">panic</td>
<td align="left">打印日志，抛出panic异常</td>
</tr>
<tr>
<td align="left">fatal</td>
<td align="left">打印日志，强制结束程序(os.Exit(1))，<code>defer</code>函数不会执行</td>
</tr>
</tbody></table>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;发生了 panic错误！&quot;</span>)</span><br><span class="line">	log.Print(<span class="string">&quot;my log&quot;</span>)</span><br><span class="line">	log.Printf(<span class="string">&quot;my log %d&quot;</span>, <span class="number">100</span>)</span><br><span class="line">	name := <span class="string">&quot;tom&quot;</span></span><br><span class="line">	age := <span class="number">20</span></span><br><span class="line">	log.Println(name, <span class="string">&quot;,&quot;</span>, age)</span><br><span class="line">	log.Panic(<span class="string">&quot;致命错误！&quot;</span>)</span><br><span class="line">	<span class="comment">// log.Fatal(&quot;致命错误！&quot;)</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;end...&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果示例（实际结果不是这样的哦，因为panic,fatal会影响程序的执行）：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2021</span>/<span class="number">11</span>/<span class="number">29</span> <span class="number">16</span>:<span class="number">45</span>:<span class="number">59</span> my log</span><br><span class="line"><span class="number">2021</span>/<span class="number">11</span>/<span class="number">29</span> <span class="number">16</span>:<span class="number">45</span>:<span class="number">59</span> my log <span class="number">100</span></span><br><span class="line"><span class="number">2021</span>/<span class="number">11</span>/<span class="number">29</span> <span class="number">16</span>:<span class="number">45</span>:<span class="number">59</span> tom , <span class="number">20</span></span><br><span class="line"><span class="number">2021</span>/<span class="number">11</span>/<span class="number">29</span> <span class="number">16</span>:<span class="number">45</span>:<span class="number">59</span> 致命错误！</span><br><span class="line">发生了 <span class="built_in">panic</span>错误！</span><br><span class="line"><span class="built_in">panic</span>: 致命错误！</span><br><span class="line"></span><br><span class="line">goroutine <span class="number">1</span> [running]:</span><br><span class="line">log.Panic(&#123;<span class="number">0xc000107f00</span>, <span class="number">0x3</span>, <span class="number">0xc000107f00</span>&#125;)</span><br><span class="line">	C:/Program Files/Go/src/log/log.<span class="keyword">go</span>:<span class="number">354</span> +<span class="number">0x65</span></span><br><span class="line">main.main()</span><br><span class="line">	c:/Users/<span class="number">52406</span>/Desktop/golangprojects/xiaobaibk.com/pro01/demo.<span class="keyword">go</span>:<span class="number">15</span> +<span class="number">0x19e</span></span><br><span class="line">exit status <span class="number">2</span></span><br></pre></td></tr></table></figure>

<h1 id="log配置"><a href="#log配置" class="headerlink" title="log配置"></a>log配置</h1><h3 id="标准log配置"><a href="#标准log配置" class="headerlink" title="标准log配置"></a>标准log配置</h3><p>默认情况下log只会打印出时间，但是实际情况下我们可能还需要获取文件名，行号等信息，<code>log</code>包提供给我们定制的接口。 <code>log</code>包提供两个标准log配置的相关方法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">func Flags() int  // 返回标准log输出配置</span><br><span class="line">func SetFlags(flag int)  // 设置标准log输出配置</span><br></pre></td></tr></table></figure>

<h4 id="flag参数"><a href="#flag参数" class="headerlink" title="flag参数"></a>flag参数</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const (</span><br><span class="line">    // 控制输出日志信息的细节，不能控制输出的顺序和格式。</span><br><span class="line">    // 输出的日志在每一项后会有一个冒号分隔：例如2009/01/23 01:23:23.123123 /a/b/c/d.go:23: message</span><br><span class="line">    Ldate         = 1 &lt;&lt; iota     // 日期：2009/01/23</span><br><span class="line">    Ltime                         // 时间：01:23:23</span><br><span class="line">    Lmicroseconds                 // 微秒级别的时间：01:23:23.123123（用于增强Ltime位）</span><br><span class="line">    Llongfile                     // 文件全路径名+行号： /a/b/c/d.go:23</span><br><span class="line">    Lshortfile                    // 文件名+行号：d.go:23（会覆盖掉Llongfile）</span><br><span class="line">    LUTC                          // 使用UTC时间</span><br><span class="line">    LstdFlags     = Ldate | Ltime // 标准logger的初始值</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="标准日志配置示例"><a href="#标准日志配置示例" class="headerlink" title="标准日志配置示例"></a>标准日志配置示例</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	i := log.Flags()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;i: %v\n&quot;</span>, i)</span><br><span class="line">	log.SetFlags(log.Ldate | log.Ltime | log.Llongfile)</span><br><span class="line">	log.Print(<span class="string">&quot;my log&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出结果：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">i: 3</span><br><span class="line">2021/11/29 16:49:53 c:/Users/52406/Desktop/golangprojects/xiaobaibk.com/pro01/demo.go:12: my log</span><br></pre></td></tr></table></figure>

<h3 id="日志前缀配置"><a href="#日志前缀配置" class="headerlink" title="日志前缀配置"></a>日志前缀配置</h3><p><code>log</code>包提供两个日志前缀配置的相关函数：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Prefix</span><span class="params">()</span> <span class="title">string</span>  // 返回日志的前缀配置</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">SetPrefix</span><span class="params">(prefix <span class="keyword">string</span>)</span>  // 设置日志前缀</span></span><br></pre></td></tr></table></figure>

<h4 id="日志前缀配置实例"><a href="#日志前缀配置实例" class="headerlink" title="日志前缀配置实例"></a>日志前缀配置实例</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s := log.Prefix()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;s: %v\n&quot;</span>, s)</span><br><span class="line">	log.SetPrefix(<span class="string">&quot;MyLog: &quot;</span>)</span><br><span class="line">	s = log.Prefix()</span><br><span class="line">	fmt.Printf(<span class="string">&quot;s: %v\n&quot;</span>, s)</span><br><span class="line">	log.Print(<span class="string">&quot;my log...&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>输出结果：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s: </span><br><span class="line">s: MyLog: </span><br><span class="line">MyLog: 2021/11/29 16:51:55 my log...</span><br></pre></td></tr></table></figure>

<h3 id="日志输出位置配置"><a href="#日志输出位置配置" class="headerlink" title="日志输出位置配置"></a>日志输出位置配置</h3><p>前面介绍的都是将日志输出到控制台上，golang的 <code>log</code>包还支持将日志输出到文件中。<code>log</code>包提供了 <code>func SetOutput(w io.Writer)</code>函数，将日志输出到文件中。</p>
<h4 id="日志输出位置配置-1"><a href="#日志输出位置配置-1" class="headerlink" title="日志输出位置配置"></a>日志输出位置配置</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	f, err := os.OpenFile(<span class="string">&quot;a.log&quot;</span>, os.O_CREATE|os.O_WRONLY|os.O_APPEND, <span class="number">0644</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Panic(<span class="string">&quot;打开日志文件异常&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	log.SetOutput(f)</span><br><span class="line">	log.Print(<span class="string">&quot;my log...&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>结果：</strong>日志输出到当前目录下a.log文件中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2021/11/29 16:57:13 my log...</span><br></pre></td></tr></table></figure>

<h3 id="自定义logger"><a href="#自定义logger" class="headerlink" title="自定义logger"></a>自定义logger</h3><p><code>log</code>包为我们提供了内置函数，让我们能自定义logger。从效果上来看，就是将标题3中的标准日志配置、日志前缀配置、日志输出位置配置整合到一个函数中，使日志配置不在那么繁琐。 <code>log</code>包中提供了 <code>func New(out io.Writer, prefix string, flag int) *Logger</code>函数来实现自定义logger。</p>
<h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> logger *log.Logger</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span>  &#123;</span><br><span class="line">    logFile, err := os.OpenFile(<span class="string">&quot;a.log&quot;</span>, os.O_CREATE|os.O_WRONLY|os.O_APPEND, <span class="number">0644</span>)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Panic(<span class="string">&quot;打开日志文件异常&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    logger = log.New(logFile, <span class="string">&quot;success&quot;</span>, log.Ldate | log.Ltime | log.Lshortfile)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    logger.Println(<span class="string">&quot;自定义logger&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="Golang标准库builtin"><a href="#Golang标准库builtin" class="headerlink" title="Golang标准库builtin"></a>Golang标准库builtin</h1><p>这个包提供了一些类型声明、变量和常量声明，还有一些便利函数，这个包不需要导入，这些变量和函数就可以直接使用。</p>
<h2 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h2><h3 id="append"><a href="#append" class="headerlink" title="append"></a>append</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">append</span><span class="params">(slice []Type, elems ...Type)</span> []<span class="title">Type</span></span></span><br><span class="line"></span><br><span class="line">slice = <span class="built_in">append</span>(slice, elem1, elem2)　　<span class="comment">//直接在slice后面添加单个元素，添加元素类型可以和slice相同，也可以不同</span></span><br><span class="line">slice = <span class="built_in">append</span>(slice, anotherSlice...)　　<span class="comment">//直接将另外一个slice添加到slice后面，但其本质还是将anotherSlice中的元素一个一个添加到slice中，和第一种方式类似．</span></span><br></pre></td></tr></table></figure>

<h3 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	s1 := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">	i := <span class="built_in">append</span>(s1, <span class="number">4</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;i: %v\n&quot;</span>, i)</span><br><span class="line"></span><br><span class="line">	s2 := []<span class="keyword">int</span>&#123;<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>&#125;</span><br><span class="line">	i2 := <span class="built_in">append</span>(s1, s2...)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;i2: %v\n&quot;</span>, i2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="len"><a href="#len" class="headerlink" title="len"></a>len</h2><p>返回，数组、切片、字符串、通道的长度</p>
<h3 id="实例-2"><a href="#实例-2" class="headerlink" title="实例"></a>实例</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	s1 := <span class="string">&quot;hello world&quot;</span></span><br><span class="line">	i := <span class="built_in">len</span>(s1)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;i: %v\n&quot;</span>, i)</span><br><span class="line"></span><br><span class="line">	s2 := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">	fmt.Printf(<span class="string">&quot;len(s2): %v\n&quot;</span>, <span class="built_in">len</span>(s2))</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="print、println"><a href="#print、println" class="headerlink" title="print、println"></a>print、println</h2><p>打印输出到控制台。</p>
<h3 id="实例-3"><a href="#实例-3" class="headerlink" title="实例"></a>实例</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	name := <span class="string">&quot;tom&quot;</span></span><br><span class="line">	age := <span class="number">20</span></span><br><span class="line">	<span class="built_in">print</span>(name, <span class="string">&quot; &quot;</span>, age, <span class="string">&quot;\n&quot;</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;----------&quot;</span>)</span><br><span class="line">	<span class="built_in">println</span>(name, <span class="string">&quot; &quot;</span>, age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="panic"><a href="#panic" class="headerlink" title="panic"></a>panic</h3><p>抛出一个panic异常</p>
<h3 id="实例-4"><a href="#实例-4" class="headerlink" title="实例"></a>实例</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">defer</span> fmt.Println(<span class="string">&quot;panic 异常后执行...&quot;</span>)</span><br><span class="line">	<span class="built_in">panic</span>(<span class="string">&quot;panic 错误...&quot;</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;end...&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="new和make"><a href="#new和make" class="headerlink" title="new和make"></a>new和make</h3><p><code>new</code>和 <code>make</code>区别：</p>
<ol>
<li><code>make</code>只能用来分配及<strong>初始化</strong> 类型为<code>slice</code>，<code>map</code>，<code>chan</code>的数据；<code>new</code>可以分配任意类型的数据</li>
<li><code>new</code>分配返回的是指针，即类型<code>*T</code>；<code>make</code>返回引用，即<code>T</code>；</li>
<li><code>new</code>分配的空间被清零，<code>make</code>分配后，会进行<strong>初始化</strong> 。</li>
</ol>
<h3 id="实例-5"><a href="#实例-5" class="headerlink" title="实例"></a>实例</h3><p><strong>new</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testNew</span><span class="params">()</span></span> &#123;</span><br><span class="line">	b := <span class="built_in">new</span>(<span class="keyword">bool</span>)</span><br><span class="line">	fmt.Println(*b)</span><br><span class="line">	i := <span class="built_in">new</span>(<span class="keyword">int</span>)</span><br><span class="line">	fmt.Println(*i)</span><br><span class="line">	s := <span class="built_in">new</span>(<span class="keyword">string</span>)</span><br><span class="line">	fmt.Println(*s)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	testNew()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"><span class="literal">false</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>make</strong></p>
<blockquote>
<p>内建函数make(T, args)与new(T)的用途不一样。它只用来创建slice，map和channel，并且返回一个初始化的(而不是置零)，类型为T的值（而不是*T）。之所以有所不同，是因为这三个类型的背后引用了使用前必须初始化的数据结构。例如，slice是一个三元描述符，包含一个指向数据（在数组中）的指针，长度，以及容量，在这些项被初始化之前，slice都是nil的。对于slice，map和channel，make初始化这些内部数据结构，并准备好可用的值。</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">10</span>, <span class="number">100</span>)</span><br></pre></td></tr></table></figure>

<p>分配一个有100个int的数组，然后创建一个长度为10，容量为100的slice结构，该slice引用包含前10个元素的数组。对应的，new([]int)返回一个指向新分配的，被置零的slice结构体的指针，即指向值为nil的slice的指针。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p *[]<span class="keyword">int</span> = <span class="built_in">new</span>([]<span class="keyword">int</span>)       <span class="comment">// allocates slice structure; *p == nil; rarely useful</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> v  []<span class="keyword">int</span> = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">100</span>) <span class="comment">// the slice v now refers to a new array of 100 ints</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// Unnecessarily complex:这种做法实在是很蛋疼</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> p *[]<span class="keyword">int</span> = <span class="built_in">new</span>([]<span class="keyword">int</span>)</span><br><span class="line">*p = <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment">// Idiomatic:习惯的做法</span></span><br><span class="line">v := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line">p: &amp;[]</span><br><span class="line">v: [<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>]</span><br></pre></td></tr></table></figure>


<h1 id="Golang标准库bytes"><a href="#Golang标准库bytes" class="headerlink" title="Golang标准库bytes"></a>Golang标准库bytes</h1><p>bytes包提供了对<strong>字节切片</strong> 进行读写操作的一系列函数，字节切片处理的函数比较多分为基本处理函数、比较函数、后缀检查函数、索引函数、分割函数、大小写处理函数和子切片处理函数等.</p>
<h2 id="常用函数-1"><a href="#常用函数-1" class="headerlink" title="常用函数"></a>常用函数</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;bytes&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> i <span class="keyword">int</span> = <span class="number">1</span></span><br><span class="line">	<span class="keyword">var</span> j <span class="keyword">byte</span> = <span class="number">2</span></span><br><span class="line">	j = <span class="keyword">byte</span>(i)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;j: %v\n&quot;</span>, j)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//Contains</span></span><br><span class="line">	b := []<span class="keyword">byte</span>(<span class="string">&quot;xiaobaibk.com&quot;</span>) <span class="comment">//字符串强转为byte切片</span></span><br><span class="line">	sublice1 := []<span class="keyword">byte</span>(<span class="string">&quot;xiaobaibk&quot;</span>)</span><br><span class="line">	sublice2 := []<span class="keyword">byte</span>(<span class="string">&quot;Xiaobaibk&quot;</span>)</span><br><span class="line">	fmt.Println(bytes.Contains(b, sublice1)) <span class="comment">//true</span></span><br><span class="line">	fmt.Println(bytes.Contains(b, sublice2)) <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//Count</span></span><br><span class="line">	s := []<span class="keyword">byte</span>(<span class="string">&quot;hellooooooooo&quot;</span>)</span><br><span class="line">	sep1 := []<span class="keyword">byte</span>(<span class="string">&quot;h&quot;</span>)</span><br><span class="line">	sep2 := []<span class="keyword">byte</span>(<span class="string">&quot;l&quot;</span>)</span><br><span class="line">	sep3 := []<span class="keyword">byte</span>(<span class="string">&quot;o&quot;</span>)</span><br><span class="line">	fmt.Println(bytes.Count(s, sep1)) <span class="comment">//1</span></span><br><span class="line">	fmt.Println(bytes.Count(s, sep2)) <span class="comment">//2</span></span><br><span class="line">	fmt.Println(bytes.Count(s, sep3)) <span class="comment">//9</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//Repeat</span></span><br><span class="line">	b = []<span class="keyword">byte</span>(<span class="string">&quot;hi&quot;</span>)</span><br><span class="line">	fmt.Println(<span class="keyword">string</span>(bytes.Repeat(b, <span class="number">1</span>))) <span class="comment">//hi</span></span><br><span class="line">	fmt.Println(<span class="keyword">string</span>(bytes.Repeat(b, <span class="number">3</span>))) <span class="comment">//hihihi</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//Replace</span></span><br><span class="line">	s = []<span class="keyword">byte</span>(<span class="string">&quot;hello,world&quot;</span>)</span><br><span class="line">	old := []<span class="keyword">byte</span>(<span class="string">&quot;o&quot;</span>)</span><br><span class="line">	news := []<span class="keyword">byte</span>(<span class="string">&quot;ee&quot;</span>)</span><br><span class="line">	fmt.Println(<span class="keyword">string</span>(bytes.Replace(s, old, news, <span class="number">0</span>)))  <span class="comment">//hello,world</span></span><br><span class="line">	fmt.Println(<span class="keyword">string</span>(bytes.Replace(s, old, news, <span class="number">1</span>)))  <span class="comment">//hellee,world</span></span><br><span class="line">	fmt.Println(<span class="keyword">string</span>(bytes.Replace(s, old, news, <span class="number">2</span>)))  <span class="comment">//hellee,weerld</span></span><br><span class="line">	fmt.Println(<span class="keyword">string</span>(bytes.Replace(s, old, news, <span class="number">-1</span>))) <span class="comment">//hellee,weerld</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//Runes</span></span><br><span class="line">	s = []<span class="keyword">byte</span>(<span class="string">&quot;你好世界&quot;</span>)</span><br><span class="line">	r := bytes.Runes(s)</span><br><span class="line">	fmt.Println(<span class="string">&quot;转换前字符串的长度: &quot;</span>, <span class="built_in">len</span>(s)) <span class="comment">//12</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;转换后字符串的长度: &quot;</span>, <span class="built_in">len</span>(r)) <span class="comment">//4</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//Join</span></span><br><span class="line">	s2 := [][]<span class="keyword">byte</span>&#123;[]<span class="keyword">byte</span>(<span class="string">&quot;你好&quot;</span>), []<span class="keyword">byte</span>(<span class="string">&quot;世界&quot;</span>)&#125;</span><br><span class="line">	sep4 := []<span class="keyword">byte</span>(<span class="string">&quot;,&quot;</span>)</span><br><span class="line">	fmt.Println(<span class="keyword">string</span>(bytes.Join(s2, sep4))) <span class="comment">//你好,世界</span></span><br><span class="line">	sep5 := []<span class="keyword">byte</span>(<span class="string">&quot;#&quot;</span>)</span><br><span class="line">	fmt.Println(<span class="keyword">string</span>(bytes.Join(s2, sep5))) <span class="comment">//你好#世界</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Buffer类型"><a href="#Buffer类型" class="headerlink" title="Buffer类型"></a>Buffer类型</h2><p>缓冲区是具有读取和写入方法的可变大小的字节缓冲区。Buffer 的零值是准备使用的空缓冲区。</p>
<p>声明一个Buffer的四种方法：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b bytes.Buffer <span class="comment">// 直接定义一个Buffer变量，不用初始化，可以直接使用</span></span><br><span class="line">b := <span class="built_in">new</span>(bytes.Buffer) <span class="comment">//使用New返回Buffer变量</span></span><br><span class="line">b := bytes.NewBuffer(s []<span class="keyword">byte</span>) <span class="comment">//从一个[]byte切片，构造一个Buffer</span></span><br><span class="line">b := bytes.NewBufferString(s <span class="keyword">string</span>) <span class="comment">//从一个string变量，构造一个Buffer</span></span><br></pre></td></tr></table></figure>

<p><strong>往Buffer中写入数据</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">b.Write(d []<span class="keyword">byte</span>) <span class="comment">//将切片d写入Buffer尾部</span></span><br><span class="line">b.WriteString(s <span class="keyword">string</span>) <span class="comment">//将字符串s写入Buffer尾部</span></span><br><span class="line">b.WriteByte(c <span class="keyword">byte</span>) <span class="comment">//将字符c写入Buffer尾部</span></span><br><span class="line">b.WriteRune(r <span class="keyword">rune</span>) <span class="comment">//将一个rune类型的数据放到缓冲器的尾部</span></span><br><span class="line">b.WriteTo(w io.Writer) <span class="comment">//将Buffer中的内容输出到实现了io.Writer接口的可写入对象中</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注：将文件中的内容写入Buffer,则使用ReadForm(i io.Reader)</p>
</blockquote>
<p><strong>从Buffer中读取数据到指定容器</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">c := <span class="built_in">make</span>([]<span class="keyword">byte</span>,<span class="number">8</span>)</span><br><span class="line">b.Read(c) <span class="comment">//一次读取8个byte到c容器中，每次读取新的8个byte覆盖c中原来的内容</span></span><br><span class="line">b.ReadByte() <span class="comment">//读取第一个byte，b的第1个byte被拿掉，赋值给 a =&gt; a, _ := b.ReadByte()</span></span><br><span class="line">b.ReadRune() <span class="comment">//读取第一个rune，b的第1个rune被拿掉，赋值给 r =&gt;  r, _ := b.ReadRune()</span></span><br><span class="line">b.ReadBytes(delimiter <span class="keyword">byte</span>) <span class="comment">//需要一个 byte作为分隔符 ，读的时候从缓冲器里找第一个出现的分隔符（delim），找到后，把从缓冲器头部开始到分隔符之间的所有byte进行返回，作为byte类型的slice，返回后，缓冲器也会空掉一部分</span></span><br><span class="line">b.ReadString(delimiter <span class="keyword">byte</span>) <span class="comment">// 需要一个byte作为分隔符，读的时候从缓冲器里找第一个出现的分隔符（delim），找到后，把从缓冲器头部开始到分隔符之间的所有byte进行返回， 作为字符串返回 ，返回后，缓冲器也会空掉一部分b.ReadForm(i io.Reader) // 从一个实现io.Reader接口的r，把r里的内容读到缓冲器里 ，n 返回读的数量</span></span><br><span class="line"></span><br><span class="line">file, _ := os.Open(<span class="string">&quot;.text.txt&quot;</span>)  </span><br><span class="line">buf := bytes.NewBufferString(<span class="string">&quot;Hello world&quot;</span>)  </span><br><span class="line">buf.ReadFrom(file) </span><br><span class="line"><span class="comment">//将text.txt内容追加到缓冲器的尾部</span></span><br><span class="line">fmt.Println(buf.String())</span><br><span class="line">清空数据</span><br><span class="line">b.Reset()</span><br><span class="line">转换为字符串</span><br><span class="line">b.String()</span><br></pre></td></tr></table></figure>

<h2 id="Reader类型"><a href="#Reader类型" class="headerlink" title="Reader类型"></a>Reader类型</h2><p>Reader实现了 <code>io.Reader, io.ReaderAt, io.WriterTo, io.Seeker,io.ByteScanner, io.RuneScanner</code>接口，Reader是只读的、可以seek。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testReader</span><span class="params">()</span></span> &#123;</span><br><span class="line">	data := <span class="string">&quot;123456789&quot;</span></span><br><span class="line">	<span class="comment">//通过[]byte创建Reader</span></span><br><span class="line">	re := bytes.NewReader([]<span class="keyword">byte</span>(data))</span><br><span class="line">	<span class="comment">//返回未读取部分的长度</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;re len : &quot;</span>, re.Len())</span><br><span class="line">	<span class="comment">//返回底层数据总长度</span></span><br><span class="line">	fmt.Println(<span class="string">&quot;re size : &quot;</span>, re.Size())</span><br><span class="line">	fmt.Println(<span class="string">&quot;------------&quot;</span>)</span><br><span class="line"></span><br><span class="line">	buf := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">2</span>)</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="comment">//读取数据</span></span><br><span class="line">		n, err := re.Read(buf)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(<span class="keyword">string</span>(buf[:n]))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;------------&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置偏移量，因为上面的操作已经修改了读取位置等信息</span></span><br><span class="line">	re.Seek(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="comment">//一个字节一个字节的读</span></span><br><span class="line">		b, err := re.ReadByte()</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(<span class="keyword">string</span>(b))</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;------------&quot;</span>)</span><br><span class="line"></span><br><span class="line">	re.Seek(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">	off := <span class="keyword">int64</span>(<span class="number">0</span>)</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="comment">//指定偏移量读取</span></span><br><span class="line">		n, err := re.ReadAt(buf, off)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		off += <span class="keyword">int64</span>(n)</span><br><span class="line">		fmt.Println(off, <span class="keyword">string</span>(buf[:n]))</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="Golang标准库errors"><a href="#Golang标准库errors" class="headerlink" title="Golang标准库errors"></a>Golang标准库errors</h1><p>errors包实现了操作错误的函数。语言使用 error 类型来返回函数执行过程中遇到的错误，如果返回的 error 值为 <code>nil</code>，则表示未遇到错误，否则 error 会返回一个字符串，用于说明遇到了什么错误。</p>
<h2 id="error-结构"><a href="#error-结构" class="headerlink" title="error 结构"></a>error 结构</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> error <span class="keyword">interface</span> &#123;</span><br><span class="line">	Error() <span class="keyword">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>你可以用任何类型去实现它（只要添加一个 Error() 方法即可），也就是说，error 可以是任何类型，这意味着，函数返回的 error 值实际可以包含任意信息，不一定是字符串。</p>
<p>error 不一定表示一个错误，它可以表示任何信息，比如 io 包中就用 error 类型的 <code>io.EOF</code> 表示数据读取结束，而不是遇到了什么错误。</p>
<p>errors 包实现了一个最简单的 error 类型，只包含一个字符串，它可以记录大多数情况下遇到的错误信息。errors 包的用法也很简单，只有一个 <code>New</code> 函数，用于生成一个最简单的 error 对象：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">New</span><span class="params">(text <span class="keyword">string</span>)</span> <span class="title">error</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;errors&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">check</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">error</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> s == <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> errors.New(<span class="string">&quot;字符串不能为空&quot;</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	check(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line">	err := check(<span class="string">&quot;&quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;err: %v\n&quot;</span>, err.Error())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="自定义错误"><a href="#自定义错误" class="headerlink" title="自定义错误"></a>自定义错误</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">// MyError is an error implementation that includes a time and message.</span></span><br><span class="line"><span class="keyword">type</span> MyError <span class="keyword">struct</span> &#123;</span><br><span class="line">	When time.Time</span><br><span class="line">	What <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e MyError)</span> <span class="title">Error</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> fmt.Sprintf(<span class="string">&quot;%v: %v&quot;</span>, e.When, e.What)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">oops</span><span class="params">()</span> <span class="title">error</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> MyError&#123;</span><br><span class="line">		time.Date(<span class="number">1989</span>, <span class="number">3</span>, <span class="number">15</span>, <span class="number">22</span>, <span class="number">30</span>, <span class="number">0</span>, <span class="number">0</span>, time.UTC),</span><br><span class="line">		<span class="string">&quot;the file system has gone away&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> err := oops(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		fmt.Println(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="Golang标准库中的sort包"><a href="#Golang标准库中的sort包" class="headerlink" title="Golang标准库中的sort包"></a>Golang标准库中的sort包</h1><h2 id="sort包的内容，以及使用"><a href="#sort包的内容，以及使用" class="headerlink" title="sort包的内容，以及使用"></a>sort包的内容，以及使用</h2><p>sort包提供了排序切片和用户自定义数据集以及相关功能的函数。</p>
<p>sort包主要针对 <code>[]int</code>、<code>[]float64</code>、<code>[]string</code>、以及其他<strong>自定义切片</strong> 的排序。</p>
<h2 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h2><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">type</span> <span class="title">IntSlice</span></span> []int</span><br><span class="line"><span class="class"><span class="keyword">type</span> <span class="title">Float64Slice</span></span> </span><br><span class="line"><span class="class"><span class="keyword">type</span> <span class="title">StringSlice</span></span></span><br></pre></td></tr></table></figure>

<h2 id="函数-1"><a href="#函数-1" class="headerlink" title="函数"></a>函数</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Ints</span><span class="params">(a []<span class="keyword">int</span>)</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">IntsAreSorted</span><span class="params">(a []<span class="keyword">int</span>)</span> <span class="title">bool</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">SearchInts</span><span class="params">(a []<span class="keyword">int</span>, x <span class="keyword">int</span>)</span> <span class="title">int</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Float64s</span><span class="params">(a []<span class="keyword">float64</span>)</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Float64sAreSorted</span><span class="params">(a []<span class="keyword">float64</span>)</span> <span class="title">bool</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">SearchFloat64s</span><span class="params">(a []<span class="keyword">float64</span>, x <span class="keyword">float64</span>)</span> <span class="title">int</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">SearchFloat64s</span><span class="params">(a []flaot64, x <span class="keyword">float64</span>)</span> <span class="title">bool</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Strings</span><span class="params">(a []<span class="keyword">string</span>)</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">StringsAreSorted</span><span class="params">(a []<span class="keyword">string</span>)</span> <span class="title">bool</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">SearchStrings</span><span class="params">(a []<span class="keyword">string</span>, x <span class="keyword">string</span>)</span> <span class="title">int</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sort</span><span class="params">(data Interface)</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Stable</span><span class="params">(data Interface)</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Reverse</span><span class="params">(data Interface)</span> <span class="title">Interface</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ISSorted</span><span class="params">(data Interface)</span> <span class="title">bool</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Search</span><span class="params">(n <span class="keyword">int</span>, f <span class="keyword">func</span>(<span class="keyword">int</span>)</span> <span class="title">bool</span>) <span class="title">int</span></span></span><br></pre></td></tr></table></figure>

<h3 id="接口-type-Interface"><a href="#接口-type-Interface" class="headerlink" title="接口 type Interface"></a>接口 type Interface</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type Interface <span class="keyword">interface</span> &#123;</span><br><span class="line">    Len() <span class="built_in">int</span>           <span class="comment">// Len方法返回集合中的元素个数</span></span><br><span class="line">    Less(i, j <span class="built_in">int</span>) <span class="built_in">bool</span> <span class="comment">// i&gt;j，该方法返回索引i的元素是否比索引j的元素小、</span></span><br><span class="line">    Swap(i, j <span class="built_in">int</span>)      <span class="comment">// 交换i, j的值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实例-6"><a href="#实例-6" class="headerlink" title="实例"></a>实例</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;sort&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> NewInts []<span class="keyword">uint</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(n NewInts)</span> <span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(n)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(n NewInts)</span> <span class="title">Less</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">    fmt.Println(i, j, n[i] &lt; n[j], n)</span><br><span class="line">    <span class="keyword">return</span> n[i] &lt; n[j]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(n NewInts)</span> <span class="title">Swap</span><span class="params">(i, j <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    n[i], n[j] = n[j], n[i]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    n := []<span class="keyword">uint</span>&#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>&#125;</span><br><span class="line">    sort.Sort(NewInts(n))</span><br><span class="line">    fmt.Println(n)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="结构体-1"><a href="#结构体-1" class="headerlink" title="结构体"></a>结构体</h2><p>三种结构体的方法都是一样的，只是分别针对int切片、float64切片、strings切片这三种不同的类型。 然后三种结果都有五个公开方法</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p xxxSlice)</span> <span class="title">Len</span><span class="params">()</span> <span class="title">int</span>  // 切片长度</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p xxxSlice)</span> <span class="title">Less</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p xxxSlice)</span> <span class="title">Swap</span><span class="params">(i, j <span class="keyword">int</span>)</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p xxxSlice)</span> <span class="title">Search</span><span class="params">(x xxx)</span> <span class="title">int</span></span></span><br><span class="line"><span class="comment">// 这个和后面那个功能一样</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p xxxSlice)</span> <span class="title">Sort</span><span class="params">()</span></span>  </span><br></pre></td></tr></table></figure>

<h2 id="综合实例"><a href="#综合实例" class="headerlink" title="综合实例"></a>综合实例</h2><p><strong><code>[]float64</code>:</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f := []<span class="keyword">float64</span>&#123;<span class="number">1.1</span>, <span class="number">4.4</span>, <span class="number">5.5</span>, <span class="number">3.3</span>, <span class="number">2.2</span>&#125;</span><br><span class="line">sort.Float64s(f)</span><br><span class="line">fmt.Printf(<span class="string">&quot;f: %v\n&quot;</span>, f)</span><br><span class="line"><span class="comment">// f: [1.1 2.2 3.3 4.4 5.5]</span></span><br></pre></td></tr></table></figure>

<p><strong><code>[]int:</code></strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f := []<span class="keyword">int</span>&#123;<span class="number">3</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>&#125;</span><br><span class="line">sort.Ints(f)</span><br><span class="line">fmt.Printf(<span class="string">&quot;f: %v\n&quot;</span>, f)</span><br><span class="line"><span class="comment">// f: [1 2 3 4 5]</span></span><br></pre></td></tr></table></figure>

<p><strong>string:</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//字符串排序，现比较高位，相同的再比较低位</span></span><br><span class="line"><span class="comment">// [] string</span></span><br><span class="line">ls := sort.StringSlice&#123;</span><br><span class="line">    <span class="string">&quot;100&quot;</span>,</span><br><span class="line">    <span class="string">&quot;42&quot;</span>,</span><br><span class="line">    <span class="string">&quot;41&quot;</span>,</span><br><span class="line">    <span class="string">&quot;3&quot;</span>,</span><br><span class="line">    <span class="string">&quot;2&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(ls)  <span class="comment">//[100 42 41 3 2]</span></span><br><span class="line">sort.Strings(ls)</span><br><span class="line">fmt.Println(ls)  <span class="comment">//[100 2 3 41 42]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//字符串排序，现比较高位，相同的再比较低位</span></span><br><span class="line">ls := sort.StringSlice&#123;</span><br><span class="line">    <span class="string">&quot;d&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ac&quot;</span>,</span><br><span class="line">    <span class="string">&quot;c&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ab&quot;</span>,</span><br><span class="line">    <span class="string">&quot;e&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(ls)  <span class="comment">//[d ac c ab e]</span></span><br><span class="line">sort.Strings(ls)</span><br><span class="line">fmt.Println(ls)  <span class="comment">//[ab ac c d e]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//汉字排序，依次比较byte大小</span></span><br><span class="line">ls := sort.StringSlice&#123;</span><br><span class="line">    <span class="string">&quot;啊&quot;</span>,</span><br><span class="line">    <span class="string">&quot;博&quot;</span>,</span><br><span class="line">    <span class="string">&quot;次&quot;</span>,</span><br><span class="line">    <span class="string">&quot;得&quot;</span>,</span><br><span class="line">    <span class="string">&quot;饿&quot;</span>,</span><br><span class="line">    <span class="string">&quot;周&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(ls)  <span class="comment">//[啊 博 次 得 饿 周]</span></span><br><span class="line">sort.Strings(ls)</span><br><span class="line">fmt.Println(ls)  <span class="comment">//[博 周 啊 得 次 饿]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, v := <span class="keyword">range</span> ls&#123;</span><br><span class="line">    fmt.Println(v, []<span class="keyword">byte</span>(v))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//博 [229 141 154]</span></span><br><span class="line"><span class="comment">//周 [229 145 168]</span></span><br><span class="line"><span class="comment">//啊 [229 149 138]</span></span><br><span class="line"><span class="comment">//得 [229 190 151]</span></span><br><span class="line"><span class="comment">//次 [230 172 161]</span></span><br><span class="line"><span class="comment">//饿 [233 165 191]</span></span><br></pre></td></tr></table></figure>

<p><strong>复杂结构：<code>[][]int :</code></strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> testSlice [][]<span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(l testSlice)</span> <span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span>            &#123; <span class="keyword">return</span> <span class="built_in">len</span>(l) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(l testSlice)</span> <span class="title">Swap</span><span class="params">(i, j <span class="keyword">int</span>)</span></span>      &#123; l[i], l[j] = l[j], l[i] &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(l testSlice)</span> <span class="title">Less</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123; <span class="keyword">return</span> l[i][<span class="number">1</span>] &lt; l[j][<span class="number">1</span>] &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ls := testSlice&#123;</span><br><span class="line">        &#123;<span class="number">1</span>,<span class="number">4</span>&#125;,</span><br><span class="line">        &#123;<span class="number">9</span>,<span class="number">3</span>&#125;,</span><br><span class="line">        &#123;<span class="number">7</span>,<span class="number">5</span>&#125;,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fmt.Println(ls)  <span class="comment">//[[1 4] [9 3] [7 5]]</span></span><br><span class="line">    sort.Sort(ls)</span><br><span class="line">    fmt.Println(ls)  <span class="comment">//[[9 3] [1 4] [7 5]]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>复杂结构体：<code>[]map[string]int [&#123;&quot;k&quot;:0&#125;,&#123;&quot;k1&quot;:1&#125;,&#123;&quot;k2&quot;:2] :</code></strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> testSlice []<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">float64</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(l testSlice)</span> <span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span>            &#123; <span class="keyword">return</span> <span class="built_in">len</span>(l) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(l testSlice)</span> <span class="title">Swap</span><span class="params">(i, j <span class="keyword">int</span>)</span></span>      &#123; l[i], l[j] = l[j], l[i] &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(l testSlice)</span> <span class="title">Less</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123; <span class="keyword">return</span> l[i][<span class="string">&quot;a&quot;</span>] &lt; l[j][<span class="string">&quot;a&quot;</span>] &#125; <span class="comment">//按照&quot;a&quot;对应的值排序</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ls := testSlice&#123;</span><br><span class="line">        &#123;<span class="string">&quot;a&quot;</span>:<span class="number">4</span>, <span class="string">&quot;b&quot;</span>:<span class="number">12</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;a&quot;</span>:<span class="number">3</span>, <span class="string">&quot;b&quot;</span>:<span class="number">11</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;a&quot;</span>:<span class="number">5</span>, <span class="string">&quot;b&quot;</span>:<span class="number">10</span>&#125;,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fmt.Println(ls)  <span class="comment">//[map[a:4 b:12] map[a:3 b:11] map[a:5 b:10]]</span></span><br><span class="line">    sort.Sort(ls)</span><br><span class="line">    fmt.Println(ls)  <span class="comment">//[map[a:3 b:11] map[a:4 b:12] map[a:5 b:10]]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>复杂结构体：<code>[]struct :</code></strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> People <span class="keyword">struct</span> &#123;</span><br><span class="line">    Name <span class="keyword">string</span> </span><br><span class="line">    Age <span class="keyword">int</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> testSlice []People</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(l testSlice)</span> <span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span>            &#123; <span class="keyword">return</span> <span class="built_in">len</span>(l) &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(l testSlice)</span> <span class="title">Swap</span><span class="params">(i, j <span class="keyword">int</span>)</span></span>      &#123; l[i], l[j] = l[j], l[i] &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(l testSlice)</span> <span class="title">Less</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123; <span class="keyword">return</span> l[i].Age &lt; l[j].Age &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ls := testSlice&#123;</span><br><span class="line">        &#123;Name:<span class="string">&quot;n1&quot;</span>, Age:<span class="number">12</span>&#125;,</span><br><span class="line">        &#123;Name:<span class="string">&quot;n2&quot;</span>, Age:<span class="number">11</span>&#125;,</span><br><span class="line">        &#123;Name:<span class="string">&quot;n3&quot;</span>, Age:<span class="number">10</span>&#125;,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fmt.Println(ls)  <span class="comment">//[&#123;n1 12&#125; &#123;n2 11&#125; &#123;n3 10&#125;]</span></span><br><span class="line">    sort.Sort(ls)</span><br><span class="line">    fmt.Println(ls)  <span class="comment">//[&#123;n3 10&#125; &#123;n2 11&#125; &#123;n1 12&#125;]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="Golang标准库time"><a href="#Golang标准库time" class="headerlink" title="Golang标准库time"></a>Golang标准库time</h1><p>time包提供测量和显示时间的功能。</p>
<h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a><strong>基本使用</strong></h2><p>打印显示出现在的时间，基本示例如下。 其中now为 <code>time.Time</code>类型,Month 为 <code>time.Month</code>类型</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test1</span><span class="params">()</span></span> &#123;</span><br><span class="line">    now := time.Now() <span class="comment">//获取当前时间</span></span><br><span class="line">    <span class="comment">// current time:2020-12-01 22:24:30.85736 +0800 CST m=+0.000096031</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;current time:%v\n&quot;</span>, now)</span><br><span class="line">    year := now.Year()     <span class="comment">//年</span></span><br><span class="line">    month := now.Month()   <span class="comment">//月</span></span><br><span class="line">    day := now.Day()       <span class="comment">//日</span></span><br><span class="line">    hour := now.Hour()     <span class="comment">//小时</span></span><br><span class="line">    minute := now.Minute() <span class="comment">//分钟</span></span><br><span class="line">    second := now.Second() <span class="comment">//秒</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%d-%02d-%02d %02d:%02d:%02d\n&quot;</span>, year, month, day, hour, minute, second)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%T,%T,%T,%T,%T,%T,%T\n&quot;</span>, now, year, month, day, hour, minute, second)</span><br><span class="line">    <span class="comment">// time.Time,int,time.Month,int,int,int,int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="时间戳"><a href="#时间戳" class="headerlink" title="时间戳"></a><strong>时间戳</strong></h2><p>在编程中对于时间戳的应用也尤为广泛,例如在Web开发中做cookies有效期，接口加密，Redis中的key有效期等等，大部分都是使用到了时间戳。</p>
<p>时间戳是自1970年1月1日（08:00:00GMT）至当前时间的总毫秒数。它也被称为Unix时间戳（UnixTimestamp）。 在GoLang中,获取时间戳的操作如下</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test2</span><span class="params">()</span></span> &#123;</span><br><span class="line">    now := time.Now()</span><br><span class="line">    <span class="comment">// 当前时间戳 TimeStamp type:int64, TimeStamp:1606832965</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;TimeStamp type:%T, TimeStamp:%v&quot;</span>, now.Unix(), now.Unix())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>除此之外还有纳秒时间戳，我们可以使用 <code>time.Now().UnixNano()</code>来获取它</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test3</span><span class="params">()</span></span> &#123;</span><br><span class="line">    now := time.Now()</span><br><span class="line">    <span class="comment">// 纳秒级时间戳TimeStamp type:int64, TimeStamp:1606833059999670000</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;TimeStamp type:%T, TimeStamp:%v\n&quot;</span>, now.UnixNano(), now.UnixNano())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="时间戳转化为普通的时间格式"><a href="#时间戳转化为普通的时间格式" class="headerlink" title="时间戳转化为普通的时间格式"></a>时间戳转化为普通的时间格式</h3><p>在 <code>go</code>语言中可以 <code>time.Unix</code>来直接将时间戳转化为当前时间格式，实现瞬间替换。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">timeStampToTime</span><span class="params">()</span></span> &#123;</span><br><span class="line">    timestamp := time.Now().Unix()</span><br><span class="line">    timeObj := time.Unix(timestamp, <span class="number">0</span>) <span class="comment">//将时间戳转为时间格式</span></span><br><span class="line">    fmt.Println(timeObj)</span><br><span class="line">    year := timeObj.Year()     <span class="comment">//年</span></span><br><span class="line">    month := timeObj.Month()   <span class="comment">//月</span></span><br><span class="line">    day := timeObj.Day()       <span class="comment">//日</span></span><br><span class="line">    hour := timeObj.Hour()     <span class="comment">//小时</span></span><br><span class="line">    minute := timeObj.Minute() <span class="comment">//分钟</span></span><br><span class="line">    second := timeObj.Second() <span class="comment">//秒</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;%d-%02d-%02d %02d:%02d:%02d\n&quot;</span>, year, month, day, hour, minute, second)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="操作时间"><a href="#操作时间" class="headerlink" title="操作时间"></a><strong>操作时间</strong></h3><h3 id="ADD"><a href="#ADD" class="headerlink" title="ADD"></a><strong>ADD</strong></h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(h, m, s, mls, msc, ns time.Duration)</span></span> &#123;</span><br><span class="line">    now := time.Now()</span><br><span class="line">    fmt.Println(now.Add(time.Hour*h + time.Minute*m + time.Second*s + time.Millisecond*mls + time.Microsecond*msc + time.Nanosecond*ns))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    test4(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意在这里并不能增加年\月\日，仅能增加时分秒,也就是以下的才被允许</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    Nanosecond  Duration = <span class="number">1</span></span><br><span class="line">    Microsecond          = <span class="number">1000</span> * Nanosecond</span><br><span class="line">    Millisecond          = <span class="number">1000</span> * Microsecond</span><br><span class="line">    Second               = <span class="number">1000</span> * Millisecond</span><br><span class="line">    Minute               = <span class="number">60</span> * Second</span><br><span class="line">    Hour                 = <span class="number">60</span> * Minute</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="Sub"><a href="#Sub" class="headerlink" title="Sub"></a><strong>Sub</strong></h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sub</span><span class="params">()</span></span> &#123;</span><br><span class="line">    now := time.Now()</span><br><span class="line">    targetTime := now.Add(time.Hour)</span><br><span class="line">    <span class="comment">// 目标时间与此时相比相差1h0m0s</span></span><br><span class="line">    fmt.Println(targetTime.Sub(now))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>谁的sub谁为参照时间</p>
</blockquote>
<h3 id="Equal"><a href="#Equal" class="headerlink" title="Equal"></a><strong>Equal</strong></h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t Time)</span> <span class="title">Equal</span><span class="params">(u Time)</span> <span class="title">bool</span></span></span><br></pre></td></tr></table></figure>

<p>判断两个时间是否相同，会考虑时区的影响，因此不同时区标准的时间也可以正确比较。</p>
<h3 id="Before"><a href="#Before" class="headerlink" title="Before"></a><strong>Before</strong></h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t Time)</span> <span class="title">Before</span><span class="params">(u Time)</span> <span class="title">bool</span></span></span><br></pre></td></tr></table></figure>

<p>如果t代表的时间点在u之前，返回真；否则返回假。</p>
<h3 id="After"><a href="#After" class="headerlink" title="After"></a><strong>After</strong></h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t Time)</span> <span class="title">After</span><span class="params">(u Time)</span> <span class="title">bool</span></span></span><br></pre></td></tr></table></figure>

<p>如果t代表的时间点在u之后，返回真；否则返回假。</p>
<h3 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a><strong>定时器</strong></h3><p>使用 <code>time.Tick(时间间隔)</code>来设置定时器，定时器的本质上是一个通道（channel）。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tick</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ticker := time.Tick(time.Second) <span class="comment">//定义一个1秒间隔的定时器</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="keyword">range</span> ticker &#123;</span><br><span class="line">        fmt.Println(i)<span class="comment">//每秒都会执行的任务</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="时间格式化"><a href="#时间格式化" class="headerlink" title="时间格式化"></a><strong>时间格式化</strong></h3><p>时间类型有一个自带的方法 <code>Format</code>进行格式化，需要注意的是Go语言中格式化时间模板不是常见的 <code>Y-m-d H:M:S</code>而是使用Go的诞生时间2006年1月2号15点04分（记忆口诀为2006 1 2 3 4）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">format</span><span class="params">()</span></span> &#123;</span><br><span class="line">    now := time.Now()</span><br><span class="line">    <span class="comment">// 格式化的模板为Go的出生时间2006年1月2号15点04分 Mon Jan</span></span><br><span class="line">    <span class="comment">// 24小时制</span></span><br><span class="line">    fmt.Println(now.Format(<span class="string">&quot;2006-01-02 15:04:05.000 Mon Jan&quot;</span>))</span><br><span class="line">    <span class="comment">// 12小时制</span></span><br><span class="line">    fmt.Println(now.Format(<span class="string">&quot;2006-01-02 03:04:05.000 PM Mon Jan&quot;</span>))</span><br><span class="line">    fmt.Println(now.Format(<span class="string">&quot;2006/01/02 15:04&quot;</span>))</span><br><span class="line">    fmt.Println(now.Format(<span class="string">&quot;15:04 2006/01/02&quot;</span>))</span><br><span class="line">    fmt.Println(now.Format(<span class="string">&quot;2006/01/02&quot;</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>补充：如果想格式化为12小时方式，需指定 <code>PM</code>。</p>
</blockquote>
<h3 id="解析字符串格式的时间"><a href="#解析字符串格式的时间" class="headerlink" title="解析字符串格式的时间"></a><strong>解析字符串格式的时间</strong></h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">now := time.Now()</span><br><span class="line">fmt.Println(now)</span><br><span class="line"><span class="comment">// 加载时区</span></span><br><span class="line">loc, err := time.LoadLocation(<span class="string">&quot;Asia/Shanghai&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmt.Println(err)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 按照指定时区和指定格式解析字符串时间</span></span><br><span class="line">timeObj, err := time.ParseInLocation(<span class="string">&quot;2006/01/02 15:04:05&quot;</span>, <span class="string">&quot;2019/08/04 14:15:20&quot;</span>, loc)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmt.Println(err)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(timeObj)</span><br><span class="line">fmt.Println(timeObj.Sub(now))</span><br></pre></td></tr></table></figure>


<h1 id="Golang-标准库encoding-json"><a href="#Golang-标准库encoding-json" class="headerlink" title="Golang 标准库encoding/json"></a>Golang 标准库encoding/json</h1><p>这个包可以实现json的编码和解码，就是将json字符串转换为 <code>struct</code>，或者将 <code>struct</code>转换为json。</p>
<h2 id="核心的两个函数"><a href="#核心的两个函数" class="headerlink" title="核心的两个函数"></a>核心的两个函数</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Marshal</span><span class="params">(v <span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">([]<span class="keyword">byte</span>, error)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>将struct编码成json，可以接收任意类型</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Unmarshal</span><span class="params">(data []<span class="keyword">byte</span>, v <span class="keyword">interface</span>&#123;&#125;)</span> <span class="title">error</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>将json转码成struct结构体</p>
</blockquote>
<h2 id="两个核心结构体"><a href="#两个核心结构体" class="headerlink" title="两个核心结构体"></a>两个核心结构体</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Decoder <span class="keyword">struct</span> &#123;</span><br><span class="line">	<span class="comment">// contains filtered or unexported fields</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>从输入流读取并解析json</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Encoder <span class="keyword">struct</span> &#123;</span><br><span class="line">	<span class="comment">// contains filtered or unexported fields</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>写json到输出流</p>
</blockquote>
<h2 id="实例演示"><a href="#实例演示" class="headerlink" title="实例演示"></a>实例演示</h2><p><strong>结构体转换为json</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name  <span class="keyword">string</span></span><br><span class="line">	Age   <span class="keyword">int</span></span><br><span class="line">	Email <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Marshal</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p := Person&#123;</span><br><span class="line">		Name:  <span class="string">&quot;tom&quot;</span>,</span><br><span class="line">		Age:   <span class="number">20</span>,</span><br><span class="line">		Email: <span class="string">&quot;tom@gmail.com&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	b, _ := json.Marshal(p)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;b: %v\n&quot;</span>, <span class="keyword">string</span>(b))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>json转换为结构体</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Unmarshal</span><span class="params">()</span></span> &#123;</span><br><span class="line">	b1 := []<span class="keyword">byte</span>(<span class="string">`&#123;&quot;Name&quot;:&quot;tom&quot;,&quot;Age&quot;:20,&quot;Email&quot;:&quot;tom@gmail.com&quot;&#125;`</span>)</span><br><span class="line">	<span class="keyword">var</span> m Person</span><br><span class="line">	json.Unmarshal(b1, &amp;m)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;m: %v\n&quot;</span>, m)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>解析嵌套类型</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解析嵌套类型</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test3</span><span class="params">()</span></span> &#123;</span><br><span class="line">	b := []<span class="keyword">byte</span>(<span class="string">`&#123;&quot;Name&quot;:&quot;tom&quot;,&quot;Age&quot;:20,&quot;Email&quot;:&quot;tom@gmail.com&quot;, &quot;Parents&quot;:[&quot;tom&quot;, &quot;kite&quot;]&#125;`</span>)</span><br><span class="line">	<span class="keyword">var</span> f <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">	json.Unmarshal(b, &amp;f)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;f: %v\n&quot;</span>, f)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>解析嵌套引用类型</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test4</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">		Name   <span class="keyword">string</span></span><br><span class="line">		Age    <span class="keyword">int</span></span><br><span class="line">		Email  <span class="keyword">string</span></span><br><span class="line">		Parent []<span class="keyword">string</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	p := Person&#123;</span><br><span class="line">		Name:   <span class="string">&quot;tom&quot;</span>,</span><br><span class="line">		Age:    <span class="number">20</span>,</span><br><span class="line">		Email:  <span class="string">&quot;tom@gmail.com&quot;</span>,</span><br><span class="line">		Parent: []<span class="keyword">string</span>&#123;<span class="string">&quot;big tom&quot;</span>, <span class="string">&quot;big kite&quot;</span>&#125;,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	b, _ := json.Marshal(p)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;b: %v\n&quot;</span>, <span class="keyword">string</span>(b))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>io流 Reader Writer 可以扩展到http websocket等场景</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test5</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// dec := json.NewDecoder(os.Stdin)</span></span><br><span class="line">	<span class="comment">// a.json : &#123;&quot;Name&quot;:&quot;tom&quot;,&quot;Age&quot;:20,&quot;Email&quot;:&quot;tom@gmail.com&quot;, &quot;Parents&quot;:[&quot;tom&quot;, &quot;kite&quot;]&#125;</span></span><br><span class="line">	f, _ := os.Open(<span class="string">&quot;a.json&quot;</span>)</span><br><span class="line">	dec := json.NewDecoder(f)</span><br><span class="line">	enc := json.NewEncoder(os.Stdout)</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		<span class="keyword">var</span> v <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">		<span class="keyword">if</span> err := dec.Decode(&amp;v); err != <span class="literal">nil</span> &#123;</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;v: %v\n&quot;</span>, v)</span><br><span class="line">		<span class="keyword">if</span> err := enc.Encode(&amp;v); err != <span class="literal">nil</span> &#123;</span><br><span class="line">			log.Println(err)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		输入 &#123;&quot;Name&quot;:&quot;tom&quot;,&quot;Age&quot;:20,&quot;Email&quot;:&quot;tom@gmail.com&quot;&#125;</span></span><br><span class="line"><span class="comment">		输出</span></span><br><span class="line"><span class="comment">		v: map[Age:20 Email:tom@gmail.com Name:tom]</span></span><br><span class="line"><span class="comment">		&#123;&quot;Age&quot;:20,&quot;Email&quot;:&quot;tom@gmail.com&quot;,&quot;Name&quot;:&quot;tom&quot;&#125;</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>也可以读写文件</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test6</span><span class="params">()</span></span> &#123;</span><br><span class="line">	f, _ := os.Open(<span class="string">&quot;a.json&quot;</span>)</span><br><span class="line">	<span class="keyword">defer</span> f.Close()</span><br><span class="line">	d := json.NewDecoder(f)</span><br><span class="line">	<span class="keyword">var</span> v <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">	d.Decode(&amp;v)</span><br><span class="line"></span><br><span class="line">	fmt.Printf(<span class="string">&quot;v: %v\n&quot;</span>, v)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test7</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">		Name   <span class="keyword">string</span></span><br><span class="line">		Age    <span class="keyword">int</span></span><br><span class="line">		Email  <span class="keyword">string</span></span><br><span class="line">		Parent []<span class="keyword">string</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	p := Person&#123;</span><br><span class="line">		Name:   <span class="string">&quot;tom&quot;</span>,</span><br><span class="line">		Age:    <span class="number">20</span>,</span><br><span class="line">		Email:  <span class="string">&quot;tom@gmail.com&quot;</span>,</span><br><span class="line">		Parent: []<span class="keyword">string</span>&#123;<span class="string">&quot;big tom&quot;</span>, <span class="string">&quot;big kite&quot;</span>&#125;,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	f, _ := os.OpenFile(<span class="string">&quot;a.json&quot;</span>, os.O_WRONLY, <span class="number">0777</span>)</span><br><span class="line">	<span class="keyword">defer</span> f.Close()</span><br><span class="line">	e := json.NewEncoder(f)</span><br><span class="line">	e.Encode(p)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="Golang-标准库encoding-xml"><a href="#Golang-标准库encoding-xml" class="headerlink" title="Golang 标准库encoding/xml"></a>Golang 标准库encoding/xml</h1><p>xml包实现xml解析</p>
<h2 id="核心的两个函数-1"><a href="#核心的两个函数-1" class="headerlink" title="核心的两个函数"></a>核心的两个函数</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Marshal</span><span class="params">(v <span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">([]<span class="keyword">byte</span>, error)</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>将struct编码成xml，可以接收任意类型</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Unmarshal</span><span class="params">(data []<span class="keyword">byte</span>, v <span class="keyword">interface</span>&#123;&#125;)</span> <span class="title">error</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>将xml转码成struct结构体</p>
</blockquote>
<h2 id="两个核心结构体-1"><a href="#两个核心结构体-1" class="headerlink" title="两个核心结构体"></a>两个核心结构体</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Decoder <span class="keyword">struct</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>从输入流读取并解析xml</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Encoder  <span class="keyword">struct</span> &#123;</span><br><span class="line">	<span class="comment">// contains filtered or unexported fields</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>写xml到输出流</p>
</blockquote>
<h2 id="实例演示-1"><a href="#实例演示-1" class="headerlink" title="实例演示"></a>实例演示</h2><p><strong>结构体转换为xml</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	XMLName xml.Name <span class="string">`xml:&quot;person&quot;`</span></span><br><span class="line">	Name    <span class="keyword">string</span>   <span class="string">`xml:&quot;name&quot;`</span></span><br><span class="line">	Age     <span class="keyword">int</span>      <span class="string">`xml:&quot;age&quot;`</span></span><br><span class="line">	Email   <span class="keyword">string</span>   <span class="string">`xml:&quot;email&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Marshal</span><span class="params">()</span></span> &#123;</span><br><span class="line">	p := Person&#123;</span><br><span class="line">		Name:  <span class="string">&quot;tom&quot;</span>,</span><br><span class="line">		Age:   <span class="number">20</span>,</span><br><span class="line">		Email: <span class="string">&quot;tom@gmail.com&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// b, _ := xml.Marshal(p)</span></span><br><span class="line">	<span class="comment">// 有缩进格式</span></span><br><span class="line">	b, _ := xml.MarshalIndent(p, <span class="string">&quot; &quot;</span>, <span class="string">&quot;  &quot;</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%v\n&quot;</span>, <span class="keyword">string</span>(b))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>也可以读写文件</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">read</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="comment">		&lt;person&gt;</span></span><br><span class="line"><span class="comment">		   &lt;name&gt;tom&lt;/name&gt;</span></span><br><span class="line"><span class="comment">		   &lt;age&gt;20&lt;/age&gt;</span></span><br><span class="line"><span class="comment">		   &lt;email&gt;tom@gmail.com&lt;/email&gt;</span></span><br><span class="line"><span class="comment">		&lt;/person&gt;</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	b, _ := ioutil.ReadFile(<span class="string">&quot;a.xml&quot;</span>)</span><br><span class="line">	<span class="keyword">var</span> p Person</span><br><span class="line">	xml.Unmarshal(b, &amp;p)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;p: %v\n&quot;</span>, p)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">write</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">		XMLName xml.Name <span class="string">`xml:&quot;person&quot;`</span></span><br><span class="line">		Name    <span class="keyword">string</span>   <span class="string">`xml:&quot;name&quot;`</span></span><br><span class="line">		Age     <span class="keyword">int</span>      <span class="string">`xml:&quot;age&quot;`</span></span><br><span class="line">		Email   <span class="keyword">string</span>   <span class="string">`xml:&quot;email&quot;`</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	p := Person&#123;</span><br><span class="line">		Name:  <span class="string">&quot;tom&quot;</span>,</span><br><span class="line">		Age:   <span class="number">20</span>,</span><br><span class="line">		Email: <span class="string">&quot;tom@gmail.com&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	f, _ := os.OpenFile(<span class="string">&quot;a.xml&quot;</span>, os.O_WRONLY, <span class="number">0777</span>)</span><br><span class="line">	<span class="keyword">defer</span> f.Close()</span><br><span class="line">	e := xml.NewEncoder(f)</span><br><span class="line">	e.Encode(p)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="Golang标准库math"><a href="#Golang标准库math" class="headerlink" title="Golang标准库math"></a>Golang标准库math</h1><p>该包包含一些常量和一些有用的数学计算函数，例如：三角函数、随机数、绝对值、平方根等。</p>
<h2 id="常量-1"><a href="#常量-1" class="headerlink" title="常量"></a>常量</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">fmt.Printf(<span class="string">&quot;float64的最大值是:%.f\n&quot;</span>, math.MaxFloat64)</span><br><span class="line">fmt.Printf(<span class="string">&quot;float64的最小值是:%.f\n&quot;</span>, math.SmallestNonzeroFloat64)</span><br><span class="line">fmt.Printf(<span class="string">&quot;float32的最大值是:%.f\n&quot;</span>, math.MaxFloat32)</span><br><span class="line">fmt.Printf(<span class="string">&quot;float32的最小值是:%.f\n&quot;</span>, math.SmallestNonzeroFloat32)</span><br><span class="line">fmt.Printf(<span class="string">&quot;Int8的最大值是:%d\n&quot;</span>, math.MaxInt8)</span><br><span class="line">fmt.Printf(<span class="string">&quot;Int8的最小值是:%d\n&quot;</span>, math.MinInt8)</span><br><span class="line">fmt.Printf(<span class="string">&quot;Uint8的最大值是:%d\n&quot;</span>, math.MaxUint8)</span><br><span class="line">fmt.Printf(<span class="string">&quot;Int16的最大值是:%d\n&quot;</span>, math.MaxInt16)</span><br><span class="line">fmt.Printf(<span class="string">&quot;Int16的最小值是:%d\n&quot;</span>, math.MinInt16)</span><br><span class="line">fmt.Printf(<span class="string">&quot;Uint16的最大值是:%d\n&quot;</span>, math.MaxUint16)</span><br><span class="line">fmt.Printf(<span class="string">&quot;Int32的最大值是:%d\n&quot;</span>, math.MaxInt32)</span><br><span class="line">fmt.Printf(<span class="string">&quot;Int32的最小值是:%d\n&quot;</span>, math.MinInt32)</span><br><span class="line">fmt.Printf(<span class="string">&quot;Uint32的最大值是:%d\n&quot;</span>, math.MaxUint32)</span><br><span class="line">fmt.Printf(<span class="string">&quot;Int64的最大值是:%d\n&quot;</span>, math.MaxInt64)</span><br><span class="line">fmt.Printf(<span class="string">&quot;Int64的最小值是:%d\n&quot;</span>, math.MinInt64)</span><br><span class="line">fmt.Printf(<span class="string">&quot;圆周率默认为:%.200f\n&quot;</span>, math.Pi)</span><br></pre></td></tr></table></figure>

<p><strong>运行结果</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">float64的最大值是:179769313486231570814527423731704356798070567525844996598917476803157260780028538760589558632766878171540458953514382464234321326889464182768467546703537516986049910576551282076245490090389328944075868508455133942304583236903222948165808559332123348274797826204144723168738177180919299881250404026184124858368</span><br><span class="line">float64的最小值是:0</span><br><span class="line">float32的最大值是:340282346638528859811704183484516925440</span><br><span class="line">float32的最小值是:0</span><br><span class="line">Int8的最大值是:127</span><br><span class="line">Int8的最小值是:-128</span><br><span class="line">Uint8的最大值是:255</span><br><span class="line">Int16的最大值是:32767</span><br><span class="line">Int16的最小值是:-32768</span><br><span class="line">Uint16的最大值是:65535</span><br><span class="line">Int32的最大值是:2147483647</span><br><span class="line">Int32的最小值是:-2147483648</span><br><span class="line">Uint32的最大值是:4294967295</span><br><span class="line">Int64的最大值是:9223372036854775807</span><br><span class="line">Int64的最小值是:-9223372036854775808</span><br><span class="line">圆周率默认为:3.14159265358979311599796346854418516159057617187500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</span><br></pre></td></tr></table></figure>

<h2 id="常用函数-2"><a href="#常用函数-2" class="headerlink" title="常用函数"></a>常用函数</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;math&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		取绝对值,函数签名如下:</span></span><br><span class="line"><span class="comment">		func Abs(x float64) float64</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;[-3.14]的绝对值为:[%.2f]\n&quot;</span>, math.Abs(<span class="number">-3.14</span>))</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		取x的y次方，函数签名如下:</span></span><br><span class="line"><span class="comment">		func Pow(x, y float64) float64</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;[2]的16次方为:[%.f]\n&quot;</span>, math.Pow(<span class="number">2</span>, <span class="number">16</span>))</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		取余数，函数签名如下:</span></span><br><span class="line"><span class="comment">		func Pow10(n int) float64</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;10的[3]次方为:[%.f]\n&quot;</span>, math.Pow10(<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		取x的开平方，函数签名如下:</span></span><br><span class="line"><span class="comment">		func Sqrt(x float64) float64</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;[64]的开平方为:[%.f]\n&quot;</span>, math.Sqrt(<span class="number">64</span>))</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		取x的开立方，函数签名如下:</span></span><br><span class="line"><span class="comment">		func Cbrt(x float64) float64</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;[27]的开立方为:[%.f]\n&quot;</span>, math.Cbrt(<span class="number">27</span>))</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		向上取整，函数签名如下:</span></span><br><span class="line"><span class="comment">		func Ceil(x float64) float64</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;[3.14]向上取整为:[%.f]\n&quot;</span>, math.Ceil(<span class="number">3.14</span>))</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		向下取整，函数签名如下:</span></span><br><span class="line"><span class="comment">		func Floor(x float64) float64</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;[8.75]向下取整为:[%.f]\n&quot;</span>, math.Floor(<span class="number">8.75</span>))</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		取余数，函数签名如下:</span></span><br><span class="line"><span class="comment">		func Floor(x float64) float64</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	fmt.Printf(<span class="string">&quot;[10/3]的余数为:[%.f]\n&quot;</span>, math.Mod(<span class="number">10</span>, <span class="number">3</span>))</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">		分别取整数和小数部分,函数签名如下:</span></span><br><span class="line"><span class="comment">		func Modf(f float64) (int float64, frac float64)</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	Integer, Decimal := math.Modf(<span class="number">3.14159265358979</span>)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;[3.14159265358979]的整数部分为:[%.f],小数部分为:[%.14f]\n&quot;</span>, Integer, Decimal)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="随机数"><a href="#随机数" class="headerlink" title="随机数"></a>随机数</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;math/rand&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//以时间作为初始化种子</span></span><br><span class="line">	rand.Seed(time.Now().UnixNano())</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		a := rand.Int()</span><br><span class="line">		fmt.Println(a)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;------------&quot;</span>)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		a := rand.Intn(<span class="number">100</span>)</span><br><span class="line">		fmt.Println(a)</span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;------------&quot;</span>)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">		a := rand.Float32()</span><br><span class="line">		fmt.Println(a)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>小白
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://19981115.xyz/posts/65019/" title="Golang学习笔记五-标准库">https://19981115.xyz/posts/65019/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

        

  <div class="followme">
    <p>欢迎关注我的其它发布渠道</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="https://twitter.com/LverBai">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">Twitter</span>
          </a>
        </div>

        <div class="social-item">
          <a target="_blank" class="social-link" href="https://t.me/lmbai">
            <span class="icon">
              <i class="fab fa-telegram"></i>
            </span>

            <span class="label">Telegram</span>
          </a>
        </div>

        <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
        </div>
    </div>
  </div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/Golang/" rel="tag"><i class="fa fa-tag"></i> Golang</a>
              <a href="/tags/%E6%A0%87%E5%87%86%E5%BA%93/" rel="tag"><i class="fa fa-tag"></i> 标准库</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/52141/" rel="prev" title="Golang学习笔记四-接口、Golang包和并发">
      <i class="fa fa-chevron-left"></i> Golang学习笔记四-接口、Golang包和并发
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/20493/" rel="next" title="Golang学习笔记六-操作MySQL和Mongodb">
      Golang学习笔记六-操作MySQL和Mongodb <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Golang%E6%A0%87%E5%87%86%E5%BA%93os%E6%A8%A1%E5%9D%97-%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%E7%9B%B8%E5%85%B3"><span class="nav-number">1.</span> <span class="nav-text">Golang标准库os模块-文件目录相关</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Golang%E6%A0%87%E5%87%86%E5%BA%93os%E6%A8%A1%E5%9D%97-File%E6%96%87%E4%BB%B6%E8%AF%BB%E6%93%8D%E4%BD%9C"><span class="nav-number">2.</span> <span class="nav-text">Golang标准库os模块-File文件读操作</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Golang%E6%A0%87%E5%87%86%E5%BA%93os%E6%A8%A1%E5%9D%97-File%E6%96%87%E4%BB%B6%E5%86%99%E6%93%8D%E4%BD%9C"><span class="nav-number">3.</span> <span class="nav-text">Golang标准库os模块-File文件写操作</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Golang%E6%A0%87%E5%87%86%E5%BA%93os%E5%8C%85%E8%BF%9B%E7%A8%8B%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C"><span class="nav-number">4.</span> <span class="nav-text">Golang标准库os包进程相关操作</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Golang%E6%A0%87%E5%87%86%E5%BA%93os%E5%8C%85%E5%92%8C%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">5.</span> <span class="nav-text">Golang标准库os包和环境相关的方法</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Golang%E6%A0%87%E5%87%86%E5%BA%93io%E5%8C%85"><span class="nav-number">6.</span> <span class="nav-text">Golang标准库io包</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#io-%E2%80%94-%E5%9F%BA%E6%9C%AC%E7%9A%84-IO-%E6%8E%A5%E5%8F%A3"><span class="nav-number">6.1.</span> <span class="nav-text">io — 基本的 IO 接口</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Reader-%E6%8E%A5%E5%8F%A3"><span class="nav-number">6.1.1.</span> <span class="nav-text">Reader 接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Writer-%E6%8E%A5%E5%8F%A3"><span class="nav-number">6.1.2.</span> <span class="nav-text">Writer 接口</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%82%A3%E4%BA%9B%E7%B1%BB%E5%9E%8B%E5%AE%9E%E7%8E%B0%E4%BA%86Reader%E5%92%8CWriter%E6%8E%A5%E5%8F%A3"><span class="nav-number">6.2.</span> <span class="nav-text">那些类型实现了Reader和Writer接口</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Golang%E6%A0%87%E5%87%86%E5%BA%93ioutil%E5%8C%85"><span class="nav-number">7.</span> <span class="nav-text">Golang标准库ioutil包</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Golang%E6%A0%87%E5%87%86%E5%BA%93fmt%E5%8C%85"><span class="nav-number">8.</span> <span class="nav-text">Golang标准库fmt包</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Scanning"><span class="nav-number">8.0.1.</span> <span class="nav-text">Scanning</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="nav-number">8.1.</span> <span class="nav-text">函数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Golang%E6%A0%87%E5%87%86%E5%BA%93bufio"><span class="nav-number">9.</span> <span class="nav-text">Golang标准库bufio</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#bufio"><span class="nav-number">9.0.1.</span> <span class="nav-text">bufio</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%B8%E9%87%8F"><span class="nav-number">9.0.1.1.</span> <span class="nav-text">常量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%98%E9%87%8F"><span class="nav-number">9.0.1.2.</span> <span class="nav-text">变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#type-Reader"><span class="nav-number">9.0.1.3.</span> <span class="nav-text">type Reader</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-NewReader"><span class="nav-number">9.0.1.4.</span> <span class="nav-text">func NewReader</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-NewReaderSize"><span class="nav-number">9.0.1.5.</span> <span class="nav-text">func NewReaderSize</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Reader-Reset-r-io-Reader"><span class="nav-number">9.0.1.6.</span> <span class="nav-text">func (*Reader)Reset(r io.Reader)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Reader-Read"><span class="nav-number">9.0.1.7.</span> <span class="nav-text">func (*Reader)Read</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Reader-ReadByte"><span class="nav-number">9.0.1.8.</span> <span class="nav-text">func (*Reader)ReadByte</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Reader-UnreadByte"><span class="nav-number">9.0.1.9.</span> <span class="nav-text">func (*Reader)UnreadByte</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Reader-ReadRune"><span class="nav-number">9.0.1.10.</span> <span class="nav-text">func (*Reader)ReadRune</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Reader-UnreadRune"><span class="nav-number">9.0.1.11.</span> <span class="nav-text">func (*Reader)UnreadRune</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Reader-ReadLine"><span class="nav-number">9.0.1.12.</span> <span class="nav-text">func (*Reader)ReadLine</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Reader-ReadSlice"><span class="nav-number">9.0.1.13.</span> <span class="nav-text">func (*Reader)ReadSlice</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Reader-ReadBytes"><span class="nav-number">9.0.1.14.</span> <span class="nav-text">func (*Reader)ReadBytes</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Reader-ReadString"><span class="nav-number">9.0.1.15.</span> <span class="nav-text">func (*Reader)ReadString</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Reader-WriteTo"><span class="nav-number">9.0.1.16.</span> <span class="nav-text">func (*Reader)WriteTo</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#type-Writer"><span class="nav-number">9.0.1.17.</span> <span class="nav-text">type Writer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-NewWriter"><span class="nav-number">9.0.1.18.</span> <span class="nav-text">func NewWriter</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-NewWriterSize"><span class="nav-number">9.0.1.19.</span> <span class="nav-text">func NewWriterSize</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Writer-Reset"><span class="nav-number">9.0.1.20.</span> <span class="nav-text">func (*Writer)Reset</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Writer-Bufferd"><span class="nav-number">9.0.1.21.</span> <span class="nav-text">func (*Writer)Bufferd</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Writer-Available"><span class="nav-number">9.0.1.22.</span> <span class="nav-text">func (*Writer)Available</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Writer-Write"><span class="nav-number">9.0.1.23.</span> <span class="nav-text">func (*Writer) Write</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Writer-WriteString"><span class="nav-number">9.0.1.24.</span> <span class="nav-text">func (*Writer) WriteString</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Writer-WriteByte"><span class="nav-number">9.0.1.25.</span> <span class="nav-text">func (*Writer) WriteByte</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Writer-WriteRune"><span class="nav-number">9.0.1.26.</span> <span class="nav-text">func (*Writer) WriteRune</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Writer-Flush"><span class="nav-number">9.0.1.27.</span> <span class="nav-text">func (*Writer) Flush</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Writer-ReadFrom"><span class="nav-number">9.0.1.28.</span> <span class="nav-text">func (*Writer) ReadFrom</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#type-ReadWriter"><span class="nav-number">9.0.2.</span> <span class="nav-text">type ReadWriter</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#func-NewReadWriter"><span class="nav-number">9.0.2.1.</span> <span class="nav-text">func NewReadWriter</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#type-SplitFunc"><span class="nav-number">9.0.3.</span> <span class="nav-text">type SplitFunc</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#func-ScanBytes"><span class="nav-number">9.0.4.</span> <span class="nav-text">func ScanBytes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#func-ScanRunes"><span class="nav-number">9.0.5.</span> <span class="nav-text">func ScanRunes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#func-ScanWords"><span class="nav-number">9.0.6.</span> <span class="nav-text">func ScanWords</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#func-ScanLines"><span class="nav-number">9.0.7.</span> <span class="nav-text">func ScanLines</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#type-Scanner"><span class="nav-number">9.0.8.</span> <span class="nav-text">type Scanner</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#func-NewScanner"><span class="nav-number">9.0.8.1.</span> <span class="nav-text">func NewScanner</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Scanner-Split"><span class="nav-number">9.0.8.2.</span> <span class="nav-text">func (*Scanner) Split</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Scanner-Scan"><span class="nav-number">9.0.8.3.</span> <span class="nav-text">func (*Scanner) Scan</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Scanner-Bytes"><span class="nav-number">9.0.8.4.</span> <span class="nav-text">func (*Scanner) Bytes</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Scanner-Text"><span class="nav-number">9.0.8.5.</span> <span class="nav-text">func (*Scanner) Text</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#func-Scanner-Err"><span class="nav-number">9.0.8.6.</span> <span class="nav-text">func (*Scanner) Err</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Golang%E6%A0%87%E5%87%86%E5%BA%93log"><span class="nav-number">10.</span> <span class="nav-text">Golang标准库log</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#log%E7%AE%80%E4%BB%8B"><span class="nav-number">10.1.</span> <span class="nav-text">log简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#log%E4%BD%BF%E7%94%A8"><span class="nav-number">10.2.</span> <span class="nav-text">log使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B"><span class="nav-number">10.2.1.</span> <span class="nav-text">实例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#log%E9%85%8D%E7%BD%AE"><span class="nav-number">11.</span> <span class="nav-text">log配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%87%E5%87%86log%E9%85%8D%E7%BD%AE"><span class="nav-number">11.0.1.</span> <span class="nav-text">标准log配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#flag%E5%8F%82%E6%95%B0"><span class="nav-number">11.0.1.1.</span> <span class="nav-text">flag参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%87%E5%87%86%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B"><span class="nav-number">11.0.1.2.</span> <span class="nav-text">标准日志配置示例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A5%E5%BF%97%E5%89%8D%E7%BC%80%E9%85%8D%E7%BD%AE"><span class="nav-number">11.0.2.</span> <span class="nav-text">日志前缀配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%A5%E5%BF%97%E5%89%8D%E7%BC%80%E9%85%8D%E7%BD%AE%E5%AE%9E%E4%BE%8B"><span class="nav-number">11.0.2.1.</span> <span class="nav-text">日志前缀配置实例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA%E4%BD%8D%E7%BD%AE%E9%85%8D%E7%BD%AE"><span class="nav-number">11.0.3.</span> <span class="nav-text">日志输出位置配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA%E4%BD%8D%E7%BD%AE%E9%85%8D%E7%BD%AE-1"><span class="nav-number">11.0.3.1.</span> <span class="nav-text">日志输出位置配置</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89logger"><span class="nav-number">11.0.4.</span> <span class="nav-text">自定义logger</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B"><span class="nav-number">11.0.4.1.</span> <span class="nav-text">示例</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Golang%E6%A0%87%E5%87%86%E5%BA%93builtin"><span class="nav-number">12.</span> <span class="nav-text">Golang标准库builtin</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0"><span class="nav-number">12.1.</span> <span class="nav-text">常用函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#append"><span class="nav-number">12.1.1.</span> <span class="nav-text">append</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-1"><span class="nav-number">12.1.2.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#len"><span class="nav-number">12.2.</span> <span class="nav-text">len</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-2"><span class="nav-number">12.2.1.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#print%E3%80%81println"><span class="nav-number">12.3.</span> <span class="nav-text">print、println</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-3"><span class="nav-number">12.3.1.</span> <span class="nav-text">实例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#panic"><span class="nav-number">12.3.2.</span> <span class="nav-text">panic</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-4"><span class="nav-number">12.3.3.</span> <span class="nav-text">实例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#new%E5%92%8Cmake"><span class="nav-number">12.3.4.</span> <span class="nav-text">new和make</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-5"><span class="nav-number">12.3.5.</span> <span class="nav-text">实例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Golang%E6%A0%87%E5%87%86%E5%BA%93bytes"><span class="nav-number">13.</span> <span class="nav-text">Golang标准库bytes</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0-1"><span class="nav-number">13.1.</span> <span class="nav-text">常用函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Buffer%E7%B1%BB%E5%9E%8B"><span class="nav-number">13.2.</span> <span class="nav-text">Buffer类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reader%E7%B1%BB%E5%9E%8B"><span class="nav-number">13.3.</span> <span class="nav-text">Reader类型</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Golang%E6%A0%87%E5%87%86%E5%BA%93errors"><span class="nav-number">14.</span> <span class="nav-text">Golang标准库errors</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#error-%E7%BB%93%E6%9E%84"><span class="nav-number">14.1.</span> <span class="nav-text">error 结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%94%99%E8%AF%AF"><span class="nav-number">14.2.</span> <span class="nav-text">自定义错误</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Golang%E6%A0%87%E5%87%86%E5%BA%93%E4%B8%AD%E7%9A%84sort%E5%8C%85"><span class="nav-number">15.</span> <span class="nav-text">Golang标准库中的sort包</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#sort%E5%8C%85%E7%9A%84%E5%86%85%E5%AE%B9%EF%BC%8C%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8"><span class="nav-number">15.1.</span> <span class="nav-text">sort包的内容，以及使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93"><span class="nav-number">15.2.</span> <span class="nav-text">结构体</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0-1"><span class="nav-number">15.3.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3-type-Interface"><span class="nav-number">15.3.1.</span> <span class="nav-text">接口 type Interface</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-6"><span class="nav-number">15.3.2.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93-1"><span class="nav-number">15.4.</span> <span class="nav-text">结构体</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%BC%E5%90%88%E5%AE%9E%E4%BE%8B"><span class="nav-number">15.5.</span> <span class="nav-text">综合实例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Golang%E6%A0%87%E5%87%86%E5%BA%93time"><span class="nav-number">16.</span> <span class="nav-text">Golang标准库time</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-number">16.1.</span> <span class="nav-text">基本使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%B6%E9%97%B4%E6%88%B3"><span class="nav-number">16.2.</span> <span class="nav-text">时间戳</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%B6%E9%97%B4%E6%88%B3%E8%BD%AC%E5%8C%96%E4%B8%BA%E6%99%AE%E9%80%9A%E7%9A%84%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F"><span class="nav-number">16.2.1.</span> <span class="nav-text">时间戳转化为普通的时间格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%93%8D%E4%BD%9C%E6%97%B6%E9%97%B4"><span class="nav-number">16.2.2.</span> <span class="nav-text">操作时间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ADD"><span class="nav-number">16.2.3.</span> <span class="nav-text">ADD</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sub"><span class="nav-number">16.2.4.</span> <span class="nav-text">Sub</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Equal"><span class="nav-number">16.2.5.</span> <span class="nav-text">Equal</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Before"><span class="nav-number">16.2.6.</span> <span class="nav-text">Before</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#After"><span class="nav-number">16.2.7.</span> <span class="nav-text">After</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="nav-number">16.2.8.</span> <span class="nav-text">定时器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="nav-number">16.2.9.</span> <span class="nav-text">时间格式化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E6%9E%90%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E7%9A%84%E6%97%B6%E9%97%B4"><span class="nav-number">16.2.10.</span> <span class="nav-text">解析字符串格式的时间</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Golang-%E6%A0%87%E5%87%86%E5%BA%93encoding-json"><span class="nav-number">17.</span> <span class="nav-text">Golang 标准库encoding&#x2F;json</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E7%9A%84%E4%B8%A4%E4%B8%AA%E5%87%BD%E6%95%B0"><span class="nav-number">17.1.</span> <span class="nav-text">核心的两个函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%A4%E4%B8%AA%E6%A0%B8%E5%BF%83%E7%BB%93%E6%9E%84%E4%BD%93"><span class="nav-number">17.2.</span> <span class="nav-text">两个核心结构体</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B%E6%BC%94%E7%A4%BA"><span class="nav-number">17.3.</span> <span class="nav-text">实例演示</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Golang-%E6%A0%87%E5%87%86%E5%BA%93encoding-xml"><span class="nav-number">18.</span> <span class="nav-text">Golang 标准库encoding&#x2F;xml</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E7%9A%84%E4%B8%A4%E4%B8%AA%E5%87%BD%E6%95%B0-1"><span class="nav-number">18.1.</span> <span class="nav-text">核心的两个函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%A4%E4%B8%AA%E6%A0%B8%E5%BF%83%E7%BB%93%E6%9E%84%E4%BD%93-1"><span class="nav-number">18.2.</span> <span class="nav-text">两个核心结构体</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B%E6%BC%94%E7%A4%BA-1"><span class="nav-number">18.3.</span> <span class="nav-text">实例演示</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Golang%E6%A0%87%E5%87%86%E5%BA%93math"><span class="nav-number">19.</span> <span class="nav-text">Golang标准库math</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E9%87%8F-1"><span class="nav-number">19.1.</span> <span class="nav-text">常量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0-2"><span class="nav-number">19.2.</span> <span class="nav-text">常用函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9A%8F%E6%9C%BA%E6%95%B0"><span class="nav-number">19.3.</span> <span class="nav-text">随机数</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="小白"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">小白</p>
  <div class="site-description" itemprop="description">随言笔记，胡乱编写</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">31</span>
          <span class="site-state-item-name">笔记</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">64</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/lovebai" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;lovebai" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:kuxiaoju@gmail.com" title="E-Mail → mailto:kuxiaoju@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">小白</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
      <!--<script src="https://cdn.jsdelivr.net/gh/lovebai/live2d-widget@master/autoload.js"></script>-->
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/js/local-search.js"></script>









<script data-pjax>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>




    <div id="pjax">
  

  

    </div>
</body>
</html>
