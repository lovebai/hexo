<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"19981115.xyz","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Golang http 标准库http 标准库了 http 客户端和服务器的实现，注意了，客户端实现可以发出 http 请求，并解析响应。服务器可以实现 http server 功能。市面上的所有 golang web 框架都是基于 http 标准库实现的。">
<meta property="og:type" content="article">
<meta property="og:title" content="Golang-WEB开发-笔记">
<meta property="og:url" content="https://19981115.xyz/posts/45355/index.html">
<meta property="og:site_name" content="MY-Notes">
<meta property="og:description" content="Golang http 标准库http 标准库了 http 客户端和服务器的实现，注意了，客户端实现可以发出 http 请求，并解析响应。服务器可以实现 http server 功能。市面上的所有 golang web 框架都是基于 http 标准库实现的。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-01-25T16:01:55.000Z">
<meta property="article:modified_time" content="2022-03-10T05:49:41.208Z">
<meta property="article:author" content="小白">
<meta property="article:tag" content="WEB">
<meta property="article:tag" content="Golang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://19981115.xyz/posts/45355/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Golang-WEB开发-笔记 | MY-Notes</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="MY-Notes" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">MY-Notes</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">MY Quick Notes</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://19981115.xyz/posts/45355/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="小白">
      <meta itemprop="description" content="随言笔记，胡乱编写">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MY-Notes">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Golang-WEB开发-笔记
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-01-26 00:01:55" itemprop="dateCreated datePublished" datetime="2022-01-26T00:01:55+08:00">2022-01-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-10 13:49:41" itemprop="dateModified" datetime="2022-03-10T13:49:41+08:00">2022-03-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Golang-http-标准库"><a href="#Golang-http-标准库" class="headerlink" title="Golang http 标准库"></a>Golang http 标准库</h1><p>http 标准库了 http 客户端和服务器的实现，注意了，客户端实现可以发出 http 请求，并解析响应。服务器可以实现 http server 功能。市面上的所有 golang web 框架都是基于 http 标准库实现的。</p>
<span id="more"></span>

<h2 id="http-标准库客户端功能"><a href="#http-标准库客户端功能" class="headerlink" title="http 标准库客户端功能"></a>http 标准库客户端功能</h2><h3 id="发出-GET-请求"><a href="#发出-GET-请求" class="headerlink" title="发出 GET 请求"></a>发出 GET 请求</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">	<span class="string">&quot;net/url&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testGet</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// https://www.juhe.cn/box/index/id/73</span></span><br><span class="line">	url := <span class="string">&quot;http://apis.juhe.cn/simpleWeather/query?key=087d7d10f700d20e27bb753cd806e40b&amp;city=北京&quot;</span></span><br><span class="line">	r, err := http.Get(url)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> r.Body.Close()</span><br><span class="line">	b, _ := ioutil.ReadAll(r.Body)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;b: %v\n&quot;</span>, <span class="keyword">string</span>(b))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>运行结果</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;reason&quot;</span>: <span class="string">&quot;查询成功!&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;result&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;city&quot;</span>: <span class="string">&quot;北京&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;realtime&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;temperature&quot;</span>: <span class="string">&quot;3&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;humidity&quot;</span>: <span class="string">&quot;94&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;info&quot;</span>: <span class="string">&quot;阴&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;wid&quot;</span>: <span class="string">&quot;02&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;direct&quot;</span>: <span class="string">&quot;东北风&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;power&quot;</span>: <span class="string">&quot;2级&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;aqi&quot;</span>: <span class="string">&quot;117&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;future&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;date&quot;</span>: <span class="string">&quot;2021-12-09&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;temperature&quot;</span>: <span class="string">&quot;-1/7℃&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;weather&quot;</span>: <span class="string">&quot;多云转晴&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;wid&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;day&quot;</span>: <span class="string">&quot;01&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;night&quot;</span>: <span class="string">&quot;00&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;direct&quot;</span>: <span class="string">&quot;北风&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;date&quot;</span>: <span class="string">&quot;2021-12-10&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;temperature&quot;</span>: <span class="string">&quot;-1/8℃&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;weather&quot;</span>: <span class="string">&quot;多云&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;wid&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;day&quot;</span>: <span class="string">&quot;01&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;night&quot;</span>: <span class="string">&quot;01&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;direct&quot;</span>: <span class="string">&quot;北风转西南风&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;date&quot;</span>: <span class="string">&quot;2021-12-11&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;temperature&quot;</span>: <span class="string">&quot;-2/10℃&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;weather&quot;</span>: <span class="string">&quot;多云转晴&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;wid&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;day&quot;</span>: <span class="string">&quot;01&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;night&quot;</span>: <span class="string">&quot;00&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;direct&quot;</span>: <span class="string">&quot;北风&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;date&quot;</span>: <span class="string">&quot;2021-12-12&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;temperature&quot;</span>: <span class="string">&quot;-5/4℃&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;weather&quot;</span>: <span class="string">&quot;晴&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;wid&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;day&quot;</span>: <span class="string">&quot;00&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;night&quot;</span>: <span class="string">&quot;00&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;direct&quot;</span>: <span class="string">&quot;西北风转西南风&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;date&quot;</span>: <span class="string">&quot;2021-12-13&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;temperature&quot;</span>: <span class="string">&quot;-6/5℃&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;weather&quot;</span>: <span class="string">&quot;晴&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;wid&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;day&quot;</span>: <span class="string">&quot;00&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;night&quot;</span>: <span class="string">&quot;00&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;direct&quot;</span>: <span class="string">&quot;西南风&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;error_code&quot;</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>本实例我们使用到了：<a target="_blank" rel="noopener" href="https://www.juhe.cn/box/index/id/73">https://www.juhe.cn/box/index/id/73</a> 天气查询 api</p>
</blockquote>
<h3 id="GET-请求，把一些参数做成变量而不是直接放到-url"><a href="#GET-请求，把一些参数做成变量而不是直接放到-url" class="headerlink" title="GET 请求，把一些参数做成变量而不是直接放到 url"></a>GET 请求，把一些参数做成变量而不是直接放到 url</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testGet2</span><span class="params">()</span></span> &#123;</span><br><span class="line">	params := url.Values&#123;&#125;</span><br><span class="line">	Url, err := url.Parse(<span class="string">&quot;http://apis.juhe.cn/simpleWeather/query&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	params.Set(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;087d7d10f700d20e27bb753cd806e40b&quot;</span>)</span><br><span class="line">	params.Set(<span class="string">&quot;city&quot;</span>, <span class="string">&quot;北京&quot;</span>)</span><br><span class="line">	<span class="comment">//如果参数中有中文参数,这个方法会进行URLEncode</span></span><br><span class="line">	Url.RawQuery = params.Encode()</span><br><span class="line">	urlPath := Url.String()</span><br><span class="line">	fmt.Println(urlPath)</span><br><span class="line">	resp, err := http.Get(urlPath)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line">	body, _ := ioutil.ReadAll(resp.Body)</span><br><span class="line">	fmt.Println(<span class="keyword">string</span>(body))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="解析-JSON-类型的返回结果"><a href="#解析-JSON-类型的返回结果" class="headerlink" title="解析 JSON 类型的返回结果"></a>解析 JSON 类型的返回结果</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">	<span class="string">&quot;net/url&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testParseJson</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">type</span> result <span class="keyword">struct</span> &#123;</span><br><span class="line">		Args    <span class="keyword">string</span>            <span class="string">`json:&quot;args&quot;`</span></span><br><span class="line">		Headers <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span> <span class="string">`json:&quot;headers&quot;`</span></span><br><span class="line">		Origin  <span class="keyword">string</span>            <span class="string">`json:&quot;origin&quot;`</span></span><br><span class="line">		Url     <span class="keyword">string</span>            <span class="string">`json:&quot;url&quot;`</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	resp, err := http.Get(<span class="string">&quot;http://httpbin.org/get&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line">	body, _ := ioutil.ReadAll(resp.Body)</span><br><span class="line">	fmt.Println(<span class="keyword">string</span>(body))</span><br><span class="line">	<span class="keyword">var</span> res result</span><br><span class="line">	_ = json.Unmarshal(body, &amp;res)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;%#v&quot;</span>, res)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>运行结果</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;args&quot;</span>: &#123;&#125;,</span><br><span class="line">  <span class="string">&quot;headers&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;Accept-Encoding&quot;</span>: <span class="string">&quot;gzip&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Host&quot;</span>: <span class="string">&quot;httpbin.org&quot;</span>,</span><br><span class="line">    <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Go-http-client/1.1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;X-Amzn-Trace-Id&quot;</span>: <span class="string">&quot;Root=1-61b16029-731c99ba4591c9bd3db53edd&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;origin&quot;</span>: <span class="string">&quot;115.171.25.28&quot;</span>,</span><br><span class="line">  <span class="string">&quot;url&quot;</span>: <span class="string">&quot;http://httpbin.org/get&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main.result&#123;Args:<span class="string">&quot;&quot;</span>, Headers:<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;<span class="string">&quot;Accept-Encoding&quot;</span>:<span class="string">&quot;gzip&quot;</span>, <span class="string">&quot;Host&quot;</span>:<span class="string">&quot;httpbin.org&quot;</span>, <span class="string">&quot;User-Agent&quot;</span>:<span class="string">&quot;Go-http-client/1.1&quot;</span>, <span class="string">&quot;X-Amzn-Trace-Id&quot;</span>:<span class="string">&quot;Root=1-61b16029-731c99ba4591c9bd3db53edd&quot;</span>&#125;, Origin:<span class="string">&quot;115.171.25.28&quot;</span>, Url:<span class="string">&quot;http://httpbin.org/get&quot;</span>&#125;</span><br></pre></td></tr></table></figure>

<h3 id="GET-请求添加请求头"><a href="#GET-请求添加请求头" class="headerlink" title="GET 请求添加请求头"></a>GET 请求添加请求头</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">	<span class="string">&quot;net/url&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testAddHeader</span><span class="params">()</span></span> &#123;</span><br><span class="line">	client := &amp;http.Client&#123;&#125;</span><br><span class="line">	req, _ := http.NewRequest(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;http://httpbin.org/get&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">	req.Header.Add(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;老郭&quot;</span>)</span><br><span class="line">	req.Header.Add(<span class="string">&quot;age&quot;</span>, <span class="string">&quot;80&quot;</span>)</span><br><span class="line">	resp, _ := client.Do(req)</span><br><span class="line">	body, _ := ioutil.ReadAll(resp.Body)</span><br><span class="line">	fmt.Printf(<span class="keyword">string</span>(body))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>运行结果</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;args&quot;</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">&quot;headers&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;Accept-Encoding&quot;</span>: <span class="string">&quot;gzip&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;Age&quot;</span>: <span class="string">&quot;3&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;Host&quot;</span>: <span class="string">&quot;httpbin.org&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;Name&quot;</span>: <span class="string">&quot;zhaofan&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;User-Agent&quot;</span>: <span class="string">&quot;Go-http-client/1.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;X-Amzn-Trace-Id&quot;</span>: <span class="string">&quot;Root=1-61b16107-5814e133649862c20ab1c26f&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;origin&quot;</span>: <span class="string">&quot;115.171.25.28&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;http://httpbin.org/get&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="发出-POST-请求"><a href="#发出-POST-请求" class="headerlink" title="发出 POST 请求"></a>发出 POST 请求</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testPost</span><span class="params">()</span></span> &#123;</span><br><span class="line">	path := <span class="string">&quot;http://apis.juhe.cn/simpleWeather/query&quot;</span></span><br><span class="line">	urlValues := url.Values&#123;&#125;</span><br><span class="line">	urlValues.Add(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;087d7d10f700d20e27bb753cd806e40b&quot;</span>)</span><br><span class="line">	urlValues.Add(<span class="string">&quot;city&quot;</span>, <span class="string">&quot;北京&quot;</span>)</span><br><span class="line">	r, err := http.PostForm(path, urlValues)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> r.Body.Close()</span><br><span class="line">	b, _ := ioutil.ReadAll(r.Body)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;b: %v\n&quot;</span>, <span class="keyword">string</span>(b))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>另外一种方式</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testPost2</span><span class="params">()</span></span> &#123;</span><br><span class="line">	urlValues := url.Values&#123;</span><br><span class="line">		<span class="string">&quot;name&quot;</span>: &#123;<span class="string">&quot;老郭&quot;</span>&#125;,</span><br><span class="line">		<span class="string">&quot;age&quot;</span>:  &#123;<span class="string">&quot;80&quot;</span>&#125;,</span><br><span class="line">	&#125;</span><br><span class="line">	reqBody := urlValues.Encode()</span><br><span class="line">	resp, _ := http.Post(<span class="string">&quot;http://httpbin.org/post&quot;</span>, <span class="string">&quot;text/html&quot;</span>, strings.NewReader(reqBody))</span><br><span class="line">	body, _ := ioutil.ReadAll(resp.Body)</span><br><span class="line">	fmt.Println(<span class="keyword">string</span>(body))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="发送-JSON-数据的-post-请求"><a href="#发送-JSON-数据的-post-请求" class="headerlink" title="发送 JSON 数据的 post 请求"></a>发送 JSON 数据的 post 请求</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testPostJson</span><span class="params">()</span></span> &#123;</span><br><span class="line">	data := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line">	data[<span class="string">&quot;site&quot;</span>] = <span class="string">&quot;www.duoke360.com&quot;</span></span><br><span class="line">	data[<span class="string">&quot;name&quot;</span>] = <span class="string">&quot;多课网&quot;</span></span><br><span class="line">	bytesData, _ := json.Marshal(data)</span><br><span class="line">	resp, _ := http.Post(<span class="string">&quot;http://httpbin.org/post&quot;</span>, <span class="string">&quot;application/json&quot;</span>, bytes.NewReader(bytesData))</span><br><span class="line">	body, _ := ioutil.ReadAll(resp.Body)</span><br><span class="line">	fmt.Println(<span class="keyword">string</span>(body))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用-Client-自定义请求"><a href="#使用-Client-自定义请求" class="headerlink" title="使用 Client 自定义请求"></a>使用 Client 自定义请求</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testClient</span><span class="params">()</span></span> &#123;</span><br><span class="line">	client := http.Client&#123;</span><br><span class="line">		Timeout: time.Second * <span class="number">5</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	url := <span class="string">&quot;http://apis.juhe.cn/simpleWeather/query?key=087d7d10f700d20e27bb753cd806e40b&amp;city=北京&quot;</span></span><br><span class="line">	req, err := http.NewRequest(http.MethodGet, url, <span class="literal">nil</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">	req.Header.Add(<span class="string">&quot;referer&quot;</span>, <span class="string">&quot;http://apis.juhe.cn/&quot;</span>)</span><br><span class="line">	res, err2 := client.Do(req)</span><br><span class="line">	<span class="keyword">if</span> err2 != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err2)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> res.Body.Close()</span><br><span class="line">	b, _ := ioutil.ReadAll(res.Body)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;b: %v\n&quot;</span>, <span class="keyword">string</span>(b))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="HTTP-Server"><a href="#HTTP-Server" class="headerlink" title="HTTP Server"></a>HTTP Server</h2><p>使用 golang 实现一个 http server 非常简单，代码如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testHttpServer</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 请求处理函数</span></span><br><span class="line">	f := <span class="function"><span class="keyword">func</span><span class="params">(resp http.ResponseWriter, req *http.Request)</span></span> &#123;</span><br><span class="line">		io.WriteString(resp, <span class="string">&quot;hello world&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 响应路径,注意前面要有斜杠 /</span></span><br><span class="line">	http.HandleFunc(<span class="string">&quot;/hello&quot;</span>, f)</span><br><span class="line">	<span class="comment">// 设置监听端口，并监听，注意前面要有冒号:</span></span><br><span class="line">	err := http.ListenAndServe(<span class="string">&quot;:9999&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在浏览器输入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:9999/hello</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello world</span><br></pre></td></tr></table></figure>

<h3 id="使用-Handler-实现并发处理"><a href="#使用-Handler-实现并发处理" class="headerlink" title="使用 Handler 实现并发处理"></a>使用 Handler 实现并发处理</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> countHandler <span class="keyword">struct</span> &#123;</span><br><span class="line">	mu sync.Mutex <span class="comment">// guards n</span></span><br><span class="line">	n  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(h *countHandler)</span> <span class="title">ServeHTTP</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">	h.mu.Lock()</span><br><span class="line">	<span class="keyword">defer</span> h.mu.Unlock()</span><br><span class="line">	h.n++</span><br><span class="line">	fmt.Fprintf(w, <span class="string">&quot;count is %d\n&quot;</span>, h.n)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testHttpServer2</span><span class="params">()</span></span> &#123;</span><br><span class="line">	http.Handle(<span class="string">&quot;/count&quot;</span>, <span class="built_in">new</span>(countHandler))</span><br><span class="line">	log.Fatal(http.ListenAndServe(<span class="string">&quot;:8080&quot;</span>, <span class="literal">nil</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在浏览器输入：<code>http://localhost:8080/count</code>，刷新查看结果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">count is 8</span><br></pre></td></tr></table></figure>

<h1 id="Golang-标准库-template"><a href="#Golang-标准库-template" class="headerlink" title="Golang 标准库 template"></a>Golang 标准库 template</h1><p>templates 包定义了数据驱动的文本输出。生成 html 文件的模板在 <code>html/template</code>包下面。模板使用插值语法 <code>&#123;&#123;.var&#125;&#125;</code>格式，也可以使用一些流程控制，例如判断 <code>if else</code>、循环 <code>range</code>还可以使用一些函数，包括内建函数和自定义函数。</p>
<h2 id="第一个模板实例"><a href="#第一个模板实例" class="headerlink" title="第一个模板实例"></a>第一个模板实例</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;text/template&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">//数据</span></span><br><span class="line">	name := <span class="string">&quot;ghz&quot;</span></span><br><span class="line">	<span class="comment">//定义模板</span></span><br><span class="line">	muban := <span class="string">&quot;hello, &#123;&#123;.&#125;&#125;&quot;</span></span><br><span class="line">	<span class="comment">//解析模板</span></span><br><span class="line">	tmpl, err := template.New(<span class="string">&quot;test&quot;</span>).Parse(muban)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//执行模板，输出到终端</span></span><br><span class="line">	err = tmpl.Execute(os.Stdout, name)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>运行结果</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello, ghz</span><br></pre></td></tr></table></figure>

<h2 id="也可以是结构体"><a href="#也可以是结构体" class="headerlink" title="也可以是结构体"></a>也可以是结构体</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;text/template&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">	Age  <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ghz := Person&#123;<span class="string">&quot;ghz&quot;</span>, <span class="number">80</span>&#125;</span><br><span class="line">	muban := <span class="string">&quot;hello, &#123;&#123;.Name&#125;&#125;, Your age &#123;&#123;.Age&#125;&#125;&quot;</span></span><br><span class="line">	tmpl, err := template.New(<span class="string">&quot;test&quot;</span>).Parse(muban)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	err = tmpl.Execute(os.Stdout, ghz)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>运行结果</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello, ghz, Your age 80</span><br></pre></td></tr></table></figure>

<h2 id="html-模板"><a href="#html-模板" class="headerlink" title="html 模板"></a>html 模板</h2><p><strong>定义一个 HTML 文件</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Test golang template<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    &#123;&#123;.&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>定义一个 HttpServer</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;html/template&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tmpl</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">	t1, err := template.ParseFiles(<span class="string">&quot;test.html&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	t1.Execute(w, <span class="string">&quot;hello world&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	server := http.Server&#123;</span><br><span class="line">		Addr: <span class="string">&quot;127.0.0.1:8080&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	http.HandleFunc(<span class="string">&quot;/tmpl&quot;</span>, tmpl)</span><br><span class="line">	server.ListenAndServe()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>客户端访问</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/tmpl</span><br></pre></td></tr></table></figure>

<p><strong>运行结果</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello，ghz</span><br></pre></td></tr></table></figure>

<h2 id="文本和空格"><a href="#文本和空格" class="headerlink" title="文本和空格"></a>文本和空格</h2><p>模板引擎在进行替换的时候，是完全按照文本格式进行替换的。除了需要评估和替换的地方，所有的行分隔符、空格等等空白都原样保留。所以，<strong>对于要解析的内容，不要随意缩进、随意换行</strong> 。</p>
<p><strong>例如：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;<span class="number">23</span>&#125;&#125; &lt; &#123;&#123;<span class="number">45</span>&#125;&#125;        -&gt; <span class="number">23</span> &lt; <span class="number">45</span></span><br><span class="line">&#123;&#123;<span class="number">23</span>&#125;&#125; &lt; &#123;&#123;- <span class="number">45</span>&#125;&#125;      -&gt;  <span class="number">23</span> &lt;<span class="number">45</span></span><br><span class="line">&#123;&#123;<span class="number">23</span> -&#125;&#125; &lt; &#123;&#123;<span class="number">45</span>&#125;&#125;      -&gt;  <span class="number">23</span>&lt; <span class="number">45</span></span><br><span class="line">&#123;&#123;<span class="number">23</span> -&#125;&#125; &lt; &#123;&#123;- <span class="number">45</span>&#125;&#125;    -&gt;  <span class="number">23</span>&lt;<span class="number">45</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>去掉后空格 <code>xxxx -&#125;&#125;</code>，去掉前空格 <code>&#123;&#123;- xxxx`

## 模板注释

注释方式：`&#123;&#123;/* a comment */&#125;&#125;</code>。</p>
</blockquote>
<p>注释后的内容不会被引擎进行替换。但需要注意，注释行在替换的时候也会占用行，所以应该去除前缀和后缀空白，否则会多一空行。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;- <span class="comment">/* a comment without prefix/suffix space */</span>&#125;&#125;</span><br><span class="line">&#123;&#123;<span class="comment">/* a comment without prefix/suffix space */</span> -&#125;&#125;</span><br><span class="line">&#123;&#123;- <span class="comment">/* a comment without prefix/suffix space */</span> -&#125;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="管道-pipeline"><a href="#管道-pipeline" class="headerlink" title="管道 pipeline"></a>管道 pipeline</h2><p>管道就是一系列命令的链式调用。当然，也可以是一个命令，例如：计算表达式的值 <code>&#123;&#123;.&#125;&#125;</code>、<code>&#123;&#123;.Name&#125;&#125;</code>,或者是一个函数调用或者方法调用。</p>
<p>可以使用管道符号 <code>|</code>链接多个命令，用法和 unix 下的管道类似：<code>|</code>前面的命令将运算结果(或返回值)传递给后一个命令的最后一个位置。</p>
<blockquote>
<p>需要注意的是，并非只有使用了 <code>|</code>才是 pipeline。Go template 中，pipeline 的概念是传递数据，只要能产生数据的，都是 pipeline。</p>
</blockquote>
<p>下面是 Pipeline 的几种示例，它们都输出 <code>&quot;output&quot;</code>：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;<span class="string">`&quot;output&quot;`</span>&#125;&#125;</span><br><span class="line">&#123;&#123;printf <span class="string">&quot;%q&quot;</span> <span class="string">&quot;output&quot;</span>&#125;&#125;</span><br><span class="line">&#123;&#123;<span class="string">&quot;output&quot;</span> | printf <span class="string">&quot;%q&quot;</span>&#125;&#125;</span><br><span class="line">&#123;&#123;printf <span class="string">&quot;%q&quot;</span> (<span class="built_in">print</span> <span class="string">&quot;out&quot;</span> <span class="string">&quot;put&quot;</span>)&#125;&#125;</span><br><span class="line">&#123;&#123;<span class="string">&quot;put&quot;</span> | printf <span class="string">&quot;%s%s&quot;</span> <span class="string">&quot;out&quot;</span> | printf <span class="string">&quot;%q&quot;</span>&#125;&#125;</span><br><span class="line">&#123;&#123;<span class="string">&quot;output&quot;</span> | printf <span class="string">&quot;%s&quot;</span> | printf <span class="string">&quot;%q&quot;</span>&#125;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>可以在 HTML 中测试</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Test golang template<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    &#123;&#123;`&quot;output&quot;`&#125;&#125; <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    &#123;&#123;printf &quot;%q&quot; &quot;output&quot;&#125;&#125;<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    &#123;&#123;&quot;output&quot; | printf &quot;%q&quot;&#125;&#125;<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    &#123;&#123;printf &quot;%q&quot; (print &quot;out&quot; &quot;put&quot;)&#125;&#125;<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    &#123;&#123;&quot;put&quot; | printf &quot;%s%s&quot; &quot;out&quot; | printf &quot;%q&quot;&#125;&#125;<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    &#123;&#123;&quot;output&quot; | printf &quot;%s&quot; | printf &quot;%q&quot;&#125;&#125;<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>运行结果</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;output&quot;</span></span><br><span class="line"><span class="string">&quot;output&quot;</span></span><br><span class="line"><span class="string">&quot;output&quot;</span></span><br><span class="line"><span class="string">&quot;output&quot;</span></span><br><span class="line"><span class="string">&quot;output&quot;</span></span><br><span class="line"><span class="string">&quot;output&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p><strong>变量的语法</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 未定义过的变量</span></span><br><span class="line">$<span class="keyword">var</span> := pipeline</span><br><span class="line"><span class="comment">// 已定义过的变量</span></span><br><span class="line">$<span class="keyword">var</span> = pipeline</span><br></pre></td></tr></table></figure>

<p><strong>例如</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Test golang template&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &#123;&#123;$Name := <span class="string">&quot;tom&quot;</span>&#125;&#125;</span><br><span class="line">    &#123;&#123;$Name = <span class="string">&quot;kite&quot;</span>&#125;&#125;</span><br><span class="line">    &#123;&#123;$Name&#125;&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">    &#123;&#123;$<span class="built_in">len</span> := (<span class="built_in">len</span> <span class="string">&quot;hello,ghz&quot;</span>)&#125;&#125;</span><br><span class="line"></span><br><span class="line">    &#123;&#123;$<span class="built_in">len</span>&#125;&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><strong>运行结果</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kite</span><br><span class="line">9</span><br></pre></td></tr></table></figure>

<h2 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h2><p><strong>语法</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;if pipeline&#125;&#125; T1 &#123;&#123;end&#125;&#125;</span><br><span class="line">&#123;&#123;if pipeline&#125;&#125; T1 &#123;&#123;else&#125;&#125; T0 &#123;&#123;end&#125;&#125;</span><br><span class="line">&#123;&#123;if pipeline&#125;&#125; T1 &#123;&#123;else if pipeline&#125;&#125; T0 &#123;&#123;end&#125;&#125;</span><br><span class="line">&#123;&#123;if pipeline&#125;&#125; T1 &#123;&#123;else&#125;&#125;&#123;&#123;if pipeline&#125;&#125; T0 &#123;&#123;end&#125;&#125;&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>pipeline 为 false 的情况是各种数据对象的 0 值：数值 0，指针或接口是 nil，数组、slice、map 或 string 则是 len 为 0。</p>
</blockquote>
<p>可以使用如下运算符表达式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">eq</span><br><span class="line">	Returns the boolean truth of arg1 == arg2</span><br><span class="line">ne</span><br><span class="line">	Returns the boolean truth of arg1 != arg2</span><br><span class="line">lt</span><br><span class="line">	Returns the boolean truth of arg1 &lt; arg2</span><br><span class="line">le</span><br><span class="line">	Returns the boolean truth of arg1 &lt;= arg2</span><br><span class="line">gt</span><br><span class="line">	Returns the boolean truth of arg1 &gt; arg2</span><br><span class="line">ge</span><br><span class="line">	Returns the boolean truth of arg1 &gt;= arg2</span><br></pre></td></tr></table></figure>

<p><strong>实例</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Test golang template<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    &#123;&#123;$Age := 18&#125;&#125; &#123;&#123;if (ge $Age 18)&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>你已经成年！<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    &#123;&#123;else&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>你还未成年！<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    &#123;&#123;end&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>运行结果</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">你已经成年！</span><br></pre></td></tr></table></figure>

<h2 id="循环迭代"><a href="#循环迭代" class="headerlink" title="循环迭代"></a>循环迭代</h2><p><strong>语法</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;<span class="keyword">range</span> pipeline&#125;&#125; T1 &#123;&#123;end&#125;&#125;</span><br><span class="line">&#123;&#123;<span class="keyword">range</span> pipeline&#125;&#125; T1 &#123;&#123;<span class="keyword">else</span>&#125;&#125; T0 &#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>range 可以迭代 slice、数组、map 或 channel。迭代的时候，会设置”.”为当前正在迭代的元素。对于第一个表达式，当迭代对象的值为 0 值时，则 range 直接跳过，就像 if 一样。对于第二个表达式，则在迭代到 0 值时执行 else 语句。</p>
</blockquote>
<p><strong>实例演示</strong></p>
<p>go 代码</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tmpl</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">	t1, err := template.ParseFiles(<span class="string">&quot;test.html&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	s := []<span class="keyword">string</span>&#123;<span class="string">&quot;多课网&quot;</span>, <span class="string">&quot;golang 教程&quot;</span>, <span class="string">&quot;老郭&quot;</span>&#125;</span><br><span class="line">	t1.Execute(w, s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Test golang template<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    &#123;&#123;range $x := . -&#125;&#125; &#123;&#123;println $x&#125;&#125; &#123;&#123;- end&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>运行结果</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">多课网 golang 教程 老郭</span><br></pre></td></tr></table></figure>

<h2 id="with…end"><a href="#with…end" class="headerlink" title="with…end"></a>with…end</h2><p>with 用来设置 <code>&quot;.&quot;</code>的值，语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;with pipeline&#125;&#125; T1 &#123;&#123;end&#125;&#125;</span><br><span class="line">&#123;&#123;with pipeline&#125;&#125; T1 &#123;&#123;else&#125;&#125; T0 &#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>对于第一种格式，当 pipeline 不为 0 值的时候，点”.”设置为 pipeline 运算的值，否则跳过。对于第二种格式，当 pipeline 为 0 值时，执行 else 语句块，否则”.”设置为 pipeline 运算的值，并执行 T1。</p>
</blockquote>
<p><strong>实例演示</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;with &quot;多课网-golang-老郭&quot;&#125;&#125;&#123;&#123;println .&#125;&#125;&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>运行结果</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">多课网-golang-老郭</span><br></pre></td></tr></table></figure>

<h2 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">and</span><br><span class="line">	返回第</span><br><span class="line">	一个空参数或最后一个参数返回其参数的布尔值 AND ，即</span><br><span class="line">	“and x y”表现为“<span class="keyword">if</span> x then y <span class="keyword">else</span> x”。</span><br><span class="line">	评估所有参数。</span><br><span class="line">call</span><br><span class="line">	返回调用第一个参数的结果，该参数</span><br><span class="line">	必须是一个函数，其余参数作为参数。</span><br><span class="line">	因此，“call .XY <span class="number">1</span> <span class="number">2</span>”在 Go 表示法中是 dot.XY(<span class="number">1</span>, <span class="number">2</span>)，其中</span><br><span class="line">	Y 是函数值字段、映射条目等。</span><br><span class="line">	第一个参数必须是</span><br><span class="line">	产生函数类型值的评估结果（不同于</span><br><span class="line">	预定义的函数，如打印）。该函数必须</span><br><span class="line">	返回一个或两个结果值，其中第二个</span><br><span class="line">	是类型错误。如果参数与函数不匹配</span><br><span class="line">	或返回的错误值为非零，则执行停止。</span><br><span class="line">html</span><br><span class="line">	返回等效</span><br><span class="line">	于其参数文本表示的转义 HTML 。此功能</span><br><span class="line">	在 html/template 中不可用，但有一些例外。</span><br><span class="line">index</span><br><span class="line">	返回通过</span><br><span class="line">	以下参数对其第一个参数进行索引的结果。因此，在 Go 语法中，“索引 x <span class="number">1</span> <span class="number">2</span> <span class="number">3</span>”是</span><br><span class="line">	x[<span class="number">1</span>][<span class="number">2</span>][<span class="number">3</span>]。每个索引项必须是映射、切片或数组。</span><br><span class="line">slice</span><br><span class="line">	slice 返回其第一个参数被</span><br><span class="line">	其余参数切片的结果。因此，<span class="string">&quot;slice x 1 2&quot;</span> 在 Go 语法中是 x[<span class="number">1</span>:<span class="number">2</span>]，</span><br><span class="line">	而 <span class="string">&quot;slice x&quot;</span> 是 x[:]，<span class="string">&quot;slice x 1&quot;</span> 是 x[<span class="number">1</span>:]，</span><br><span class="line">	是 x[<span class="number">1</span>:<span class="number">2</span>:<span class="number">3</span>]。第一个参数必须是字符串、切片或数组。</span><br><span class="line">js</span><br><span class="line">	返回转义的 JavaScript 等效</span><br><span class="line">	于其参数的文本表示。</span><br><span class="line"><span class="built_in">len</span></span><br><span class="line">	返回其参数的整数长度。</span><br><span class="line">not</span><br><span class="line">	返回其单个参数的布尔否定。</span><br><span class="line">or</span><br><span class="line">	通过返回第</span><br><span class="line">	一个非空参数或最后一个参数来返回其参数的布尔 OR ，即</span><br><span class="line">	“or x y”表现为“<span class="keyword">if</span> x then x <span class="keyword">else</span> y”。</span><br><span class="line">	评估所有参数。</span><br><span class="line"><span class="built_in">print</span></span><br><span class="line">	fmt.Sprint</span><br><span class="line">	的别名</span><br><span class="line">printf fmt.Sprintf</span><br><span class="line">	的别名</span><br><span class="line"><span class="built_in">println</span> fmt.Sprint的别名</span><br><span class="line">urlquery</span><br><span class="line">	以适合嵌入 URL 查询的形式</span><br><span class="line">	返回其参数的文本表示的转义值。</span><br><span class="line">	此功能在 html/template 中不可用，但有一些</span><br><span class="line">	例外。</span><br></pre></td></tr></table></figure>

<h2 id="嵌套-template：define-和-template"><a href="#嵌套-template：define-和-template" class="headerlink" title="嵌套 template：define 和 template"></a>嵌套 template：define 和 template</h2><p>define 可以直接在待解析内容中定义一个模板，这个模板会加入到 common 结构组中，并关联到关联名称上。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;template &quot;name&quot;&#125;&#125;</span><br><span class="line">&#123;&#123;template &quot;name&quot; pipeline&#125;&#125;</span><br><span class="line">&#123;&#123;define &quot;name&quot;&#125;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>实例演示</strong></p>
<p>假设我们有一个 header.html、footer.html 和 index.html，index.html 包含 header.html 和 footer.html</p>
<p>header.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;define &quot;header&quot;&#125;&#125;</span><br><span class="line">     &lt;head&gt;</span><br><span class="line">         &lt;title&gt;&#123;&#123;.Title&#125;&#125;&lt;/title&gt;</span><br><span class="line">     &lt;/head&gt;</span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>footer.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;define &quot;footer&quot;&#125;&#125;</span><br><span class="line">这是footer</span><br><span class="line"></span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>index.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    &#123;&#123;template &quot;header&quot; .&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>首页...<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    &#123;&#123;template &quot;footer&quot;&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>go code</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;html/template&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tmpl</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">	t1, err := template.ParseFiles(<span class="string">&quot;templates/index.html&quot;</span>, <span class="string">&quot;templates/header.html&quot;</span>, <span class="string">&quot;templates/footer.html&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">	t1.Execute(w, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	server := http.Server&#123;</span><br><span class="line">		Addr: <span class="string">&quot;127.0.0.1:8080&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line">	http.HandleFunc(<span class="string">&quot;/tmpl&quot;</span>, tmpl)</span><br><span class="line">	server.ListenAndServe()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>运行结果</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">这是header</span><br><span class="line">首页...</span><br><span class="line">这是footer</span><br></pre></td></tr></table></figure>

<h1 id="HttpRouter"><a href="#HttpRouter" class="headerlink" title="HttpRouter"></a>HttpRouter</h1><p>HttpRouter 是一种轻量级高性能的，golang HTTP 请求路由器。</p>
<p>与 Golang 默认路由相比，此路由器支持路由模式中的<strong>变量</strong> 并匹配请求方法。它还可以更好地扩展。</p>
<p>该路由器针对高性能和小内存占用进行了优化。即使有很长的路径和大量的路线，它也能很好地扩展。压缩动态特里（基数树）结构用于有效匹配。</p>
<p>gin 框架就是以 httprouter 为基础开发的，下面我们来学习一下 httprouter。</p>
<h2 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get github.com/julienschmidt/httprouter</span><br></pre></td></tr></table></figure>

<h2 id="第一个路由实例"><a href="#第一个路由实例" class="headerlink" title="第一个路由实例"></a>第一个路由实例</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/julienschmidt/httprouter&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Index</span><span class="params">(w http.ResponseWriter, r *http.Request, _ httprouter.Params)</span></span> &#123;</span><br><span class="line">	fmt.Fprint(w, <span class="string">&quot;Welcome!\n&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Hello</span><span class="params">(w http.ResponseWriter, r *http.Request, ps httprouter.Params)</span></span> &#123;</span><br><span class="line">	fmt.Fprintf(w, <span class="string">&quot;hello, %s!\n&quot;</span>, ps.ByName(<span class="string">&quot;name&quot;</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	router := httprouter.New()</span><br><span class="line">	router.GET(<span class="string">&quot;/&quot;</span>, Index)</span><br><span class="line">	router.GET(<span class="string">&quot;/hello/:name&quot;</span>, Hello)</span><br><span class="line"></span><br><span class="line">	log.Fatal(http.ListenAndServe(<span class="string">&quot;:8080&quot;</span>, router))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在浏览器输入：<code>http://localhost:8080/</code>，输出：<code>Welcome!</code></p>
<p>在浏览器输入：<code>http://localhost:8080/hello/ghz</code>，输出：<code>hello, ghz!</code></p>
<h2 id="http-router-请求方法"><a href="#http-router-请求方法" class="headerlink" title="http router 请求方法"></a>http router 请求方法</h2><p>httprouter 为所有的 HTTP Method 提供了快捷的使用方式，只需要调用对应的方法即可。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Router)</span> <span class="title">GET</span><span class="params">(path <span class="keyword">string</span>, handle Handle)</span></span> &#123;</span><br><span class="line">    r.Handle(<span class="string">&quot;GET&quot;</span>, path, handle)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Router)</span> <span class="title">HEAD</span><span class="params">(path <span class="keyword">string</span>, handle Handle)</span></span> &#123;</span><br><span class="line">    r.Handle(<span class="string">&quot;HEAD&quot;</span>, path, handle)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Router)</span> <span class="title">OPTIONS</span><span class="params">(path <span class="keyword">string</span>, handle Handle)</span></span> &#123;</span><br><span class="line">    r.Handle(<span class="string">&quot;OPTIONS&quot;</span>, path, handle)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Router)</span> <span class="title">POST</span><span class="params">(path <span class="keyword">string</span>, handle Handle)</span></span> &#123;</span><br><span class="line">    r.Handle(<span class="string">&quot;POST&quot;</span>, path, handle)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Router)</span> <span class="title">PUT</span><span class="params">(path <span class="keyword">string</span>, handle Handle)</span></span> &#123;</span><br><span class="line">    r.Handle(<span class="string">&quot;PUT&quot;</span>, path, handle)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Router)</span> <span class="title">PATCH</span><span class="params">(path <span class="keyword">string</span>, handle Handle)</span></span> &#123;</span><br><span class="line">    r.Handle(<span class="string">&quot;PATCH&quot;</span>, path, handle)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Router)</span> <span class="title">DELETE</span><span class="params">(path <span class="keyword">string</span>, handle Handle)</span></span> &#123;</span><br><span class="line">    r.Handle(<span class="string">&quot;DELETE&quot;</span>, path, handle)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="restful-风格路由"><a href="#restful-风格路由" class="headerlink" title="restful 风格路由"></a>restful 风格路由</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;log&quot;</span></span><br><span class="line">    <span class="string">&quot;net/http&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;github.com/julienschmidt/httprouter&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Index</span><span class="params">(w http.ResponseWriter, r *http.Request, _ httprouter.Params)</span></span> &#123;</span><br><span class="line">    fmt.Fprint(w, <span class="string">&quot;Welcome!\n&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Hello</span><span class="params">(w http.ResponseWriter, r *http.Request, ps httprouter.Params)</span></span> &#123;</span><br><span class="line">    fmt.Fprintf(w, <span class="string">&quot;hello, %s!\n&quot;</span>, ps.ByName(<span class="string">&quot;name&quot;</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getuser</span><span class="params">(w http.ResponseWriter, r *http.Request, ps httprouter.Params)</span></span> &#123;</span><br><span class="line">    uid := ps.ByName(<span class="string">&quot;uid&quot;</span>)</span><br><span class="line">    fmt.Fprintf(w, <span class="string">&quot;you are get user %s&quot;</span>, uid)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">modifyuser</span><span class="params">(w http.ResponseWriter, r *http.Request, ps httprouter.Params)</span></span> &#123;</span><br><span class="line">    uid := ps.ByName(<span class="string">&quot;uid&quot;</span>)</span><br><span class="line">    fmt.Fprintf(w, <span class="string">&quot;you are modify user %s&quot;</span>, uid)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deleteuser</span><span class="params">(w http.ResponseWriter, r *http.Request, ps httprouter.Params)</span></span> &#123;</span><br><span class="line">    uid := ps.ByName(<span class="string">&quot;uid&quot;</span>)</span><br><span class="line">    fmt.Fprintf(w, <span class="string">&quot;you are delete user %s&quot;</span>, uid)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">adduser</span><span class="params">(w http.ResponseWriter, r *http.Request, ps httprouter.Params)</span></span> &#123;</span><br><span class="line">    <span class="comment">// uid := r.FormValue(&quot;uid&quot;)</span></span><br><span class="line">    uid := ps.ByName(<span class="string">&quot;uid&quot;</span>)</span><br><span class="line">    fmt.Fprintf(w, <span class="string">&quot;you are add user %s&quot;</span>, uid)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    router := httprouter.New()</span><br><span class="line">    router.GET(<span class="string">&quot;/&quot;</span>, Index)</span><br><span class="line">    router.GET(<span class="string">&quot;/hello/:name&quot;</span>, Hello)</span><br><span class="line"></span><br><span class="line">    router.GET(<span class="string">&quot;/user/:uid&quot;</span>, getuser)</span><br><span class="line">    router.POST(<span class="string">&quot;/adduser/:uid&quot;</span>, adduser)</span><br><span class="line">    router.DELETE(<span class="string">&quot;/deluser/:uid&quot;</span>, deleteuser)</span><br><span class="line">    router.PUT(<span class="string">&quot;/moduser/:uid&quot;</span>, modifyuser)</span><br><span class="line"></span><br><span class="line">    log.Fatal(http.ListenAndServe(<span class="string">&quot;:8080&quot;</span>, router))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Gin-简介"><a href="#Gin-简介" class="headerlink" title="Gin 简介"></a>Gin 简介</h1><h2 id="Gin-官网"><a href="#Gin-官网" class="headerlink" title="Gin 官网"></a>Gin 官网</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://gin-gonic.com/</span><br></pre></td></tr></table></figure>

<h2 id="gin-简介"><a href="#gin-简介" class="headerlink" title="gin 简介"></a>gin 简介</h2><p>Gin 是一个 golang 的微框架，基于 httprouter，封装比较优雅，API 友好，源码注释比较明确，具有快速灵活，容错方便等特点。</p>
<h2 id="gin-特征"><a href="#gin-特征" class="headerlink" title="gin 特征"></a>gin 特征</h2><p><strong>速度快</strong></p>
<p>基于基数树的路由，内存占用小。没有反射。可预测的 API 性能。</p>
<p><strong>中间件支持</strong></p>
<p>传入的 HTTP 请求可以由中间件链和最终操作处理。例如：Logger、Authorization、GZIP 最后在 DB 中发布一条消息。</p>
<p><strong>Crash-free</strong></p>
<p>Gin 可以捕获 HTTP 请求期间发生的 panic 并恢复它。这样，你的服务器将始终可用。</p>
<p><strong>JSON 验证</strong></p>
<p>Gin 可以解析和验证请求的 JSON - 例如，检查所需值的存在。</p>
<p><strong>路由分组</strong></p>
<p>更好地组织您的路线。需要授权与不需要授权，不同的 API 版本……此外，组可以无限嵌套，而不会降低性能。</p>
<p><strong>错误管理</strong></p>
<p>Gin 提供了一种方便的方法来收集 HTTP 请求期间发生的所有错误。最终，中间件可以将它们写入日志文件、数据库并通过网络发送它们。</p>
<p><strong>内置渲染</strong></p>
<p>Gin 为 JSON、XML 和 HTML 渲染提供了一个易于使用的 API。</p>
<p><strong>可扩展</strong></p>
<p>创建一个新的中间件非常简单，只需查看示例代码即可。</p>
<h2 id="第一个-gin"><a href="#第一个-gin" class="headerlink" title="第一个 gin"></a>第一个 gin</h2><p><strong>安装 gin</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get -u github.com/gin-gonic/gin</span><br></pre></td></tr></table></figure>

<p><strong>导入项目</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>实现代码</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	r := gin.Default()</span><br><span class="line">	r.GET(<span class="string">&quot;/ping&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		c.JSON(<span class="number">200</span>, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;message&quot;</span>: <span class="string">&quot;pong&quot;</span>,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line">	r.Run() <span class="comment">// listen and serve on 0.0.0.0:8080</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>运行</strong></p>
<p>浏览器输入：<code>http://localhost:8080/ping</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;message&quot;:&quot;pong&quot;&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Gin-实现用户登录"><a href="#Gin-实现用户登录" class="headerlink" title="Gin 实现用户登录"></a>Gin 实现用户登录</h1><h2 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h2><h3 id="创建一个文件-tempates"><a href="#创建一个文件-tempates" class="headerlink" title="创建一个文件 tempates"></a>创建一个文件 tempates</h3><p>在项目跟目录下面创建给文件夹 tempates，用来保存静态文件</p>
<h3 id="创建一个登录-html-文件"><a href="#创建一个登录-html-文件" class="headerlink" title="创建一个登录 html 文件"></a>创建一个登录 html 文件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/login&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">      Username: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">      Password: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Login&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="创建一个欢迎-html-页面"><a href="#创建一个欢迎-html-页面" class="headerlink" title="创建一个欢迎 html 页面"></a>创建一个欢迎 html 页面</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Welcome<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    Welcome, &#123;&#123;.username&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="使用-Gin-处理逻辑"><a href="#使用-Gin-处理逻辑" class="headerlink" title="使用 Gin 处理逻辑"></a>使用 Gin 处理逻辑</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">MyHandler</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.JSON(<span class="number">200</span>, gin.H&#123;</span><br><span class="line">		<span class="string">&quot;hello&quot;</span>: <span class="string">&quot;hello world&quot;</span>,</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Login</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;login.html&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DoLogin</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	username := c.PostForm(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">	password := c.PostForm(<span class="string">&quot;password&quot;</span>)</span><br><span class="line"></span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;welcome.html&quot;</span>, gin.H&#123;</span><br><span class="line">		<span class="string">&quot;username&quot;</span>: username,</span><br><span class="line">		<span class="string">&quot;password&quot;</span>: password,</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	e := gin.Default()</span><br><span class="line">	e.LoadHTMLGlob(<span class="string">&quot;templates/*&quot;</span>)</span><br><span class="line"></span><br><span class="line">	e.GET(<span class="string">&quot;/login&quot;</span>, Login)</span><br><span class="line">	e.POST(<span class="string">&quot;/login&quot;</span>, DoLogin)</span><br><span class="line">	e.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Gin-请求参数"><a href="#Gin-请求参数" class="headerlink" title="Gin 请求参数"></a>Gin 请求参数</h1><h2 id="Get-请求参数"><a href="#Get-请求参数" class="headerlink" title="Get 请求参数"></a>Get 请求参数</h2><blockquote>
<p>使用 <code>c.Query(&quot;key&quot;)</code>、或者 <code>c.DefaultQuery(&quot;key&quot;)</code>方法</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestQueryString</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	username := c.Query(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">	site := c.DefaultQuery(<span class="string">&quot;site&quot;</span>, <span class="string">&quot;www.xiaobaibk.com&quot;</span>)</span><br><span class="line"></span><br><span class="line">	c.String(<span class="number">200</span>, <span class="string">&quot;username:%s, site:%s&quot;</span>, username, site)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	e := gin.Default()</span><br><span class="line">	<span class="comment">// url : http://localhost:8080/testQueryString?username=xiaobai&amp;site=baidu.com</span></span><br><span class="line">	e.GET(<span class="string">&quot;/testQueryString&quot;</span>, TestQueryString)</span><br><span class="line"></span><br><span class="line">	e.Run()</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>运行结果</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">username:xiaobai, site:baidu.com</span><br></pre></td></tr></table></figure>

<h2 id="Post-参数"><a href="#Post-参数" class="headerlink" title="Post 参数"></a>Post 参数</h2><p>使用 <code>c.PostForm(&quot;key&quot;)</code>、或者 <code>c.DefaultQuery(&quot;key&quot;)</code>方法</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DoLogin</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	username := c.PostForm(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">	password := c.DefaultPostForm(<span class="string">&quot;password&quot;</span>, <span class="string">&quot;123&quot;</span>)</span><br><span class="line"></span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;welcome.html&quot;</span>, gin.H&#123;</span><br><span class="line">		<span class="string">&quot;username&quot;</span>: username,</span><br><span class="line">		<span class="string">&quot;password&quot;</span>: password,</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用 Postman 或者 Post 表单测试</p>
</blockquote>
<h2 id="路劲参数（restful-风格）"><a href="#路劲参数（restful-风格）" class="headerlink" title="路劲参数（restful 风格）"></a>路劲参数（restful 风格）</h2><p>使用 <code>c.Param(&quot;key&quot;)</code>方法</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestPathParam</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	s := c.Param(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">	c.String(<span class="number">200</span>, <span class="string">&quot;Username:%s&quot;</span>, s)</span><br><span class="line">	<span class="comment">// 输出：Username:ghz</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	e := gin.Default()</span><br><span class="line">	<span class="comment">// http://localhost:8080/hello/ghz</span></span><br><span class="line">	e.GET(<span class="string">&quot;/hello/:username&quot;</span>, TestPathParam)</span><br><span class="line">	e.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="既有-Get-也有-Post"><a href="#既有-Get-也有-Post" class="headerlink" title="既有 Get 也有 Post"></a>既有 Get 也有 Post</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestGetAndPost</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	page := c.DefaultQuery(<span class="string">&quot;page&quot;</span>, <span class="string">&quot;0&quot;</span>)</span><br><span class="line">	key := c.PostForm(<span class="string">&quot;key&quot;</span>)</span><br><span class="line">	c.String(<span class="number">200</span>, <span class="string">&quot;Page:%s, Key:%s&quot;</span>, page, key)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	e := gin.Default()</span><br><span class="line">	<span class="comment">// http://localhost:8080/query?page=1</span></span><br><span class="line">	e.POST(<span class="string">&quot;/query&quot;</span>, TestGetAndPost)</span><br><span class="line">	e.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用 Postman 或者 Post 表单测试</p>
</blockquote>
<h1 id="Gin-表单处理"><a href="#Gin-表单处理" class="headerlink" title="Gin 表单处理"></a>Gin 表单处理</h1><h2 id="创建一个-HTML-表单"><a href="#创建一个-HTML-表单" class="headerlink" title="创建一个 HTML 表单"></a>创建一个 HTML 表单</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>多课网，听老郭讲golang<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>用户注册页面<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/register&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">      用户名: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">      密码: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">      爱好:</span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;swiming&quot;</span> /&gt;</span>游泳</span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;basketball&quot;</span> /&gt;</span>篮球</span><br><span class="line">      <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">      性别：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">id</span>=<span class="string">&quot;1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;m&quot;</span> /&gt;</span>男</span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">id</span>=<span class="string">&quot;2&quot;</span> <span class="attr">value</span>=<span class="string">&quot;f&quot;</span> /&gt;</span>女</span><br><span class="line">      <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">      城市:</span><br><span class="line">      <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;city&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;beijing&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;shanghai&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;注册&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Go-code"><a href="#Go-code" class="headerlink" title="Go code"></a>Go code</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Regsiter</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	username := c.PostForm(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">	password := c.PostForm(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">	hobby := c.PostFormArray(<span class="string">&quot;hobby&quot;</span>)</span><br><span class="line">	gender := c.PostForm(<span class="string">&quot;gender&quot;</span>)</span><br><span class="line">	city := c.PostForm(<span class="string">&quot;city&quot;</span>)</span><br><span class="line"></span><br><span class="line">	c.String(<span class="number">200</span>, <span class="string">&quot;Username:%s, Password:%s, hobby:%s, gender:%s, city:%s&quot;</span>, username, password, hobby, gender, city)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GoRegister</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;register.html&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	e := gin.Default()</span><br><span class="line">	e.LoadHTMLGlob(<span class="string">&quot;templates/*&quot;</span>)</span><br><span class="line">	e.POST(<span class="string">&quot;/register&quot;</span>, Regsiter)</span><br><span class="line">	e.GET(<span class="string">&quot;/register&quot;</span>, GoRegister)</span><br><span class="line">	e.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>运行结果</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Username:ghz, Password:123, hobby:[swiming basketball], gender:m, city:beijing</span><br></pre></td></tr></table></figure>

<h1 id="Gin-数据绑定"><a href="#Gin-数据绑定" class="headerlink" title="Gin 数据绑定"></a>Gin 数据绑定</h1><h2 id="绑定-Form-表单"><a href="#绑定-Form-表单" class="headerlink" title="绑定 Form 表单"></a>绑定 Form 表单</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Username <span class="keyword">string</span>   <span class="string">`form:&quot;username&quot;`</span></span><br><span class="line">	Password <span class="keyword">string</span>   <span class="string">`form:&quot;password&quot;`</span></span><br><span class="line">	Hobby    []<span class="keyword">string</span> <span class="string">`form:&quot;hobby&quot;`</span></span><br><span class="line">	Gender   <span class="keyword">string</span>   <span class="string">`form:&quot;gender&quot;`</span></span><br><span class="line">	City     <span class="keyword">string</span>   <span class="string">`form:&quot;city&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Regsiter</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> user User</span><br><span class="line">	c.ShouldBind(&amp;user)</span><br><span class="line">	c.String(<span class="number">200</span>, <span class="string">&quot;User:%s&quot;</span>, user)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GoRegister</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;register.html&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	e := gin.Default()</span><br><span class="line">	e.LoadHTMLGlob(<span class="string">&quot;templates/*&quot;</span>)</span><br><span class="line">	e.POST(<span class="string">&quot;/register&quot;</span>, Regsiter)</span><br><span class="line">	e.GET(<span class="string">&quot;/register&quot;</span>, GoRegister)</span><br><span class="line">	e.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="绑定查询参数"><a href="#绑定查询参数" class="headerlink" title="绑定查询参数"></a>绑定查询参数</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Username <span class="keyword">string</span> <span class="string">`form:&quot;username&quot;`</span></span><br><span class="line">	Password <span class="keyword">string</span> <span class="string">`form:&quot;password&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestGetBind</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> user User</span><br><span class="line">	err := c.ShouldBind(&amp;user)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">	c.String(<span class="number">200</span>, <span class="string">&quot;User:%s&quot;</span>, user)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	e := gin.Default()</span><br><span class="line">	<span class="comment">// http://localhost:8080/testGetBind?username=ghz&amp;password=123</span></span><br><span class="line">	e.GET(<span class="string">&quot;/testGetBind&quot;</span>, TestGetBind)</span><br><span class="line">	e.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="路径请求参数绑定"><a href="#路径请求参数绑定" class="headerlink" title="路径请求参数绑定"></a>路径请求参数绑定</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Username <span class="keyword">string</span> <span class="string">`uri:&quot;username&quot;`</span></span><br><span class="line">	Password <span class="keyword">string</span> <span class="string">`uri:&quot;password&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestGetBind</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> user User</span><br><span class="line">	err := c.ShouldBindUri(&amp;user)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(err)</span><br><span class="line">	&#125;</span><br><span class="line">	c.String(<span class="number">200</span>, <span class="string">&quot;User:%s&quot;</span>, user)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	e := gin.Default()</span><br><span class="line">	<span class="comment">// http://localhost:8080/testGetBind/ghz/123</span></span><br><span class="line">	e.GET(<span class="string">&quot;/testGetBind/:username/:password&quot;</span>, TestGetBind)</span><br><span class="line">	e.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：结构体和绑定方法的变化</p>
</blockquote>
<h1 id="Gin-访问静态文件集成-BootStrap-框架"><a href="#Gin-访问静态文件集成-BootStrap-框架" class="headerlink" title="Gin 访问静态文件集成 BootStrap 框架"></a>Gin 访问静态文件集成 BootStrap 框架</h1><h2 id="下载-BootStrap"><a href="#下载-BootStrap" class="headerlink" title="下载 BootStrap"></a>下载 BootStrap</h2><p>下载地址：<code>https://getbootstrap.com/</code></p>
<h2 id="添加-bootstrap-css-和-js-文件"><a href="#添加-bootstrap-css-和-js-文件" class="headerlink" title="添加 bootstrap css 和 js 文件"></a>添加 bootstrap css 和 js 文件</h2><p>创建一个 assets 文件夹，将 css 和 js 文件添加到该文件夹</p>
<h2 id="创建-html-文件"><a href="#创建-html-文件" class="headerlink" title="创建 html 文件"></a>创建 html 文件</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/assets/css/bootstrap.min.css&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-3&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputEmail1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-label&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span>Email address&lt;/label</span><br><span class="line">          &gt;</span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;email&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">id</span>=<span class="string">&quot;exampleInputEmail1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">aria-describedby</span>=<span class="string">&quot;emailHelp&quot;</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;emailHelp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-text&quot;</span>&gt;</span></span><br><span class="line">            We&#x27;ll never share your email with anyone else.</span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-3&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputPassword1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-label&quot;</span>&gt;</span>Password<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;password&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">id</span>=<span class="string">&quot;exampleInputPassword1&quot;</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-3 form-check&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-check-input&quot;</span> <span class="attr">id</span>=<span class="string">&quot;exampleCheck1&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;form-check-label&quot;</span> <span class="attr">for</span>=<span class="string">&quot;exampleCheck1&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span>Check me out&lt;/label</span><br><span class="line">          &gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Go-Code"><a href="#Go-Code" class="headerlink" title="Go Code"></a>Go Code</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Login</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;login.html&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	e := gin.Default()</span><br><span class="line">	e.LoadHTMLGlob(<span class="string">&quot;templates/*&quot;</span>)</span><br><span class="line"></span><br><span class="line">	e.Static(<span class="string">&quot;/assets&quot;</span>, <span class="string">&quot;./assets&quot;</span>)</span><br><span class="line">	e.StaticFS(<span class="string">&quot;/croot&quot;</span>, http.Dir(<span class="string">&quot;c:/&quot;</span>))</span><br><span class="line">	e.StaticFile(<span class="string">&quot;/favicon.ico&quot;</span>, <span class="string">&quot;./assets/favicon.ico&quot;</span>)</span><br><span class="line"></span><br><span class="line">	e.GET(<span class="string">&quot;/login&quot;</span>, Login)</span><br><span class="line">	e.POST(<span class="string">&quot;/login&quot;</span>, DoLogin)</span><br><span class="line">	e.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Gin-使用中间件"><a href="#Gin-使用中间件" class="headerlink" title="Gin 使用中间件"></a>Gin 使用中间件</h1><p>中间件听起来非常高大上的名字，实际非常简单，就是在请求中间起到拦截作用的处理函数。</p>
<h2 id="Gin-默认中间件"><a href="#Gin-默认中间件" class="headerlink" title="Gin 默认中间件"></a>Gin 默认中间件</h2><p>如果你使用 <code>Gin.Default()</code>实例化 gin 引擎，默认有两个中间件，<code>Logger</code>和 <code>Recovery</code>，分别用来处理日志和处理错误。如果使用 <code>gin.New()</code>需要重新添加。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 新建一个没有任何默认中间件的路由</span></span><br><span class="line">r := gin.New()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局中间件</span></span><br><span class="line"><span class="comment">// Logger 中间件将日志写入 gin.DefaultWriter，即使你将 GIN_MODE 设置为 release。</span></span><br><span class="line"><span class="comment">// By default gin.DefaultWriter = os.Stdout</span></span><br><span class="line">r.Use(gin.Logger())</span><br><span class="line"></span><br><span class="line"><span class="comment">// Recovery 中间件会 recover 任何 panic。如果有 panic 的话，会写入 500。</span></span><br><span class="line">r.Use(gin.Recovery())</span><br></pre></td></tr></table></figure>

<h2 id="自定义中间件"><a href="#自定义中间件" class="headerlink" title="自定义中间件"></a>自定义中间件</h2><ol>
<li>自定义中间件非常简单，定义一个符合下面格式的处理函数</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> HandlerFunc <span class="function"><span class="keyword">func</span><span class="params">(*Context)</span></span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>使用<code>Use</code>方法调用</li>
</ol>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestMW</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.String(<span class="number">200</span>, <span class="string">&quot;hello,%s&quot;</span>, <span class="string">&quot;ghz&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">MyMiddleware1</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;我的第一个中间件&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">MyMiddleware2</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;我的第二个中间件&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/* 	func Default() *Engine &#123;</span></span><br><span class="line"><span class="comment">		debugPrintWARNINGDefault()</span></span><br><span class="line"><span class="comment">		engine := New()</span></span><br><span class="line"><span class="comment">		engine.Use(Logger(), Recovery())</span></span><br><span class="line"><span class="comment">		return engine</span></span><br><span class="line"><span class="comment">	&#125; */</span></span><br><span class="line">	<span class="comment">// e := gin.Default()</span></span><br><span class="line">	<span class="comment">// e := gin.New()</span></span><br><span class="line"></span><br><span class="line">	e := gin.Default()</span><br><span class="line"></span><br><span class="line">	e.Use(MyMiddleware1, MyMiddleware2)</span><br><span class="line"></span><br><span class="line">	e.GET(<span class="string">&quot;testmw&quot;</span>, TestMW)</span><br><span class="line"></span><br><span class="line">	e.Run()</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="使用-Gin-BasicAuth-中间件"><a href="#使用-Gin-BasicAuth-中间件" class="headerlink" title="使用 Gin BasicAuth 中间件"></a>使用 Gin BasicAuth 中间件</h1><p>Gin 提供了 BasicAuth 中间件，用来对网站资源的访问保护。</p>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模拟一些私人数据</span></span><br><span class="line"><span class="keyword">var</span> secrets = gin.H&#123;</span><br><span class="line">	<span class="string">&quot;foo&quot;</span>:    gin.H&#123;<span class="string">&quot;email&quot;</span>: <span class="string">&quot;foo@bar.com&quot;</span>, <span class="string">&quot;phone&quot;</span>: <span class="string">&quot;123433&quot;</span>&#125;,</span><br><span class="line">	<span class="string">&quot;austin&quot;</span>: gin.H&#123;<span class="string">&quot;email&quot;</span>: <span class="string">&quot;austin@example.com&quot;</span>, <span class="string">&quot;phone&quot;</span>: <span class="string">&quot;666&quot;</span>&#125;,</span><br><span class="line">	<span class="string">&quot;lena&quot;</span>:   gin.H&#123;<span class="string">&quot;email&quot;</span>: <span class="string">&quot;lena@guapa.com&quot;</span>, <span class="string">&quot;phone&quot;</span>: <span class="string">&quot;523443&quot;</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	r := gin.Default()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 路由组使用 gin.BasicAuth() 中间件</span></span><br><span class="line">	<span class="comment">// gin.Accounts 是 map[string]string 的一种快捷方式</span></span><br><span class="line">	authorized := r.Group(<span class="string">&quot;/admin&quot;</span>, gin.BasicAuth(gin.Accounts&#123;</span><br><span class="line">		<span class="string">&quot;foo&quot;</span>:    <span class="string">&quot;bar&quot;</span>,</span><br><span class="line">		<span class="string">&quot;austin&quot;</span>: <span class="string">&quot;1234&quot;</span>,</span><br><span class="line">		<span class="string">&quot;lena&quot;</span>:   <span class="string">&quot;hello2&quot;</span>,</span><br><span class="line">		<span class="string">&quot;manu&quot;</span>:   <span class="string">&quot;4321&quot;</span>,</span><br><span class="line">	&#125;))</span><br><span class="line"></span><br><span class="line">	<span class="comment">// /admin/secrets 端点</span></span><br><span class="line">	<span class="comment">// 触发 &quot;localhost:8080/admin/secrets</span></span><br><span class="line">	authorized.GET(<span class="string">&quot;/secrets&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		<span class="comment">// 获取用户，它是由 BasicAuth 中间件设置的</span></span><br><span class="line">		user := c.MustGet(gin.AuthUserKey).(<span class="keyword">string</span>)</span><br><span class="line">		fmt.Println(user)</span><br><span class="line">		<span class="keyword">if</span> secret, ok := secrets[user]; ok &#123;</span><br><span class="line">			c.JSON(http.StatusOK, gin.H&#123;<span class="string">&quot;user&quot;</span>: user, <span class="string">&quot;secret&quot;</span>: secret&#125;)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			c.JSON(http.StatusOK, gin.H&#123;<span class="string">&quot;user&quot;</span>: user, <span class="string">&quot;secret&quot;</span>: <span class="string">&quot;NO SECRET :(&quot;</span>&#125;)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 监听并在 0.0.0.0:8080 上启动服务</span></span><br><span class="line">	r.Run(<span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>在浏览器输入 <code>localhost:8080/admin/secrets</code>时，会弹出一个对话框，要求输入正确的用户名和密码，才能访问资源。</p>
<h1 id="Gin-cookie-的使用"><a href="#Gin-cookie-的使用" class="headerlink" title="Gin cookie 的使用"></a>Gin cookie 的使用</h1><p><code>cookie</code>是服务器向客户端写的一些数据，可以实现像自动登录等功能。</p>
<h2 id="Gin-cookie-的使用-1"><a href="#Gin-cookie-的使用-1" class="headerlink" title="Gin cookie 的使用"></a>Gin cookie 的使用</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Handler</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 获得cookie</span></span><br><span class="line">	s, err := c.Cookie(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		s = <span class="string">&quot;ghz&quot;</span></span><br><span class="line">		<span class="comment">// 设置cookie</span></span><br><span class="line">		c.SetCookie(<span class="string">&quot;username&quot;</span>, s, <span class="number">60</span>*<span class="number">60</span>, <span class="string">&quot;/&quot;</span>, <span class="string">&quot;localhost&quot;</span>, <span class="literal">false</span>, <span class="literal">true</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	c.String(<span class="number">200</span>, <span class="string">&quot;测试cookie&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	e := gin.Default()</span><br><span class="line">	e.GET(<span class="string">&quot;/test&quot;</span>, Handler)</span><br><span class="line">	e.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>基于安全的考虑，需要给 cookie 加上 <code>Secure</code>和 <code>HttpOnly</code>属性，<code>HttpOnly</code>比较好理解，设置 <code>HttpOnly=true</code>的 cookie 不能被 js 获取到，无法用 <code>document.cookie</code>打出 cookie 的内容。</p>
<p><code>Secure</code>属性是说如果一个 cookie 被设置了 <code>Secure=true</code>，那么这个 cookie 只能用 <code>https</code>协议发送给服务器，用 <code>http</code>协议是不发送的。</p>
</blockquote>
<h1 id="Gin-使用-Session"><a href="#Gin-使用-Session" class="headerlink" title="Gin 使用 Session"></a>Gin 使用 Session</h1><p>因为 http 是无状态、短连接，如何保存客户端和服务器直接的会话状态呢？可以使用 session。</p>
<h2 id="使用-gin-session-中间件"><a href="#使用-gin-session-中间件" class="headerlink" title="使用 gin session 中间件"></a>使用 gin session 中间件</h2><p>gin 本身没有对 session 的支持，可以使用第三方中间件。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> get github.com/gin-contrib/sessions</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/gin-contrib/sessions&quot;</span></span><br></pre></td></tr></table></figure>

<p>该中间件提供了很多后端支持：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://pkg.go.dev/github.com/gin-contrib/sessions#readme-cookie-based">cookie-based</a></li>
<li><a target="_blank" rel="noopener" href="https://pkg.go.dev/github.com/gin-contrib/sessions#readme-redis">Redis</a></li>
<li><a target="_blank" rel="noopener" href="https://pkg.go.dev/github.com/gin-contrib/sessions#readme-memcached">memcached</a></li>
<li><a target="_blank" rel="noopener" href="https://pkg.go.dev/github.com/gin-contrib/sessions#readme-mongodb">MongoDB</a></li>
<li><a target="_blank" rel="noopener" href="https://pkg.go.dev/github.com/gin-contrib/sessions#readme-memstore">memstore</a></li>
<li><a target="_blank" rel="noopener" href="https://pkg.go.dev/github.com/gin-contrib/sessions#readme-postgresql">PostgreSQL</a></li>
</ul>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">  <span class="string">&quot;github.com/gin-contrib/sessions&quot;</span></span><br><span class="line">  <span class="string">&quot;github.com/gin-contrib/sessions/cookie&quot;</span></span><br><span class="line">  <span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  r := gin.Default()</span><br><span class="line">  store := cookie.NewStore([]<span class="keyword">byte</span>(<span class="string">&quot;secret&quot;</span>))</span><br><span class="line">  r.Use(sessions.Sessions(<span class="string">&quot;mysession&quot;</span>, store))</span><br><span class="line"></span><br><span class="line">  r.GET(<span class="string">&quot;/hello&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">    session := sessions.Default(c)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> session.Get(<span class="string">&quot;hello&quot;</span>) != <span class="string">&quot;world&quot;</span> &#123;</span><br><span class="line">      session.Set(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>)</span><br><span class="line">      session.Save()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    c.JSON(<span class="number">200</span>, gin.H&#123;<span class="string">&quot;hello&quot;</span>: session.Get(<span class="string">&quot;hello&quot;</span>)&#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  r.Run(<span class="string">&quot;:8000&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>更多内容请参考：<code>https://pkg.go.dev/github.com/gin-contrib/sessions#section-readme</code></p>
<h1 id="Gin-实现-restful-风格的-CRUD"><a href="#Gin-实现-restful-风格的-CRUD" class="headerlink" title="Gin 实现 restful 风格的 CRUD"></a>Gin 实现 restful 风格的 CRUD</h1><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;strconv&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	UId  <span class="keyword">int</span>    <span class="string">`json:&quot;uid&quot;`</span></span><br><span class="line">	Name <span class="keyword">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">	Age  <span class="keyword">int</span>    <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> users = <span class="built_in">make</span>([]User, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	u1 := User&#123;<span class="number">1</span>, <span class="string">&quot;tom&quot;</span>, <span class="number">20</span>&#125;</span><br><span class="line">	u2 := User&#123;<span class="number">2</span>, <span class="string">&quot;kite&quot;</span>, <span class="number">30</span>&#125;</span><br><span class="line">	u3 := User&#123;<span class="number">3</span>, <span class="string">&quot;rose&quot;</span>, <span class="number">40</span>&#125;</span><br><span class="line">	users = <span class="built_in">append</span>(users, u1)</span><br><span class="line">	users = <span class="built_in">append</span>(users, u2)</span><br><span class="line">	users = <span class="built_in">append</span>(users, u3)</span><br><span class="line">	fmt.Println(users)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">find</span><span class="params">(uid <span class="keyword">int</span>)</span> <span class="params">(*User, <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i, u := <span class="keyword">range</span> users &#123;</span><br><span class="line">		<span class="keyword">if</span> u.UId == uid &#123;</span><br><span class="line">			<span class="keyword">return</span> &amp;u, i</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span>, <span class="number">-1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">AddUser</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	u4 := User&#123;<span class="number">4</span>, <span class="string">&quot;Joe&quot;</span>, <span class="number">50</span>&#125;</span><br><span class="line">	users = <span class="built_in">append</span>(users, u4)</span><br><span class="line">	c.JSON(<span class="number">200</span>, users)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DelUser</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	uid := c.Param(<span class="string">&quot;uid&quot;</span>)</span><br><span class="line">	id, _ := strconv.Atoi(uid)</span><br><span class="line">	_, i := find(id)</span><br><span class="line">	users = <span class="built_in">append</span>(users[:i], users[i+<span class="number">1</span>:]...)</span><br><span class="line">	c.JSON(<span class="number">200</span>, users)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">UpdateUser</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	uid := c.Param(<span class="string">&quot;uid&quot;</span>)</span><br><span class="line">	id, _ := strconv.Atoi(uid)</span><br><span class="line">	u, _ := find(id)</span><br><span class="line">	u.Name = <span class="string">&quot;修改的Name&quot;</span></span><br><span class="line">	c.JSON(<span class="number">200</span>, u)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">FindUser</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	uid := c.Param(<span class="string">&quot;uid&quot;</span>)</span><br><span class="line">	id, _ := strconv.Atoi(uid)</span><br><span class="line">	u, _ := find(id)</span><br><span class="line">	c.JSON(<span class="number">200</span>, u)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	e := gin.Default()</span><br><span class="line">	e.GET(<span class="string">&quot;/user/:uid&quot;</span>, FindUser)</span><br><span class="line">	e.PUT(<span class="string">&quot;/user/:uid&quot;</span>, UpdateUser)</span><br><span class="line">	e.DELETE(<span class="string">&quot;/user/:uid&quot;</span>, DelUser)</span><br><span class="line">	e.POST(<span class="string">&quot;/user/&quot;</span>, AddUser)</span><br><span class="line">	e.Run()</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Gin-实现路由分组"><a href="#Gin-实现路由分组" class="headerlink" title="Gin 实现路由分组"></a>Gin 实现路由分组</h1><p>假如你的网站有多个模块：博客、教程、视频、问答，每个模块又有多个路由，这样就可以进行路由分组，使用的方法是 router.Group(“分组名称”)</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">F1</span><span class="params">(c *gin.Context)</span></span> &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">F2</span><span class="params">(c *gin.Context)</span></span> &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">F3</span><span class="params">(c *gin.Context)</span></span> &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">F4</span><span class="params">(c *gin.Context)</span></span> &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">F5</span><span class="params">(c *gin.Context)</span></span> &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">F6</span><span class="params">(c *gin.Context)</span></span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	router := gin.Default()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 博客</span></span><br><span class="line">	<span class="comment">// 访问：http://localhost:8080/blog/list</span></span><br><span class="line">	v1 := router.Group(<span class="string">&quot;/blog&quot;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		v1.POST(<span class="string">&quot;/list&quot;</span>, F1)</span><br><span class="line">		v1.POST(<span class="string">&quot;/post&quot;</span>, F2)</span><br><span class="line">		v1.POST(<span class="string">&quot;/add&quot;</span>, F3)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 视频</span></span><br><span class="line">	<span class="comment">// 访问：http://localhost:8080/video/list</span></span><br><span class="line">	v2 := router.Group(<span class="string">&quot;/video&quot;</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		v2.POST(<span class="string">&quot;/list&quot;</span>, F4)</span><br><span class="line">		v2.POST(<span class="string">&quot;/post&quot;</span>, F5)</span><br><span class="line">		v2.POST(<span class="string">&quot;/add&quot;</span>, F6)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	router.Run(<span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Gin-输出渲染"><a href="#Gin-输出渲染" class="headerlink" title="Gin 输出渲染"></a>Gin 输出渲染</h1><p>Gin 支持很多种输出渲染，可以是简单的字符串、JSON、XML、HTML、ProtoBuf。使用的方法如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">c.JSON(<span class="number">200</span>, <span class="literal">nil</span>)</span><br><span class="line">c.XML(<span class="number">200</span>, <span class="literal">nil</span>)</span><br><span class="line">c.HTML(<span class="number">200</span>, <span class="string">&quot;&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">c.String(<span class="number">200</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">c.ProtoBuf(<span class="number">200</span>, <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure>

<p>这里像字符串、JSON、HTML 我们都用过，这里我们再总结一下。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestJson</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.JSON(<span class="number">200</span>, gin.H&#123;</span><br><span class="line">		<span class="string">&quot;name&quot;</span>: <span class="string">&quot;多课网&quot;</span>,</span><br><span class="line">		<span class="string">&quot;site&quot;</span>: <span class="string">&quot;www.duoke360.com&quot;</span>,</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestXML</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.XML(<span class="number">200</span>, gin.H&#123;</span><br><span class="line">		<span class="string">&quot;name&quot;</span>: <span class="string">&quot;多课网&quot;</span>,</span><br><span class="line">		<span class="string">&quot;site&quot;</span>: <span class="string">&quot;www.duoke360.com&quot;</span>,</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestHtml</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;login.html&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestString</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.String(<span class="number">200</span>, <span class="string">&quot;多课网，老郭讲golang&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	e := gin.Default()</span><br><span class="line"></span><br><span class="line">	e.GET(<span class="string">&quot;/test_json&quot;</span>, TestJson)</span><br><span class="line">	e.GET(<span class="string">&quot;/test_xml&quot;</span>, TestXML)</span><br><span class="line">	e.LoadHTMLGlob(<span class="string">&quot;templates/*&quot;</span>)</span><br><span class="line">	e.GET(<span class="string">&quot;/test_html&quot;</span>, TestHtml)</span><br><span class="line">	e.GET(<span class="string">&quot;/test_string&quot;</span>, TestString)</span><br><span class="line"></span><br><span class="line">	e.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Gin-实现文件上传"><a href="#Gin-实现文件上传" class="headerlink" title="Gin 实现文件上传"></a>Gin 实现文件上传</h1><h2 id="创建-html-文件-1"><a href="#创建-html-文件-1" class="headerlink" title="创建 html 文件"></a>创建 html 文件</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/upload&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">      请选择上传文件：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;上传&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Go-Code-1"><a href="#Go-Code-1" class="headerlink" title="Go Code"></a>Go Code</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Upload</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 单文件</span></span><br><span class="line">	file, _ := c.FormFile(<span class="string">&quot;file&quot;</span>)</span><br><span class="line">	log.Println(file.Filename)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 上传文件到项目根目录，使用原文件名</span></span><br><span class="line">	c.SaveUploadedFile(file, file.Filename)</span><br><span class="line"></span><br><span class="line">	c.String(http.StatusOK, fmt.Sprintf(<span class="string">&quot;&#x27;%s&#x27; uploaded!&quot;</span>, file.Filename))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GoUpload</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;upload.html&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	router := gin.Default()</span><br><span class="line">	<span class="comment">// 为 multipart forms 设置较低的内存限制 (默认是 32 MiB)</span></span><br><span class="line">	router.MaxMultipartMemory = <span class="number">8</span> &lt;&lt; <span class="number">20</span> <span class="comment">// 8 MiB</span></span><br><span class="line">	router.LoadHTMLGlob(<span class="string">&quot;templates/*&quot;</span>)</span><br><span class="line">	router.GET(<span class="string">&quot;/upload&quot;</span>, GoUpload)</span><br><span class="line">	router.POST(<span class="string">&quot;/upload&quot;</span>, Upload)</span><br><span class="line">	router.Run(<span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Gin-博客项目-项目架构"><a href="#Gin-博客项目-项目架构" class="headerlink" title="Gin 博客项目-项目架构"></a>Gin 博客项目-项目架构</h1><h2 id="规范包及目录"><a href="#规范包及目录" class="headerlink" title="规范包及目录"></a>规范包及目录</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">|-controller</span><br><span class="line"></span><br><span class="line">|-dao</span><br><span class="line"></span><br><span class="line">|-router</span><br><span class="line"></span><br><span class="line">|-model</span><br><span class="line"></span><br><span class="line">|-assets</span><br><span class="line"></span><br><span class="line">|-templates</span><br></pre></td></tr></table></figure>

<h2 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go mod init blog</span><br></pre></td></tr></table></figure>

<h1 id="Gin-博客项目-集成-gorm"><a href="#Gin-博客项目-集成-gorm" class="headerlink" title="Gin 博客项目-集成 gorm"></a>Gin 博客项目-集成 gorm</h1><h2 id="下载包"><a href="#下载包" class="headerlink" title="下载包"></a>下载包</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">go get -u gorm.io/gorm</span><br><span class="line">go get -u gorm.io/driver/mysql</span><br></pre></td></tr></table></figure>

<h2 id="创建模型"><a href="#创建模型" class="headerlink" title="创建模型"></a>创建模型</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> models</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/jinzhu/gorm&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	gorm.Model</span><br><span class="line">	Username <span class="keyword">string</span> <span class="string">`json:&quot;username&quot;`</span></span><br><span class="line">	Password <span class="keyword">string</span> <span class="string">`json:&quot;passowrd&quot;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="创建-Dao"><a href="#创建-Dao" class="headerlink" title="创建 Dao"></a>创建 Dao</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;pro04/models&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;gorm.io/driver/mysql&quot;</span></span><br><span class="line">	<span class="string">&quot;gorm.io/gorm&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Manager <span class="keyword">interface</span> &#123;</span><br><span class="line">	AddUser(user *models.User)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> manager <span class="keyword">struct</span> &#123;</span><br><span class="line">	db *gorm.DB</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Mgr Manager</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	dsn := <span class="string">&quot;root:123456@tcp(127.0.0.1:3306)/golang_db?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&quot;</span></span><br><span class="line">	db, err := gorm.Open(mysql.Open(dsn), &amp;gorm.Config&#123;&#125;)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(<span class="string">&quot;Failed to init db:&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	Mgr = &amp;manager&#123;db: db&#125;</span><br><span class="line">	db.AutoMigrate(&amp;models.User&#123;&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(mgr *manager)</span> <span class="title">AddUser</span><span class="params">(user *models.User)</span></span> &#123;</span><br><span class="line">	mgr.db.Create(user)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">user := models.User&#123;</span><br><span class="line">Username: username,</span><br><span class="line">Password: password,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dao.Mgr.AddUser(&amp;user)</span><br></pre></td></tr></table></figure>

<h1 id="Gin-博客项目-集成-Bootstrap-创建用户表单"><a href="#Gin-博客项目-集成-Bootstrap-创建用户表单" class="headerlink" title="Gin 博客项目-集成 Bootstrap 创建用户表单"></a>Gin 博客项目-集成 Bootstrap 创建用户表单</h1><h2 id="下载-bootstrap"><a href="#下载-bootstrap" class="headerlink" title="下载 bootstrap"></a>下载 bootstrap</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://getbootstrap.com/</span><br></pre></td></tr></table></figure>

<h2 id="添加-js-和-css-到-assets-目录下面"><a href="#添加-js-和-css-到-assets-目录下面" class="headerlink" title="添加 js 和 css 到 assets 目录下面"></a>添加 js 和 css 到 assets 目录下面</h2><h2 id="创建添加用户-html"><a href="#创建添加用户-html" class="headerlink" title="创建添加用户 html"></a>创建添加用户 html</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">        &lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge&quot;</span>&gt;</span><br><span class="line">        &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">        &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;/assets/css/bootstrap.min.css&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">        &lt;title&gt;用户管理&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;div class=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">            &lt;div class=<span class="string">&quot;row mt-3 justify-content-center&quot;</span>&gt;</span><br><span class="line">                &lt;div class=<span class="string">&quot;col-md-4&quot;</span>&gt;</span><br><span class="line">                    &lt;form method=<span class="string">&quot;post&quot;</span> action=<span class="string">&quot;/users&quot;</span>&gt;</span><br><span class="line">                        &lt;div class=<span class="string">&quot;mb-3&quot;</span>&gt;</span><br><span class="line">                            &lt;label <span class="keyword">for</span>=<span class="string">&quot;exampleInputEmail1&quot;</span> class=<span class="string">&quot;form-label&quot;</span>&gt;用户名称&lt;/label&gt;</span><br><span class="line">                            &lt;input <span class="keyword">type</span>=<span class="string">&quot;username&quot;</span> class=<span class="string">&quot;form-control&quot;</span></span><br><span class="line">                                id=<span class="string">&quot;exampleInputEmail1&quot;</span></span><br><span class="line">                                aria-describedby=<span class="string">&quot;emailHelp&quot;</span>&gt;</span><br><span class="line">                            &lt;div id=<span class="string">&quot;emailHelp&quot;</span> class=<span class="string">&quot;form-text&quot;</span>&gt;We<span class="string">&#x27;ll never</span></span><br><span class="line"><span class="string">                                share your</span></span><br><span class="line"><span class="string">                                email with anyone else.&lt;/div&gt;</span></span><br><span class="line"><span class="string">                        &lt;/div&gt;</span></span><br><span class="line"><span class="string">                        &lt;div class=&quot;mb-3&quot;&gt;</span></span><br><span class="line"><span class="string">                            &lt;label for=&quot;exampleInputPassword1&quot;</span></span><br><span class="line"><span class="string">                                class=&quot;form-label&quot;&gt;密码&lt;/label&gt;</span></span><br><span class="line"><span class="string">                            &lt;input type=&quot;password&quot; class=&quot;form-control&quot;</span></span><br><span class="line"><span class="string">                                name=&quot;password&quot;</span></span><br><span class="line"><span class="string">                                id=&quot;exampleInputPassword1&quot;&gt;</span></span><br><span class="line"><span class="string">                        &lt;/div&gt;</span></span><br><span class="line"><span class="string">                        &lt;div class=&quot;mb-3 form-check&quot;&gt;</span></span><br><span class="line"><span class="string">                            &lt;input type=&quot;checkbox&quot; class=&quot;form-check-input&quot;</span></span><br><span class="line"><span class="string">                                id=&quot;exampleCheck1&quot;&gt;</span></span><br><span class="line"><span class="string">                            &lt;label class=&quot;form-check-label&quot; for=&quot;exampleCheck1&quot;&gt;Check</span></span><br><span class="line"><span class="string">                                me</span></span><br><span class="line"><span class="string">                                out&lt;/label&gt;</span></span><br><span class="line"><span class="string">                        &lt;/div&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                        &lt;textarea name=&quot;test&quot; id=&quot;test&quot; cols=&quot;30&quot; rows=&quot;10&quot;&gt;&lt;/textarea&gt;</span></span><br><span class="line"><span class="string">                        &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;添加&lt;/button&gt;</span></span><br><span class="line"><span class="string">                    &lt;/form&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                    &lt;hr&gt;</span></span><br><span class="line"><span class="string">                    &lt;ul class=&quot;list-group list-group-flush&quot;&gt;</span></span><br><span class="line"><span class="string">                        &lt;li class=&quot;list-group-item&quot;&gt;tom 123&lt;/li&gt;</span></span><br><span class="line"><span class="string">                        &lt;li class=&quot;list-group-item&quot;&gt;kite 456&lt;/li&gt;</span></span><br><span class="line"><span class="string">                    &lt;/ul&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="Gin-博客项目-实现控制器和路由"><a href="#Gin-博客项目-实现控制器和路由" class="headerlink" title="Gin 博客项目-实现控制器和路由"></a>Gin 博客项目-实现控制器和路由</h1><h2 id="控制器-controller"><a href="#控制器-controller" class="headerlink" title="控制器 controller"></a>控制器 controller</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> controller</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;pro04/dao&quot;</span></span><br><span class="line">	<span class="string">&quot;pro04/models&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">AddUser</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	username := c.PostForm(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">	password := c.PostForm(<span class="string">&quot;password&quot;</span>)</span><br><span class="line"></span><br><span class="line">	user := models.User&#123;</span><br><span class="line">		Username: username,</span><br><span class="line">		Password: password,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	dao.Mgr.AddUser(&amp;user)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ListUser</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;user.html&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="路由-router"><a href="#路由-router" class="headerlink" title="路由 router"></a>路由 router</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> routers</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;pro04/controller&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Start</span><span class="params">()</span></span> &#123;</span><br><span class="line">	e := gin.Default()</span><br><span class="line">	e.LoadHTMLGlob(<span class="string">&quot;templates/*&quot;</span>)</span><br><span class="line">	e.Static(<span class="string">&quot;/assets&quot;</span>, <span class="string">&quot;./assets&quot;</span>)</span><br><span class="line"></span><br><span class="line">	e.GET(<span class="string">&quot;/users&quot;</span>, controller.ListUser)</span><br><span class="line">	e.POST(<span class="string">&quot;/users&quot;</span>, controller.AddUser)</span><br><span class="line">	e.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Gin-博客项目-设计静态页面"><a href="#Gin-博客项目-设计静态页面" class="headerlink" title="Gin 博客项目-设计静态页面"></a>Gin 博客项目-设计静态页面</h1><h2 id="header"><a href="#header" class="headerlink" title="header"></a>header</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;define &quot;header&quot;&#125;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">&quot;p-3 bg-dark text-white&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;navbar-brand&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>多课网<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0&quot;</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link px-2 text-secondary&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link px-2 text-white&quot;</span>&gt;</span>博客<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">&quot;search&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;form-control form-control-dark&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">&quot;Search...&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">aria-label</span>=<span class="string">&quot;Search&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-end&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-outline-light me-2&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-warning&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/register&quot;</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">&#123;&#123;end&#125;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="注册-register-html"><a href="#注册-register-html" class="headerlink" title="注册 register.html"></a>注册 register.html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/assets/css/bootstrap.min.css&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>用户注册<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123;template &quot;header&quot;&#125;&#125;</span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row  justify-content-center mt-3&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-4&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-3&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputEmail1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-label&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span>用户名称&lt;/label</span><br><span class="line">              &gt;</span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">                <span class="attr">type</span>=<span class="string">&quot;email&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">id</span>=<span class="string">&quot;exampleInputEmail1&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">aria-describedby</span>=<span class="string">&quot;emailHelp&quot;</span></span></span><br><span class="line"><span class="tag">              /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-3&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputPassword1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-label&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span>用户密码&lt;/label</span><br><span class="line">              &gt;</span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">                <span class="attr">type</span>=<span class="string">&quot;password&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">id</span>=<span class="string">&quot;exampleInputPassword1&quot;</span></span></span><br><span class="line"><span class="tag">              /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-3 form-check&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">                <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">class</span>=<span class="string">&quot;form-check-input&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">id</span>=<span class="string">&quot;exampleCheck1&quot;</span></span></span><br><span class="line"><span class="tag">              /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;form-check-label&quot;</span> <span class="attr">for</span>=<span class="string">&quot;exampleCheck1&quot;</span>&gt;</span>记住我<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>添加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="登录-login-html"><a href="#登录-login-html" class="headerlink" title="登录 login.html"></a>登录 login.html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/assets/css/bootstrap.min.css&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>用户注册<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123;template &quot;header&quot;&#125;&#125;</span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row  justify-content-center mt-3&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-4&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-3&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputEmail1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-label&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span>用户名称&lt;/label</span><br><span class="line">              &gt;</span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">                <span class="attr">type</span>=<span class="string">&quot;email&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">id</span>=<span class="string">&quot;exampleInputEmail1&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">aria-describedby</span>=<span class="string">&quot;emailHelp&quot;</span></span></span><br><span class="line"><span class="tag">              /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-3&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputPassword1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-label&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span>用户密码&lt;/label</span><br><span class="line">              &gt;</span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">                <span class="attr">type</span>=<span class="string">&quot;password&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">id</span>=<span class="string">&quot;exampleInputPassword1&quot;</span></span></span><br><span class="line"><span class="tag">              /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-3 form-check&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">                <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">class</span>=<span class="string">&quot;form-check-input&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">id</span>=<span class="string">&quot;exampleCheck1&quot;</span></span></span><br><span class="line"><span class="tag">              /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;form-check-label&quot;</span> <span class="attr">for</span>=<span class="string">&quot;exampleCheck1&quot;</span>&gt;</span>记住我<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>添加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="首页-index-html"><a href="#首页-index-html" class="headerlink" title="首页 index.html"></a>首页 index.html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/assets/css/bootstrap.min.css&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123;template &quot;header&quot;&#125;&#125;</span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row justify-content-center mt-3&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-4&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>首页...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="Gin-博客项目-用户注册"><a href="#Gin-博客项目-用户注册" class="headerlink" title="Gin 博客项目-用户注册"></a>Gin 博客项目-用户注册</h1><h2 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">RegisterUser</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	username := c.PostForm(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">	password := c.PostForm(<span class="string">&quot;password&quot;</span>)</span><br><span class="line"></span><br><span class="line">	user := model.User&#123;</span><br><span class="line">		Username: username,</span><br><span class="line">		Password: password,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	dao.Mgr.AddUser(&amp;user)</span><br><span class="line"></span><br><span class="line">	c.Redirect(<span class="number">200</span>, <span class="string">&quot;/&quot;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GoRegister</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;register.html&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="router"><a href="#router" class="headerlink" title="router"></a>router</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> router</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;blog/controller&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Start</span><span class="params">()</span></span> &#123;</span><br><span class="line">	e := gin.Default()</span><br><span class="line">	e.LoadHTMLGlob(<span class="string">&quot;templates/*&quot;</span>)</span><br><span class="line">	e.Static(<span class="string">&quot;/assets&quot;</span>, <span class="string">&quot;./assets&quot;</span>)</span><br><span class="line">	e.GET(<span class="string">&quot;/&quot;</span>, controller.Index)</span><br><span class="line">	e.POST(<span class="string">&quot;/register&quot;</span>, controller.RegisterUser)</span><br><span class="line">	e.GET(<span class="string">&quot;/register&quot;</span>, controller.GoRegister)</span><br><span class="line">	e.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Gin-博客项目-用户登录"><a href="#Gin-博客项目-用户登录" class="headerlink" title="Gin 博客项目-用户登录"></a>Gin 博客项目-用户登录</h1><h2 id="dao"><a href="#dao" class="headerlink" title="dao"></a>dao</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;blog/model&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;gorm.io/driver/mysql&quot;</span></span><br><span class="line">	<span class="string">&quot;gorm.io/gorm&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Manager <span class="keyword">interface</span> &#123;</span><br><span class="line">	AddUser(user *model.User)</span><br><span class="line">	Login(username <span class="keyword">string</span>) model.User</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> manager <span class="keyword">struct</span> &#123;</span><br><span class="line">	db *gorm.DB</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Mgr Manager</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	dsn := <span class="string">&quot;root:123456@tcp(127.0.0.1:3306)/golang_db?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&quot;</span></span><br><span class="line">	db, err := gorm.Open(mysql.Open(dsn), &amp;gorm.Config&#123;&#125;)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(<span class="string">&quot;Failed to init db:&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	Mgr = &amp;manager&#123;db: db&#125;</span><br><span class="line">	db.AutoMigrate(&amp;model.User&#123;&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(mgr *manager)</span> <span class="title">AddUser</span><span class="params">(user *model.User)</span></span> &#123;</span><br><span class="line">	mgr.db.Create(user)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(mgr *manager)</span> <span class="title">Login</span><span class="params">(username <span class="keyword">string</span>)</span> <span class="title">model</span>.<span class="title">User</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> user model.User</span><br><span class="line">	mgr.db.Where(<span class="string">&quot;username=?&quot;</span>, username).First(&amp;user)</span><br><span class="line">	<span class="keyword">return</span> user</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="controller-1"><a href="#controller-1" class="headerlink" title="controller"></a>controller</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> controller</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;blog/dao&quot;</span></span><br><span class="line">	<span class="string">&quot;blog/model&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">RegisterUser</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	username := c.PostForm(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">	password := c.PostForm(<span class="string">&quot;password&quot;</span>)</span><br><span class="line"></span><br><span class="line">	user := model.User&#123;</span><br><span class="line">		Username: username,</span><br><span class="line">		Password: password,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	dao.Mgr.AddUser(&amp;user)</span><br><span class="line"></span><br><span class="line">	c.Redirect(<span class="number">200</span>, <span class="string">&quot;/&quot;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GoRegister</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;register.html&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GoLogin</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;login.html&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Login</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	username := c.PostForm(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">	password := c.PostForm(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">	fmt.Println(username)</span><br><span class="line">	u := dao.Mgr.Login(username)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> u.Username == <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">		c.HTML(<span class="number">200</span>, <span class="string">&quot;login.html&quot;</span>, <span class="string">&quot;用户名不存在！&quot;</span>)</span><br><span class="line">		fmt.Println(<span class="string">&quot;用户名不存在！&quot;</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> u.Password != password &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;密码错误&quot;</span>)</span><br><span class="line">			c.HTML(<span class="number">200</span>, <span class="string">&quot;login.html&quot;</span>, <span class="string">&quot;密码错误&quot;</span>)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;登录成功&quot;</span>)</span><br><span class="line">			c.Redirect(<span class="number">301</span>, <span class="string">&quot;/&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Index</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;index.html&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ListUser</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;index.html&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="router-1"><a href="#router-1" class="headerlink" title="router"></a>router</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> router</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;blog/controller&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Start</span><span class="params">()</span></span> &#123;</span><br><span class="line">	e := gin.Default()</span><br><span class="line">	e.LoadHTMLGlob(<span class="string">&quot;templates/*&quot;</span>)</span><br><span class="line">	e.Static(<span class="string">&quot;/assets&quot;</span>, <span class="string">&quot;./assets&quot;</span>)</span><br><span class="line"></span><br><span class="line">	e.GET(<span class="string">&quot;/login&quot;</span>, controller.GoLogin)</span><br><span class="line">	e.POST(<span class="string">&quot;/login&quot;</span>, controller.Login)</span><br><span class="line"></span><br><span class="line">	e.GET(<span class="string">&quot;/&quot;</span>, controller.Index)</span><br><span class="line">	e.POST(<span class="string">&quot;/register&quot;</span>, controller.RegisterUser)</span><br><span class="line">	e.GET(<span class="string">&quot;/register&quot;</span>, controller.GoRegister)</span><br><span class="line">	e.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="login-html"><a href="#login-html" class="headerlink" title="login.html"></a>login.html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/assets/css/bootstrap.min.css&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>用户注册<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123;template &quot;header&quot;&#125;&#125;</span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row  justify-content-center mt-3&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-4&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;background-color: red;&quot;</span>&gt;</span>&#123;&#123;.&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/login&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-3&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputEmail1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-label&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span>用户名称&lt;/label</span><br><span class="line">              &gt;</span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">                <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">name</span>=<span class="string">&quot;username&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">id</span>=<span class="string">&quot;exampleInputEmail1&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">aria-describedby</span>=<span class="string">&quot;emailHelp&quot;</span></span></span><br><span class="line"><span class="tag">              /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-3&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;exampleInputPassword1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-label&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span>用户密码&lt;/label</span><br><span class="line">              &gt;</span><br><span class="line">              <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">                <span class="attr">type</span>=<span class="string">&quot;password&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">name</span>=<span class="string">&quot;password&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">id</span>=<span class="string">&quot;exampleInputPassword1&quot;</span></span></span><br><span class="line"><span class="tag">              /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="Gin-博客项目-集成-markdown-编辑器"><a href="#Gin-博客项目-集成-markdown-编辑器" class="headerlink" title="Gin 博客项目-集成 markdown 编辑器"></a>Gin 博客项目-集成 markdown 编辑器</h1><h2 id="下载-mdeditor"><a href="#下载-mdeditor" class="headerlink" title="下载 mdeditor"></a>下载 mdeditor</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://pandao.github.io/editor.md/</span><br></pre></td></tr></table></figure>

<h2 id="集成"><a href="#集成" class="headerlink" title="集成"></a>集成</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/assets/css/bootstrap.min.css&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/assets/editormd/css/editormd.css&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123;template &quot;header&quot;&#125;&#125;</span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test-editormd&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">style</span>=<span class="string">&quot;display:none;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    var testEditor; $(function() &#123; testEditor = editormd(&quot;test-editormd&quot;, &#123;</span><br><span class="line">    width : &quot;100%&quot;, height : 640, syncScrolling : &quot;single&quot;, path :</span><br><span class="line">    &quot;assets/editormd/lib/&quot; &#125;); &#125;);</span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="Gin-博客项目-创建博客模型和-DAO"><a href="#Gin-博客项目-创建博客模型和-DAO" class="headerlink" title="Gin 博客项目-创建博客模型和 DAO"></a>Gin 博客项目-创建博客模型和 DAO</h1><h2 id="创建模型-1"><a href="#创建模型-1" class="headerlink" title="创建模型"></a>创建模型</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Post <span class="keyword">struct</span> &#123;</span><br><span class="line">	gorm.Model</span><br><span class="line">	Title   <span class="keyword">string</span></span><br><span class="line">	Content <span class="keyword">string</span> <span class="string">`gorm:&quot;type:text&quot;`</span></span><br><span class="line">	Tag     <span class="keyword">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="创建-DAO"><a href="#创建-DAO" class="headerlink" title="创建 DAO"></a>创建 DAO</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dao</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;blog/model&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;gorm.io/driver/mysql&quot;</span></span><br><span class="line">	<span class="string">&quot;gorm.io/gorm&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Manager <span class="keyword">interface</span> &#123;</span><br><span class="line">	AddUser(user *model.User)</span><br><span class="line">	Login(username <span class="keyword">string</span>) model.User</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 博客操作</span></span><br><span class="line">	AddPost(post *model.Post)</span><br><span class="line">	GetAllPost() []model.Post</span><br><span class="line">	getPost(pid <span class="keyword">int</span>) model.Post</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> manager <span class="keyword">struct</span> &#123;</span><br><span class="line">	db *gorm.DB</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Mgr Manager</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	dsn := <span class="string">&quot;root:123456@tcp(127.0.0.1:3306)/golang_db?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&quot;</span></span><br><span class="line">	db, err := gorm.Open(mysql.Open(dsn), &amp;gorm.Config&#123;&#125;)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(<span class="string">&quot;Failed to init db:&quot;</span>, err)</span><br><span class="line">	&#125;</span><br><span class="line">	Mgr = &amp;manager&#123;db: db&#125;</span><br><span class="line">	db.AutoMigrate(&amp;model.User&#123;&#125;)</span><br><span class="line">	db.AutoMigrate(&amp;model.Post&#123;&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(mgr *manager)</span> <span class="title">AddUser</span><span class="params">(user *model.User)</span></span> &#123;</span><br><span class="line">	mgr.db.Create(user)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(mgr *manager)</span> <span class="title">Login</span><span class="params">(username <span class="keyword">string</span>)</span> <span class="title">model</span>.<span class="title">User</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> user model.User</span><br><span class="line">	mgr.db.Where(<span class="string">&quot;username=?&quot;</span>, username).First(&amp;user)</span><br><span class="line">	<span class="keyword">return</span> user</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 博客操作</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(mgr *manager)</span> <span class="title">AddPost</span><span class="params">(post *model.Post)</span></span> &#123;</span><br><span class="line">	mgr.db.Create(post)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(mgr *manager)</span> <span class="title">GetAllPost</span><span class="params">()</span> []<span class="title">model</span>.<span class="title">Post</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> posts = <span class="built_in">make</span>([]model.Post, <span class="number">10</span>)</span><br><span class="line">	mgr.db.Find(&amp;posts)</span><br><span class="line">	<span class="keyword">return</span> posts</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(mgr *manager)</span> <span class="title">getPost</span><span class="params">(pid <span class="keyword">int</span>)</span> <span class="title">model</span>.<span class="title">Post</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> post model.Post</span><br><span class="line">	mgr.db.First(&amp;post, pid)</span><br><span class="line">	<span class="keyword">return</span> post</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Gin-博客项目-创建博客控制器和路由"><a href="#Gin-博客项目-创建博客控制器和路由" class="headerlink" title="Gin 博客项目-创建博客控制器和路由"></a>Gin 博客项目-创建博客控制器和路由</h1><h2 id="创建控制器"><a href="#创建控制器" class="headerlink" title="创建控制器"></a>创建控制器</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> controller</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;blog/dao&quot;</span></span><br><span class="line">	<span class="string">&quot;blog/model&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">RegisterUser</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	username := c.PostForm(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">	password := c.PostForm(<span class="string">&quot;password&quot;</span>)</span><br><span class="line"></span><br><span class="line">	user := model.User&#123;</span><br><span class="line">		Username: username,</span><br><span class="line">		Password: password,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	dao.Mgr.AddUser(&amp;user)</span><br><span class="line"></span><br><span class="line">	c.Redirect(<span class="number">200</span>, <span class="string">&quot;/&quot;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GoRegister</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;register.html&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GoLogin</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;login.html&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Login</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	username := c.PostForm(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">	password := c.PostForm(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">	fmt.Println(username)</span><br><span class="line">	u := dao.Mgr.Login(username)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> u.Username == <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">		c.HTML(<span class="number">200</span>, <span class="string">&quot;login.html&quot;</span>, <span class="string">&quot;用户名不存在！&quot;</span>)</span><br><span class="line">		fmt.Println(<span class="string">&quot;用户名不存在！&quot;</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> u.Password != password &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;密码错误&quot;</span>)</span><br><span class="line">			c.HTML(<span class="number">200</span>, <span class="string">&quot;login.html&quot;</span>, <span class="string">&quot;密码错误&quot;</span>)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			fmt.Println(<span class="string">&quot;登录成功&quot;</span>)</span><br><span class="line">			c.Redirect(<span class="number">301</span>, <span class="string">&quot;/&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Index</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;index.html&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ListUser</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;index.html&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetPostIndex</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	posts := dao.Mgr.GetAllPost()</span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;postIndex.html&quot;</span>, posts)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">AddPost</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	title := c.PostForm(<span class="string">&quot;title&quot;</span>)</span><br><span class="line">	tag := c.PostForm(<span class="string">&quot;tag&quot;</span>)</span><br><span class="line">	content := c.PostForm(<span class="string">&quot;content&quot;</span>)</span><br><span class="line"></span><br><span class="line">	post := model.Post&#123;</span><br><span class="line">		Title:   title,</span><br><span class="line">		Tag:     tag,</span><br><span class="line">		Content: content,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	dao.Mgr.AddPost(&amp;post)</span><br><span class="line"></span><br><span class="line">	c.Redirect(<span class="number">302</span>, <span class="string">&quot;/post_index&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GoAddPost</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;post.html&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="创建路由"><a href="#创建路由" class="headerlink" title="创建路由"></a>创建路由</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> router</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;blog/controller&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Start</span><span class="params">()</span></span> &#123;</span><br><span class="line">	e := gin.Default()</span><br><span class="line">	e.LoadHTMLGlob(<span class="string">&quot;templates/*&quot;</span>)</span><br><span class="line">	e.Static(<span class="string">&quot;/assets&quot;</span>, <span class="string">&quot;./assets&quot;</span>)</span><br><span class="line">	e.GET(<span class="string">&quot;/login&quot;</span>, controller.GoLogin)</span><br><span class="line">	e.POST(<span class="string">&quot;/login&quot;</span>, controller.Login)</span><br><span class="line"></span><br><span class="line">	e.GET(<span class="string">&quot;/&quot;</span>, controller.Index)</span><br><span class="line">	e.POST(<span class="string">&quot;/register&quot;</span>, controller.RegisterUser)</span><br><span class="line">	e.GET(<span class="string">&quot;/register&quot;</span>, controller.GoRegister)</span><br><span class="line">	e.GET(<span class="string">&quot;/post_index&quot;</span>, controller.GetPostIndex)</span><br><span class="line">	e.POST(<span class="string">&quot;/post&quot;</span>, controller.AddPost)</span><br><span class="line">	e.GET(<span class="string">&quot;/post&quot;</span>, controller.GoAddPost)</span><br><span class="line">	e.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Gin-博客项目-添加博客"><a href="#Gin-博客项目-添加博客" class="headerlink" title="Gin 博客项目-添加博客"></a>Gin 博客项目-添加博客</h1><h2 id="添加博客页面"><a href="#添加博客页面" class="headerlink" title="添加博客页面"></a>添加博客页面</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;/assets/css/bootstrap.min.css&quot;</span>&gt;</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;/assets/editormd/css/editormd.css&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;title&gt;添加博客&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">      &#123;&#123;template <span class="string">&quot;header&quot;</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      &lt;form action=<span class="string">&quot;/post&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        &lt;div class=<span class="string">&quot;row&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">            &lt;div class=<span class="string">&quot;col-md-8&quot;</span>&gt;</span><br><span class="line">              &lt;div id=<span class="string">&quot;test-editormd&quot;</span>&gt;</span><br><span class="line">                &lt;textarea style=<span class="string">&quot;display:none;&quot;</span> name=<span class="string">&quot;content&quot;</span>&gt;&lt;/textarea&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">            &lt;div class=<span class="string">&quot;col-md-4 mt-3&quot;</span>&gt;</span><br><span class="line">              &lt;label <span class="keyword">for</span>=<span class="string">&quot;title&quot;</span> class=<span class="string">&quot;form-label&quot;</span>&gt;请输入标题&lt;/label&gt;</span><br><span class="line">              &lt;input <span class="keyword">type</span>=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;title&quot;</span> class=<span class="string">&quot;form-control&quot;</span> id=<span class="string">&quot;title&quot;</span>&gt;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">              &lt;label <span class="keyword">for</span>=<span class="string">&quot;tag&quot;</span> class=<span class="string">&quot;form-label&quot;</span>&gt;请输入标签&lt;/label&gt;</span><br><span class="line">              &lt;input <span class="keyword">type</span>=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;tag&quot;</span>  class=<span class="string">&quot;form-control&quot;</span> id=<span class="string">&quot;tag&quot;</span>&gt;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">              &lt;button <span class="keyword">type</span>=<span class="string">&quot;submit&quot;</span> class=<span class="string">&quot;btn btn-primary&quot;</span>&gt;添加&lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> testEditor;</span><br><span class="line">      $(function() &#123;</span><br><span class="line">          testEditor = editormd(<span class="string">&quot;test-editormd&quot;</span>, &#123;</span><br><span class="line">              width   : <span class="string">&quot;100%&quot;</span>,</span><br><span class="line">              height  : <span class="number">450</span>,</span><br><span class="line">              syncScrolling : <span class="string">&quot;single&quot;</span>,</span><br><span class="line">              path    : <span class="string">&quot;assets/editormd/lib/&quot;</span>,</span><br><span class="line">              watch : <span class="literal">false</span>,</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h1 id="Gin-博客项目-实现博客列表"><a href="#Gin-博客项目-实现博客列表" class="headerlink" title="Gin 博客项目-实现博客列表"></a>Gin 博客项目-实现博客列表</h1><h2 id="博客列表"><a href="#博客列表" class="headerlink" title="博客列表"></a>博客列表</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;/assets/css/bootstrap.min.css&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;title&gt;博客列表&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div class=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">      &#123;&#123;template <span class="string">&quot;header&quot;</span>&#125;&#125;</span><br><span class="line">      &lt;div class=<span class="string">&quot;row mt-3&quot;</span>&gt;</span><br><span class="line">        &#123;&#123;<span class="keyword">range</span> $post := . -&#125;&#125;</span><br><span class="line">        &lt;div class=<span class="string">&quot;col-md-6&quot;</span>&gt;</span><br><span class="line">          &lt;div class=<span class="string">&quot;row g-0 border rounded overflow-hidden flex-md-row mb-4</span></span><br><span class="line"><span class="string">            shadow-sm h-md-250 position-relative&quot;</span>&gt;</span><br><span class="line">            &lt;div class=<span class="string">&quot;col p-4 d-flex flex-column position-static&quot;</span>&gt;</span><br><span class="line">              &lt;strong class=<span class="string">&quot;d-inline-block mb-2 text-primary&quot;</span>&gt;分类&lt;/strong&gt;</span><br><span class="line">              &lt;h3 class=<span class="string">&quot;mb-0&quot;</span>&gt;&#123;&#123;$post.Title&#125;&#125;&lt;/h3&gt;</span><br><span class="line">              &lt;div class=<span class="string">&quot;mb-1 text-muted&quot;</span>&gt;Nov <span class="number">12</span>&lt;/div&gt;</span><br><span class="line">              &lt;p class=<span class="string">&quot;card-text mb-auto&quot;</span>&gt;&#123;&#123;$post.Content&#125;&#125;&lt;/p&gt;</span><br><span class="line">              &lt;a href=<span class="string">&quot;#&quot;</span> class=<span class="string">&quot;stretched-link&quot;</span>&gt;阅读更多...&lt;/a&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=<span class="string">&quot;col-auto d-none d-lg-block&quot;</span>&gt;</span><br><span class="line">              &lt;svg class=<span class="string">&quot;bd-placeholder-img&quot;</span> width=<span class="string">&quot;200&quot;</span> height=<span class="string">&quot;250&quot;</span></span><br><span class="line">                xmlns=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> role=<span class="string">&quot;img&quot;</span></span><br><span class="line">                aria-label=<span class="string">&quot;Placeholder: Thumbnail&quot;</span></span><br><span class="line">                preserveAspectRatio=<span class="string">&quot;xMidYMid slice&quot;</span> focusable=<span class="string">&quot;false&quot;</span>&gt;&lt;title&gt;Placeholder&lt;/title&gt;&lt;rect</span><br><span class="line">                  width=<span class="string">&quot;100%&quot;</span> height=<span class="string">&quot;100%&quot;</span> fill=<span class="string">&quot;#55595c&quot;</span>&gt;&lt;/rect&gt;&lt;text x=<span class="string">&quot;50%&quot;</span></span><br><span class="line">                  y=<span class="string">&quot;50%&quot;</span> fill=<span class="string">&quot;#eceeef&quot;</span> dy=<span class="string">&quot;.3em&quot;</span>&gt;博客封面&lt;/text&gt;&lt;/svg&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &#123;&#123;- end&#125;&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h1 id="Gin-博客项目-实现博客详细"><a href="#Gin-博客项目-实现博客详细" class="headerlink" title="Gin 博客项目-实现博客详细"></a>Gin 博客项目-实现博客详细</h1><h2 id="博客详细页面"><a href="#博客详细页面" class="headerlink" title="博客详细页面"></a>博客详细页面</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/assets/css/bootstrap.min.css&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/assets/editormd/css/editormd.css&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>博客详细<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123;template &quot;header&quot;&#125;&#125;</span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-12&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;.Title&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">          &#123;&#123;.Content&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="博客详细控制器"><a href="#博客详细控制器" class="headerlink" title="博客详细控制器"></a>博客详细控制器</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">PostDetail</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	s := c.Query(<span class="string">&quot;pid&quot;</span>)</span><br><span class="line">	pid, _ := strconv.Atoi(s)</span><br><span class="line">	p := dao.Mgr.GetPost(pid)</span><br><span class="line"></span><br><span class="line">	content := blackfriday.Run([]<span class="keyword">byte</span>(p.Content))</span><br><span class="line"></span><br><span class="line">	c.HTML(<span class="number">200</span>, <span class="string">&quot;detail.html&quot;</span>, gin.H&#123;</span><br><span class="line">		<span class="string">&quot;Title&quot;</span>:   p.Title,</span><br><span class="line">		<span class="string">&quot;Content&quot;</span>: template.HTML(content),</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="beego-起步"><a href="#beego-起步" class="headerlink" title="beego 起步"></a>beego 起步</h1><h2 id="下载安装-beego"><a href="#下载安装-beego" class="headerlink" title="下载安装 beego"></a>下载安装 beego</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> get github.com/astaxie/beego</span><br></pre></td></tr></table></figure>

<h2 id="beego-命令行工具-bee"><a href="#beego-命令行工具-bee" class="headerlink" title="beego 命令行工具 bee"></a>beego 命令行工具 bee</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> get github.com/beego/bee</span><br></pre></td></tr></table></figure>

<h2 id="第一个-beego-项目"><a href="#第一个-beego-项目" class="headerlink" title="第一个 beego 项目"></a>第一个 beego 项目</h2><ol>
<li>使用 bee 命令创建项目<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bee new myproject</span><br></pre></td></tr></table></figure></li>
<li>项目目录结构<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">myproject</span><br><span class="line">├── conf</span><br><span class="line">│   └── app.conf</span><br><span class="line">├── controllers</span><br><span class="line">│   └── <span class="keyword">default</span>.<span class="keyword">go</span></span><br><span class="line">├── main.<span class="keyword">go</span></span><br><span class="line">├── models</span><br><span class="line">├── routers</span><br><span class="line">│   └── router.<span class="keyword">go</span></span><br><span class="line">├── static</span><br><span class="line">│   ├── css</span><br><span class="line">│   ├── img</span><br><span class="line">│   └── js</span><br><span class="line">├── tests</span><br><span class="line">│   └── default_test.<span class="keyword">go</span></span><br><span class="line">└── views</span><br><span class="line">    └── index.tpl</span><br></pre></td></tr></table></figure></li>
<li>运行项目<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bee run</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="beego-restful-api"><a href="#beego-restful-api" class="headerlink" title="beego restful api"></a>beego restful api</h1><h2 id="创建-restful-api-项目"><a href="#创建-restful-api-项目" class="headerlink" title="创建 restful api 项目"></a>创建 restful api 项目</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bee api apiproject</span><br></pre></td></tr></table></figure>

<h2 id="创建模型-2"><a href="#创建模型-2" class="headerlink" title="创建模型"></a>创建模型</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> models</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;errors&quot;</span></span><br><span class="line">	<span class="string">&quot;strconv&quot;</span></span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">	UserList <span class="keyword">map</span>[<span class="keyword">string</span>]*User</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	UserList = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]*User)</span><br><span class="line">	u := User&#123;<span class="string">&quot;user_11111&quot;</span>, <span class="string">&quot;astaxie&quot;</span>, <span class="string">&quot;11111&quot;</span>, Profile&#123;<span class="string">&quot;male&quot;</span>, <span class="number">20</span>, <span class="string">&quot;Singapore&quot;</span>, <span class="string">&quot;astaxie@gmail.com&quot;</span>&#125;&#125;</span><br><span class="line">	UserList[<span class="string">&quot;user_11111&quot;</span>] = &amp;u</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id       <span class="keyword">string</span></span><br><span class="line">	Username <span class="keyword">string</span></span><br><span class="line">	Password <span class="keyword">string</span></span><br><span class="line">	Profile  Profile</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Profile <span class="keyword">struct</span> &#123;</span><br><span class="line">	Gender  <span class="keyword">string</span></span><br><span class="line">	Age     <span class="keyword">int</span></span><br><span class="line">	Address <span class="keyword">string</span></span><br><span class="line">	Email   <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">AddUser</span><span class="params">(u User)</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	u.Id = <span class="string">&quot;user_&quot;</span> + strconv.FormatInt(time.Now().UnixNano(), <span class="number">10</span>)</span><br><span class="line">	UserList[u.Id] = &amp;u</span><br><span class="line">	<span class="keyword">return</span> u.Id</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetUser</span><span class="params">(uid <span class="keyword">string</span>)</span> <span class="params">(u *User, err error)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> u, ok := UserList[uid]; ok &#123;</span><br><span class="line">		<span class="keyword">return</span> u, <span class="literal">nil</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span>, errors.New(<span class="string">&quot;User not exists&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetAllUsers</span><span class="params">()</span> <span class="title">map</span>[<span class="title">string</span>]*<span class="title">User</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> UserList</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">UpdateUser</span><span class="params">(uid <span class="keyword">string</span>, uu *User)</span> <span class="params">(a *User, err error)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> u, ok := UserList[uid]; ok &#123;</span><br><span class="line">		<span class="keyword">if</span> uu.Username != <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">			u.Username = uu.Username</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> uu.Password != <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">			u.Password = uu.Password</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> uu.Profile.Age != <span class="number">0</span> &#123;</span><br><span class="line">			u.Profile.Age = uu.Profile.Age</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> uu.Profile.Address != <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">			u.Profile.Address = uu.Profile.Address</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> uu.Profile.Gender != <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">			u.Profile.Gender = uu.Profile.Gender</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> uu.Profile.Email != <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">			u.Profile.Email = uu.Profile.Email</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> u, <span class="literal">nil</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span>, errors.New(<span class="string">&quot;User Not Exist&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Login</span><span class="params">(username, password <span class="keyword">string</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> _, u := <span class="keyword">range</span> UserList &#123;</span><br><span class="line">		<span class="keyword">if</span> u.Username == username &amp;&amp; u.Password == password &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">DeleteUser</span><span class="params">(uid <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">	<span class="built_in">delete</span>(UserList, uid)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="创建控制器-controller"><a href="#创建控制器-controller" class="headerlink" title="创建控制器 controller"></a>创建控制器 controller</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> controllers</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;apiproject/models&quot;</span></span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/astaxie/beego&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Operations about Users</span></span><br><span class="line"><span class="keyword">type</span> UserController <span class="keyword">struct</span> &#123;</span><br><span class="line">	beego.Controller</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @Title CreateUser</span></span><br><span class="line"><span class="comment">// @Description create users</span></span><br><span class="line"><span class="comment">// @Param	body		body 	models.User	true		&quot;body for user content&quot;</span></span><br><span class="line"><span class="comment">// @Success 200 &#123;int&#125; models.User.Id</span></span><br><span class="line"><span class="comment">// @Failure 403 body is empty</span></span><br><span class="line"><span class="comment">// @router / [post]</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *UserController)</span> <span class="title">Post</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> user models.User</span><br><span class="line">	json.Unmarshal(u.Ctx.Input.RequestBody, &amp;user)</span><br><span class="line">	uid := models.AddUser(user)</span><br><span class="line">	u.Data[<span class="string">&quot;json&quot;</span>] = <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;<span class="string">&quot;uid&quot;</span>: uid&#125;</span><br><span class="line">	u.ServeJSON()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @Title GetAll</span></span><br><span class="line"><span class="comment">// @Description get all Users</span></span><br><span class="line"><span class="comment">// @Success 200 &#123;object&#125; models.User</span></span><br><span class="line"><span class="comment">// @router / [get]</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *UserController)</span> <span class="title">GetAll</span><span class="params">()</span></span> &#123;</span><br><span class="line">	users := models.GetAllUsers()</span><br><span class="line">	u.Data[<span class="string">&quot;json&quot;</span>] = users</span><br><span class="line">	u.ServeJSON()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @Title Get</span></span><br><span class="line"><span class="comment">// @Description get user by uid</span></span><br><span class="line"><span class="comment">// @Param	uid		path 	string	true		&quot;The key for staticblock&quot;</span></span><br><span class="line"><span class="comment">// @Success 200 &#123;object&#125; models.User</span></span><br><span class="line"><span class="comment">// @Failure 403 :uid is empty</span></span><br><span class="line"><span class="comment">// @router /:uid [get]</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *UserController)</span> <span class="title">Get</span><span class="params">()</span></span> &#123;</span><br><span class="line">	uid := u.GetString(<span class="string">&quot;:uid&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> uid != <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">		user, err := models.GetUser(uid)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			u.Data[<span class="string">&quot;json&quot;</span>] = err.Error()</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			u.Data[<span class="string">&quot;json&quot;</span>] = user</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	u.ServeJSON()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @Title Update</span></span><br><span class="line"><span class="comment">// @Description update the user</span></span><br><span class="line"><span class="comment">// @Param	uid		path 	string	true		&quot;The uid you want to update&quot;</span></span><br><span class="line"><span class="comment">// @Param	body		body 	models.User	true		&quot;body for user content&quot;</span></span><br><span class="line"><span class="comment">// @Success 200 &#123;object&#125; models.User</span></span><br><span class="line"><span class="comment">// @Failure 403 :uid is not int</span></span><br><span class="line"><span class="comment">// @router /:uid [put]</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *UserController)</span> <span class="title">Put</span><span class="params">()</span></span> &#123;</span><br><span class="line">	uid := u.GetString(<span class="string">&quot;:uid&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> uid != <span class="string">&quot;&quot;</span> &#123;</span><br><span class="line">		<span class="keyword">var</span> user models.User</span><br><span class="line">		json.Unmarshal(u.Ctx.Input.RequestBody, &amp;user)</span><br><span class="line">		uu, err := models.UpdateUser(uid, &amp;user)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			u.Data[<span class="string">&quot;json&quot;</span>] = err.Error()</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			u.Data[<span class="string">&quot;json&quot;</span>] = uu</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	u.ServeJSON()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @Title Delete</span></span><br><span class="line"><span class="comment">// @Description delete the user</span></span><br><span class="line"><span class="comment">// @Param	uid		path 	string	true		&quot;The uid you want to delete&quot;</span></span><br><span class="line"><span class="comment">// @Success 200 &#123;string&#125; delete success!</span></span><br><span class="line"><span class="comment">// @Failure 403 uid is empty</span></span><br><span class="line"><span class="comment">// @router /:uid [delete]</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *UserController)</span> <span class="title">Delete</span><span class="params">()</span></span> &#123;</span><br><span class="line">	uid := u.GetString(<span class="string">&quot;:uid&quot;</span>)</span><br><span class="line">	models.DeleteUser(uid)</span><br><span class="line">	u.Data[<span class="string">&quot;json&quot;</span>] = <span class="string">&quot;delete success!&quot;</span></span><br><span class="line">	u.ServeJSON()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @Title Login</span></span><br><span class="line"><span class="comment">// @Description Logs user into the system</span></span><br><span class="line"><span class="comment">// @Param	username		query 	string	true		&quot;The username for login&quot;</span></span><br><span class="line"><span class="comment">// @Param	password		query 	string	true		&quot;The password for login&quot;</span></span><br><span class="line"><span class="comment">// @Success 200 &#123;string&#125; login success</span></span><br><span class="line"><span class="comment">// @Failure 403 user not exist</span></span><br><span class="line"><span class="comment">// @router /login [get]</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *UserController)</span> <span class="title">Login</span><span class="params">()</span></span> &#123;</span><br><span class="line">	username := u.GetString(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">	password := u.GetString(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> models.Login(username, password) &#123;</span><br><span class="line">		u.Data[<span class="string">&quot;json&quot;</span>] = <span class="string">&quot;login success&quot;</span></span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		u.Data[<span class="string">&quot;json&quot;</span>] = <span class="string">&quot;user not exist&quot;</span></span><br><span class="line">	&#125;</span><br><span class="line">	u.ServeJSON()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @Title logout</span></span><br><span class="line"><span class="comment">// @Description Logs out current logged in user session</span></span><br><span class="line"><span class="comment">// @Success 200 &#123;string&#125; logout success</span></span><br><span class="line"><span class="comment">// @router /logout [get]</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *UserController)</span> <span class="title">Logout</span><span class="params">()</span></span> &#123;</span><br><span class="line">	u.Data[<span class="string">&quot;json&quot;</span>] = <span class="string">&quot;logout success&quot;</span></span><br><span class="line">	u.ServeJSON()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="创建路由-1"><a href="#创建路由-1" class="headerlink" title="创建路由"></a>创建路由</h2><blockquote>
<p>路由在控制器方法中有注解</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @APIVersion 1.0.0</span></span><br><span class="line"><span class="comment">// @Title beego Test API</span></span><br><span class="line"><span class="comment">// @Description beego has a very cool tools to autogenerate documents for your API</span></span><br><span class="line"><span class="comment">// @Contact astaxie@gmail.com</span></span><br><span class="line"><span class="comment">// @TermsOfServiceUrl http://beego.me/</span></span><br><span class="line"><span class="comment">// @License Apache 2.0</span></span><br><span class="line"><span class="comment">// @LicenseUrl http://www.apache.org/licenses/LICENSE-2.0.html</span></span><br><span class="line"><span class="keyword">package</span> routers</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="comment">// &quot;apiproject/controllers&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;apiproject/controllers&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/astaxie/beego&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	ns := beego.NewNamespace(<span class="string">&quot;/v1&quot;</span>,</span><br><span class="line">		beego.NSNamespace(<span class="string">&quot;/object&quot;</span>,</span><br><span class="line">			beego.NSInclude(</span><br><span class="line">				&amp;controllers.ObjectController&#123;&#125;,</span><br><span class="line">			),</span><br><span class="line">		),</span><br><span class="line">		beego.NSNamespace(<span class="string">&quot;/user&quot;</span>,</span><br><span class="line">			beego.NSInclude(</span><br><span class="line">				&amp;controllers.UserController&#123;&#125;,</span><br><span class="line">			),</span><br><span class="line">		),</span><br><span class="line">	)</span><br><span class="line">	beego.AddNamespace(ns)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="运行并生成-swagger"><a href="#运行并生成-swagger" class="headerlink" title="运行并生成 swagger"></a>运行并生成 swagger</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bee run -gendoc=true -downdoc=true</span><br></pre></td></tr></table></figure>

<h2 id="测试-2"><a href="#测试-2" class="headerlink" title="测试"></a>测试</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/swagger/</span><br></pre></td></tr></table></figure>

<h1 id="beego-从零开始写一个-beego-项目"><a href="#beego-从零开始写一个-beego-项目" class="headerlink" title="beego 从零开始写一个 beego 项目"></a>beego 从零开始写一个 beego 项目</h1><p>为了更好的理解 beego 框架，我们不使用 bee 工具，从零开始来写一个项目，实现步骤如下：</p>
<h2 id="1-创建项目结构"><a href="#1-创建项目结构" class="headerlink" title="1. 创建项目结构"></a>1. 创建项目结构</h2><p>创建一个文件夹，例如：beegopro01，并初始化。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go mod init beegopro01</span><br></pre></td></tr></table></figure>

<p>项目结构如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">|-controller</span><br><span class="line">|-router</span><br><span class="line">|-views</span><br></pre></td></tr></table></figure>

<h2 id="2-创建-controller"><a href="#2-创建-controller" class="headerlink" title="2. 创建 controller"></a>2. 创建 controller</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> controller</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/astaxie/beego&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> UserControler <span class="keyword">struct</span> &#123;</span><br><span class="line">	beego.Controller</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *UserControler)</span> <span class="title">Get</span><span class="params">()</span></span> &#123;</span><br><span class="line">	c.Data[<span class="string">&quot;name&quot;</span>] = <span class="string">&quot;老郭&quot;</span></span><br><span class="line">	c.Data[<span class="string">&quot;site&quot;</span>] = <span class="string">&quot;多课网&quot;</span></span><br><span class="line">	c.TplName = <span class="string">&quot;index.tpl&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-创建-router-路由"><a href="#3-创建-router-路由" class="headerlink" title="3. 创建 router 路由"></a>3. 创建 router 路由</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> routers</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;myproject/controllers&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/astaxie/beego&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">    beego.Router(<span class="string">&quot;/&quot;</span>, &amp;controllers.MainController&#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-创建模板文件-index-tpl"><a href="#4-创建模板文件-index-tpl" class="headerlink" title="4. 创建模板文件 index.tpl"></a>4. 创建模板文件 index.tpl</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>beego 项目<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    Name: &#123;&#123;.name&#125;&#125; <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    Site：&#123;&#123;.site&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-main-go"><a href="#5-main-go" class="headerlink" title="5. main.go"></a>5. main.go</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	_ <span class="string">&quot;beegopro01/router&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/astaxie/beego&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	beego.Run()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="beego-orm-起步"><a href="#beego-orm-起步" class="headerlink" title="beego orm 起步"></a>beego orm 起步</h1><h2 id="安装库"><a href="#安装库" class="headerlink" title="安装库"></a>安装库</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get github.com/astaxie/beego/orm</span><br></pre></td></tr></table></figure>

<h3 id="简单示例"><a href="#简单示例" class="headerlink" title="简单示例"></a>简单示例</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line">	<span class="string">&quot;github.com/astaxie/beego/orm&quot;</span></span><br><span class="line"></span><br><span class="line">	_ <span class="string">&quot;github.com/go-sql-driver/mysql&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 隐射表结构</span></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Id   <span class="keyword">int</span></span><br><span class="line">	Name <span class="keyword">string</span> <span class="string">`orm:&quot;size(100)&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 连接到数据库</span></span><br><span class="line">	orm.RegisterDataBase(<span class="string">&quot;default&quot;</span>, <span class="string">&quot;mysql&quot;</span>, <span class="string">&quot;root:123456@/beego_db?charset=utf8&quot;</span>)</span><br><span class="line">	<span class="comment">// 注册模型</span></span><br><span class="line">	orm.RegisterModel(<span class="built_in">new</span>(User))</span><br><span class="line">	<span class="comment">// 创建表</span></span><br><span class="line">	orm.RunSyncdb(<span class="string">&quot;default&quot;</span>, <span class="literal">false</span>, <span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">()</span></span> &#123;</span><br><span class="line">	o := orm.NewOrm()</span><br><span class="line">	o.Insert(&amp;User&#123;Name: <span class="string">&quot;老郭&quot;</span>&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">find</span><span class="params">()</span></span> &#123;</span><br><span class="line">	o := orm.NewOrm()</span><br><span class="line">	user := User&#123;Id: <span class="number">101</span>&#125;</span><br><span class="line">	o.Read(&amp;user)</span><br><span class="line">	fmt.Printf(<span class="string">&quot;user: %v\n&quot;</span>, user)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">update</span><span class="params">()</span></span> &#123;</span><br><span class="line">	o := orm.NewOrm()</span><br><span class="line">	user := User&#123;Id: <span class="number">101</span>&#125;</span><br><span class="line">	o.Read(&amp;user)</span><br><span class="line">	user.Name = <span class="string">&quot;多课网-老郭&quot;</span></span><br><span class="line">	o.Update(&amp;user)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">del</span><span class="params">()</span></span> &#123;</span><br><span class="line">	o := orm.NewOrm()</span><br><span class="line">	user := User&#123;Id: <span class="number">101</span>&#125;</span><br><span class="line">	o.Read(&amp;user)</span><br><span class="line">	o.Delete(&amp;user)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// add()</span></span><br><span class="line">	<span class="comment">// update()</span></span><br><span class="line">	<span class="comment">// find()</span></span><br><span class="line">	<span class="comment">// update()</span></span><br><span class="line">	del()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

    </div>

    
    
    
        <div class="reward-container">
  <div></div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="https://api.xiaobaibk.com/static/images/qrcode.png" alt="小白 微信支付">
        <p>微信支付</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="https://api.xiaobaibk.com/static/images/qrcode.png" alt="小白 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>小白
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://19981115.xyz/posts/45355/" title="Golang-WEB开发-笔记">https://19981115.xyz/posts/45355/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

        

  <div class="followme">
    <p>欢迎关注我的其它发布渠道</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="https://twitter.com/LverBai">
            <span class="icon">
              <i class="fab fa-twitter"></i>
            </span>

            <span class="label">Twitter</span>
          </a>
        </div>

        <div class="social-item">
          <a target="_blank" class="social-link" href="https://t.me/lmbai">
            <span class="icon">
              <i class="fab fa-telegram"></i>
            </span>

            <span class="label">Telegram</span>
          </a>
        </div>

        <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
        </div>
    </div>
  </div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/WEB/" rel="tag"><i class="fa fa-tag"></i> WEB</a>
              <a href="/tags/Golang/" rel="tag"><i class="fa fa-tag"></i> Golang</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/3751/" rel="prev" title="Golang-gorm笔记">
      <i class="fa fa-chevron-left"></i> Golang-gorm笔记
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/41977/" rel="next" title="Java注解和反射-KuangShen">
      Java注解和反射-KuangShen <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Golang-http-%E6%A0%87%E5%87%86%E5%BA%93"><span class="nav-number">1.</span> <span class="nav-text">Golang http 标准库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#http-%E6%A0%87%E5%87%86%E5%BA%93%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8A%9F%E8%83%BD"><span class="nav-number">1.1.</span> <span class="nav-text">http 标准库客户端功能</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%91%E5%87%BA-GET-%E8%AF%B7%E6%B1%82"><span class="nav-number">1.1.1.</span> <span class="nav-text">发出 GET 请求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GET-%E8%AF%B7%E6%B1%82%EF%BC%8C%E6%8A%8A%E4%B8%80%E4%BA%9B%E5%8F%82%E6%95%B0%E5%81%9A%E6%88%90%E5%8F%98%E9%87%8F%E8%80%8C%E4%B8%8D%E6%98%AF%E7%9B%B4%E6%8E%A5%E6%94%BE%E5%88%B0-url"><span class="nav-number">1.1.2.</span> <span class="nav-text">GET 请求，把一些参数做成变量而不是直接放到 url</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E6%9E%90-JSON-%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C"><span class="nav-number">1.1.3.</span> <span class="nav-text">解析 JSON 类型的返回结果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GET-%E8%AF%B7%E6%B1%82%E6%B7%BB%E5%8A%A0%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="nav-number">1.1.4.</span> <span class="nav-text">GET 请求添加请求头</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%91%E5%87%BA-POST-%E8%AF%B7%E6%B1%82"><span class="nav-number">1.2.</span> <span class="nav-text">发出 POST 请求</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%91%E9%80%81-JSON-%E6%95%B0%E6%8D%AE%E7%9A%84-post-%E8%AF%B7%E6%B1%82"><span class="nav-number">1.2.1.</span> <span class="nav-text">发送 JSON 数据的 post 请求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-Client-%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AF%B7%E6%B1%82"><span class="nav-number">1.2.2.</span> <span class="nav-text">使用 Client 自定义请求</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HTTP-Server"><span class="nav-number">1.3.</span> <span class="nav-text">HTTP Server</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-Handler-%E5%AE%9E%E7%8E%B0%E5%B9%B6%E5%8F%91%E5%A4%84%E7%90%86"><span class="nav-number">1.3.1.</span> <span class="nav-text">使用 Handler 实现并发处理</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Golang-%E6%A0%87%E5%87%86%E5%BA%93-template"><span class="nav-number">2.</span> <span class="nav-text">Golang 标准库 template</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E4%B8%AA%E6%A8%A1%E6%9D%BF%E5%AE%9E%E4%BE%8B"><span class="nav-number">2.1.</span> <span class="nav-text">第一个模板实例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B9%9F%E5%8F%AF%E4%BB%A5%E6%98%AF%E7%BB%93%E6%9E%84%E4%BD%93"><span class="nav-number">2.2.</span> <span class="nav-text">也可以是结构体</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#html-%E6%A8%A1%E6%9D%BF"><span class="nav-number">2.3.</span> <span class="nav-text">html 模板</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E6%9C%AC%E5%92%8C%E7%A9%BA%E6%A0%BC"><span class="nav-number">2.4.</span> <span class="nav-text">文本和空格</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%A1%E9%81%93-pipeline"><span class="nav-number">2.5.</span> <span class="nav-text">管道 pipeline</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%98%E9%87%8F"><span class="nav-number">2.6.</span> <span class="nav-text">变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><span class="nav-number">2.7.</span> <span class="nav-text">条件判断</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF%E8%BF%AD%E4%BB%A3"><span class="nav-number">2.8.</span> <span class="nav-text">循环迭代</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#with%E2%80%A6end"><span class="nav-number">2.9.</span> <span class="nav-text">with…end</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0"><span class="nav-number">2.10.</span> <span class="nav-text">内置函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B5%8C%E5%A5%97-template%EF%BC%9Adefine-%E5%92%8C-template"><span class="nav-number">2.11.</span> <span class="nav-text">嵌套 template：define 和 template</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HttpRouter"><span class="nav-number">3.</span> <span class="nav-text">HttpRouter</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85"><span class="nav-number">3.1.</span> <span class="nav-text">下载安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E4%B8%AA%E8%B7%AF%E7%94%B1%E5%AE%9E%E4%BE%8B"><span class="nav-number">3.2.</span> <span class="nav-text">第一个路由实例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#http-router-%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95"><span class="nav-number">3.3.</span> <span class="nav-text">http router 请求方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#restful-%E9%A3%8E%E6%A0%BC%E8%B7%AF%E7%94%B1"><span class="nav-number">3.4.</span> <span class="nav-text">restful 风格路由</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E7%AE%80%E4%BB%8B"><span class="nav-number">4.</span> <span class="nav-text">Gin 简介</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Gin-%E5%AE%98%E7%BD%91"><span class="nav-number">4.1.</span> <span class="nav-text">Gin 官网</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#gin-%E7%AE%80%E4%BB%8B"><span class="nav-number">4.2.</span> <span class="nav-text">gin 简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#gin-%E7%89%B9%E5%BE%81"><span class="nav-number">4.3.</span> <span class="nav-text">gin 特征</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E4%B8%AA-gin"><span class="nav-number">4.4.</span> <span class="nav-text">第一个 gin</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E5%AE%9E%E7%8E%B0%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95"><span class="nav-number">5.</span> <span class="nav-text">Gin 实现用户登录</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">5.1.</span> <span class="nav-text">实现步骤</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6-tempates"><span class="nav-number">5.1.1.</span> <span class="nav-text">创建一个文件 tempates</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%99%BB%E5%BD%95-html-%E6%96%87%E4%BB%B6"><span class="nav-number">5.1.2.</span> <span class="nav-text">创建一个登录 html 文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%AC%A2%E8%BF%8E-html-%E9%A1%B5%E9%9D%A2"><span class="nav-number">5.1.3.</span> <span class="nav-text">创建一个欢迎 html 页面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-Gin-%E5%A4%84%E7%90%86%E9%80%BB%E8%BE%91"><span class="nav-number">5.1.4.</span> <span class="nav-text">使用 Gin 处理逻辑</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="nav-number">6.</span> <span class="nav-text">Gin 请求参数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Get-%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="nav-number">6.1.</span> <span class="nav-text">Get 请求参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Post-%E5%8F%82%E6%95%B0"><span class="nav-number">6.2.</span> <span class="nav-text">Post 参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%AF%E5%8A%B2%E5%8F%82%E6%95%B0%EF%BC%88restful-%E9%A3%8E%E6%A0%BC%EF%BC%89"><span class="nav-number">6.3.</span> <span class="nav-text">路劲参数（restful 风格）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A2%E6%9C%89-Get-%E4%B9%9F%E6%9C%89-Post"><span class="nav-number">6.4.</span> <span class="nav-text">既有 Get 也有 Post</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E8%A1%A8%E5%8D%95%E5%A4%84%E7%90%86"><span class="nav-number">7.</span> <span class="nav-text">Gin 表单处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA-HTML-%E8%A1%A8%E5%8D%95"><span class="nav-number">7.1.</span> <span class="nav-text">创建一个 HTML 表单</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Go-code"><span class="nav-number">7.2.</span> <span class="nav-text">Go code</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A"><span class="nav-number">8.</span> <span class="nav-text">Gin 数据绑定</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%91%E5%AE%9A-Form-%E8%A1%A8%E5%8D%95"><span class="nav-number">8.1.</span> <span class="nav-text">绑定 Form 表单</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%91%E5%AE%9A%E6%9F%A5%E8%AF%A2%E5%8F%82%E6%95%B0"><span class="nav-number">8.2.</span> <span class="nav-text">绑定查询参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%AF%E5%BE%84%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E7%BB%91%E5%AE%9A"><span class="nav-number">8.3.</span> <span class="nav-text">路径请求参数绑定</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E8%AE%BF%E9%97%AE%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E9%9B%86%E6%88%90-BootStrap-%E6%A1%86%E6%9E%B6"><span class="nav-number">9.</span> <span class="nav-text">Gin 访问静态文件集成 BootStrap 框架</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD-BootStrap"><span class="nav-number">9.1.</span> <span class="nav-text">下载 BootStrap</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0-bootstrap-css-%E5%92%8C-js-%E6%96%87%E4%BB%B6"><span class="nav-number">9.2.</span> <span class="nav-text">添加 bootstrap css 和 js 文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-html-%E6%96%87%E4%BB%B6"><span class="nav-number">9.3.</span> <span class="nav-text">创建 html 文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Go-Code"><span class="nav-number">9.4.</span> <span class="nav-text">Go Code</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E4%BD%BF%E7%94%A8%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="nav-number">10.</span> <span class="nav-text">Gin 使用中间件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Gin-%E9%BB%98%E8%AE%A4%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="nav-number">10.1.</span> <span class="nav-text">Gin 默认中间件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="nav-number">10.2.</span> <span class="nav-text">自定义中间件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-Gin-BasicAuth-%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="nav-number">11.</span> <span class="nav-text">使用 Gin BasicAuth 中间件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B"><span class="nav-number">11.1.</span> <span class="nav-text">示例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95"><span class="nav-number">11.2.</span> <span class="nav-text">测试</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-cookie-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">12.</span> <span class="nav-text">Gin cookie 的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Gin-cookie-%E7%9A%84%E4%BD%BF%E7%94%A8-1"><span class="nav-number">12.1.</span> <span class="nav-text">Gin cookie 的使用</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E4%BD%BF%E7%94%A8-Session"><span class="nav-number">13.</span> <span class="nav-text">Gin 使用 Session</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-gin-session-%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="nav-number">13.1.</span> <span class="nav-text">使用 gin session 中间件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B"><span class="nav-number">13.2.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E5%AE%9E%E7%8E%B0-restful-%E9%A3%8E%E6%A0%BC%E7%9A%84-CRUD"><span class="nav-number">14.</span> <span class="nav-text">Gin 实现 restful 风格的 CRUD</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E5%AE%9E%E7%8E%B0%E8%B7%AF%E7%94%B1%E5%88%86%E7%BB%84"><span class="nav-number">15.</span> <span class="nav-text">Gin 实现路由分组</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E8%BE%93%E5%87%BA%E6%B8%B2%E6%9F%93"><span class="nav-number">16.</span> <span class="nav-text">Gin 输出渲染</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="nav-number">17.</span> <span class="nav-text">Gin 实现文件上传</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-html-%E6%96%87%E4%BB%B6-1"><span class="nav-number">17.1.</span> <span class="nav-text">创建 html 文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Go-Code-1"><span class="nav-number">17.2.</span> <span class="nav-text">Go Code</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE-%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84"><span class="nav-number">18.</span> <span class="nav-text">Gin 博客项目-项目架构</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%84%E8%8C%83%E5%8C%85%E5%8F%8A%E7%9B%AE%E5%BD%95"><span class="nav-number">18.1.</span> <span class="nav-text">规范包及目录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE"><span class="nav-number">18.2.</span> <span class="nav-text">初始化项目</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90-gorm"><span class="nav-number">19.</span> <span class="nav-text">Gin 博客项目-集成 gorm</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E5%8C%85"><span class="nav-number">19.1.</span> <span class="nav-text">下载包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%9E%8B"><span class="nav-number">19.2.</span> <span class="nav-text">创建模型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-Dao"><span class="nav-number">19.3.</span> <span class="nav-text">创建 Dao</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95-1"><span class="nav-number">19.4.</span> <span class="nav-text">测试</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90-Bootstrap-%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E8%A1%A8%E5%8D%95"><span class="nav-number">20.</span> <span class="nav-text">Gin 博客项目-集成 Bootstrap 创建用户表单</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD-bootstrap"><span class="nav-number">20.1.</span> <span class="nav-text">下载 bootstrap</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0-js-%E5%92%8C-css-%E5%88%B0-assets-%E7%9B%AE%E5%BD%95%E4%B8%8B%E9%9D%A2"><span class="nav-number">20.2.</span> <span class="nav-text">添加 js 和 css 到 assets 目录下面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7-html"><span class="nav-number">20.3.</span> <span class="nav-text">创建添加用户 html</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE-%E5%AE%9E%E7%8E%B0%E6%8E%A7%E5%88%B6%E5%99%A8%E5%92%8C%E8%B7%AF%E7%94%B1"><span class="nav-number">21.</span> <span class="nav-text">Gin 博客项目-实现控制器和路由</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8E%A7%E5%88%B6%E5%99%A8-controller"><span class="nav-number">21.1.</span> <span class="nav-text">控制器 controller</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1-router"><span class="nav-number">21.2.</span> <span class="nav-text">路由 router</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE-%E8%AE%BE%E8%AE%A1%E9%9D%99%E6%80%81%E9%A1%B5%E9%9D%A2"><span class="nav-number">22.</span> <span class="nav-text">Gin 博客项目-设计静态页面</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#header"><span class="nav-number">22.1.</span> <span class="nav-text">header</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E5%86%8C-register-html"><span class="nav-number">22.2.</span> <span class="nav-text">注册 register.html</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%99%BB%E5%BD%95-login-html"><span class="nav-number">22.3.</span> <span class="nav-text">登录 login.html</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A6%96%E9%A1%B5-index-html"><span class="nav-number">22.4.</span> <span class="nav-text">首页 index.html</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE-%E7%94%A8%E6%88%B7%E6%B3%A8%E5%86%8C"><span class="nav-number">23.</span> <span class="nav-text">Gin 博客项目-用户注册</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#controller"><span class="nav-number">23.1.</span> <span class="nav-text">controller</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#router"><span class="nav-number">23.2.</span> <span class="nav-text">router</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE-%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95"><span class="nav-number">24.</span> <span class="nav-text">Gin 博客项目-用户登录</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#dao"><span class="nav-number">24.1.</span> <span class="nav-text">dao</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#controller-1"><span class="nav-number">24.2.</span> <span class="nav-text">controller</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#router-1"><span class="nav-number">24.3.</span> <span class="nav-text">router</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#login-html"><span class="nav-number">24.4.</span> <span class="nav-text">login.html</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE-%E9%9B%86%E6%88%90-markdown-%E7%BC%96%E8%BE%91%E5%99%A8"><span class="nav-number">25.</span> <span class="nav-text">Gin 博客项目-集成 markdown 编辑器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD-mdeditor"><span class="nav-number">25.1.</span> <span class="nav-text">下载 mdeditor</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9B%86%E6%88%90"><span class="nav-number">25.2.</span> <span class="nav-text">集成</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE-%E5%88%9B%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%A8%A1%E5%9E%8B%E5%92%8C-DAO"><span class="nav-number">26.</span> <span class="nav-text">Gin 博客项目-创建博客模型和 DAO</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%9E%8B-1"><span class="nav-number">26.1.</span> <span class="nav-text">创建模型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-DAO"><span class="nav-number">26.2.</span> <span class="nav-text">创建 DAO</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE-%E5%88%9B%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%8E%A7%E5%88%B6%E5%99%A8%E5%92%8C%E8%B7%AF%E7%94%B1"><span class="nav-number">27.</span> <span class="nav-text">Gin 博客项目-创建博客控制器和路由</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="nav-number">27.1.</span> <span class="nav-text">创建控制器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%B7%AF%E7%94%B1"><span class="nav-number">27.2.</span> <span class="nav-text">创建路由</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE-%E6%B7%BB%E5%8A%A0%E5%8D%9A%E5%AE%A2"><span class="nav-number">28.</span> <span class="nav-text">Gin 博客项目-添加博客</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E5%8D%9A%E5%AE%A2%E9%A1%B5%E9%9D%A2"><span class="nav-number">28.1.</span> <span class="nav-text">添加博客页面</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE-%E5%AE%9E%E7%8E%B0%E5%8D%9A%E5%AE%A2%E5%88%97%E8%A1%A8"><span class="nav-number">29.</span> <span class="nav-text">Gin 博客项目-实现博客列表</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%9A%E5%AE%A2%E5%88%97%E8%A1%A8"><span class="nav-number">29.1.</span> <span class="nav-text">博客列表</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Gin-%E5%8D%9A%E5%AE%A2%E9%A1%B9%E7%9B%AE-%E5%AE%9E%E7%8E%B0%E5%8D%9A%E5%AE%A2%E8%AF%A6%E7%BB%86"><span class="nav-number">30.</span> <span class="nav-text">Gin 博客项目-实现博客详细</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%9A%E5%AE%A2%E8%AF%A6%E7%BB%86%E9%A1%B5%E9%9D%A2"><span class="nav-number">30.1.</span> <span class="nav-text">博客详细页面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%9A%E5%AE%A2%E8%AF%A6%E7%BB%86%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="nav-number">30.2.</span> <span class="nav-text">博客详细控制器</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#beego-%E8%B5%B7%E6%AD%A5"><span class="nav-number">31.</span> <span class="nav-text">beego 起步</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85-beego"><span class="nav-number">31.1.</span> <span class="nav-text">下载安装 beego</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#beego-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7-bee"><span class="nav-number">31.2.</span> <span class="nav-text">beego 命令行工具 bee</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E4%B8%AA-beego-%E9%A1%B9%E7%9B%AE"><span class="nav-number">31.3.</span> <span class="nav-text">第一个 beego 项目</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#beego-restful-api"><span class="nav-number">32.</span> <span class="nav-text">beego restful api</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-restful-api-%E9%A1%B9%E7%9B%AE"><span class="nav-number">32.1.</span> <span class="nav-text">创建 restful api 项目</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%9E%8B-2"><span class="nav-number">32.2.</span> <span class="nav-text">创建模型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%8E%A7%E5%88%B6%E5%99%A8-controller"><span class="nav-number">32.3.</span> <span class="nav-text">创建控制器 controller</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%B7%AF%E7%94%B1-1"><span class="nav-number">32.4.</span> <span class="nav-text">创建路由</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C%E5%B9%B6%E7%94%9F%E6%88%90-swagger"><span class="nav-number">32.5.</span> <span class="nav-text">运行并生成 swagger</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95-2"><span class="nav-number">32.6.</span> <span class="nav-text">测试</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#beego-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%86%99%E4%B8%80%E4%B8%AA-beego-%E9%A1%B9%E7%9B%AE"><span class="nav-number">33.</span> <span class="nav-text">beego 从零开始写一个 beego 项目</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="nav-number">33.1.</span> <span class="nav-text">1. 创建项目结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E5%88%9B%E5%BB%BA-controller"><span class="nav-number">33.2.</span> <span class="nav-text">2. 创建 controller</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E5%88%9B%E5%BB%BA-router-%E8%B7%AF%E7%94%B1"><span class="nav-number">33.3.</span> <span class="nav-text">3. 创建 router 路由</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E5%88%9B%E5%BB%BA%E6%A8%A1%E6%9D%BF%E6%96%87%E4%BB%B6-index-tpl"><span class="nav-number">33.4.</span> <span class="nav-text">4. 创建模板文件 index.tpl</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-main-go"><span class="nav-number">33.5.</span> <span class="nav-text">5. main.go</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#beego-orm-%E8%B5%B7%E6%AD%A5"><span class="nav-number">34.</span> <span class="nav-text">beego orm 起步</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%BA%93"><span class="nav-number">34.1.</span> <span class="nav-text">安装库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B"><span class="nav-number">34.1.1.</span> <span class="nav-text">简单示例</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="小白"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">小白</p>
  <div class="site-description" itemprop="description">随言笔记，胡乱编写</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">29</span>
          <span class="site-state-item-name">笔记</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">59</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/lovebai" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;lovebai" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:kuxiaoju@gmail.com" title="E-Mail → mailto:kuxiaoju@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">小白</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
      <script src="https://cdn.jsdelivr.net/gh/lovebai/live2d-widget@master/autoload.js"></script>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/js/local-search.js"></script>









<script data-pjax>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>




    <div id="pjax">
  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '26a49be573a0abb55aaf',
      clientSecret: '477a2a1667660c465b7f217a11b31fff4a7b0f55',
      repo        : 'hexo',
      owner       : 'lovebai',
      admin       : ['lovebai'],
      id          : 'ed10998d20004bca615b94a141dfe517',
        language: '',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

    </div>
</body>
</html>
